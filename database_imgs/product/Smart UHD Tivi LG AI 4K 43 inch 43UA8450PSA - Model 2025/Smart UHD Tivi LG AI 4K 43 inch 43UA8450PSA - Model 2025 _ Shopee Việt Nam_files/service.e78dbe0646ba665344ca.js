(self.miniJsonp=self.miniJsonp||[]).push([[9631],{27449:function(e,t,n){var r,o,c,a,i,u,s,l,f,_,d;e.exports=(r=n(58518),o=n(29494),c=n(36808),a=n(67429),i=n(94301),u=n(44900),s=n(59065),l=n(67677),f=n(58397),_=n(82677),d=n(34857),function(){"use strict";var e={701:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(661),o=n.n(r),c=o().t.bind(o())},187:function(e){var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,c),r(n)}function c(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}S(e,t,c,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&S(e,"error",t,n)}(e,o,{once:!0})}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var a=10;function i(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function s(e,t,n,r){var o,c,a,s;if(i(n),void 0===(c=e._events)?(c=e._events=Object.create(null),e._eventsCount=0):(void 0!==c.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),c=e._events),a=c[t]),void 0===a)a=c[t]=n,++e._eventsCount;else if("function"==typeof a?a=c[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=u(e))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=l.bind(r);return o.listener=n,r.wrapFn=o,o}function _(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):p(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function S(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(c){r.once&&e.removeEventListener(t,o),n(c)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return u(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,c=this._events;if(void 0!==c)o=o&&void 0===c.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var i=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw i.context=a,i}var u=c[e];if(void 0===u)return!1;if("function"==typeof u)r(u,this,t);else{var s=u.length,l=p(u,s);for(n=0;n<s;++n)r(l[n],this,t)}return!0},c.prototype.addListener=function(e,t){return s(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return s(this,e,t,!0)},c.prototype.once=function(e,t){return i(t),this.on(e,f(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,f(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,r,o,c,a;if(i(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,c=n.length-1;c>=0;c--)if(n[c]===t||n[c].listener===t){a=n[c].listener,o=c;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,c=Object.keys(n);for(r=0;r<c.length;++r)"removeListener"!==(o=c[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},c.prototype.listeners=function(e){return _(this,e,!0)},c.prototype.rawListeners=function(e){return _(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},c.prototype.listenerCount=d,c.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},782:function(e){e.exports=s},830:function(e){e.exports=l},292:function(e){e.exports=f},661:function(e){e.exports=r},444:function(e){e.exports=i},598:function(e){e.exports=c},383:function(e){e.exports=_},944:function(e){e.exports=d},855:function(e){e.exports=o},672:function(e){e.exports=u},459:function(e){e.exports=a}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};return function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,n){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,n)}function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,n,r){return f=l()?Reflect.construct:function(e,n,r){var o=[null];o.push.apply(o,n);var c=new(Function.bind.apply(e,o));return r&&t(c,r.prototype),c},f.apply(null,arguments)}function _(e){var n="function"==typeof Map?new Map:void 0;return _=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,o)}function o(){return f(e,arguments,i(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t(o,e)},_(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}n.r(p),n.d(p,{$tracker:function(){return st},Blacklist:function(){return L},CancelOrderWarning:function(){return U},CustomError:function(){return m},EventBus:function(){return lt},ExceptionName:function(){return Pe},Forbidden:function(){return v},HTTPError:function(){return j},InternalServerError:function(){return G},Limiting:function(){return w},MarkName:function(){return Ae},NeedCaptchaVerify:function(){return k},NotFound:function(){return I},ReportComponent:function(){return Ce},ReportPoint:function(){return Be},TemporyError:function(){return M},Unauthoried:function(){return P},UnprocessableEntity:function(){return D},UntrustedNetwork:function(){return N},UnverifiedPhoneNumber:function(){return x},Webview:function(){return A},affiliateSchema:function(){return vt},agentConversationSchema:function(){return Ct},clearApiCache:function(){return oe},collectAsyncTask:function(){return qe},collectComponentTask:function(){return Qe},collectConversationLoadTask:function(){return We},collectLoadTask:function(){return Ve},configTrackerUser:function(){return it},contactsSchema:function(){return Pt},conversationSchema:function(){return ht},exceptionTag:function(){return Ie},fetch:function(){return ot},getReportManager:function(){return we},getTranslation:function(){return kt},initMDAPSdk:function(){return Xe},isError:function(){return F},isInServiceDownDuration:function(){return ue},mdapConfig:function(){return ke},messageSchema:function(){return Tt},messageShortcutsSchema:function(){return yt},normalize:function(){return wt},offerSchema:function(){return Ot},orderSchema:function(){return gt},productSchema:function(){return mt},rateCardsSchema:function(){return At},reportApiTime:function(){return Je},shopSchema:function(){return bt},shopService:function(){return Z},stickerSchema:function(){return Rt},userSchema:function(){return Et},vouchersSchema:function(){return It}});var S=function(t){r(o,t);var n=d(o);function o(t,r,c){var a;return e(this,o),(a=n.call(this,t)).name=a.constructor.name,a.errors=r,a.data=c,a}return o}(_(Error));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}var v=function(t){r(o,t);var n=E(o);function o(t,r,c){var a;return e(this,o),(a=n.call(this,t,r,c)).name=a.constructor.name,a}return s(o,[{key:"handler",value:function(){}}]),o}(S),T=n(701).t;function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}var g=["unauthorized_for_shop","target_subaccount_unauthorized_for_shop","target_group_unauthorized_for_shop","conversation_not_belong_to_you","conversation_not_dispatch","cannot_move_conversation_to_yourself","target_subaccount_not_online","subaccount_conversation_not_found","conversation_closed"],m=function(t){r(o,t);var n=h(o);function o(t,r,a){var i;return e(this,o),(i=n.call(this,t,r,a)).name=i.constructor.name,i.handler=i.handler.bind(c(i)),i}return s(o,[{key:"handler",value:function(){var e="";if(g.includes(this.errors))e="forward.error.".concat(this.errors);else switch(this.errors){case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title";break;case"too_many_requests_for_unique_fields":e="feedback_modal.too_many_requests_for_unique_fields";break;default:e="common.server_error.warning_tips"}return{show:!0,type:"fail",message:T(e)}}}]),o}(S),O=n(855),R=n(701).t;function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}var y={rating_card_expired:"conversation_detail.message_list.csat_expired",have_submited_csat:"conversation_detail.message_list.csat_have_submited",no_organic_within_24hr:"conversation_detail.message_list.csat_no_organic_within_24hr",send_rating_card_too_frequently:"conversation_detail.message_list.csat_send_rating_card_too_frequently",buyer_receiver_too_many_rating_card:"conversation_detail.message_list.csat_buyer_receiver_too_many_rating_card",buyer_active_feedback_off:"conversation_detail.message_list.csat_buyer_active_feedback_off",not_chat_with_agent:"conversation_detail.message_list.csat_not_chat_with_agent",have_received_rating_card_today:"conversation_detail.message_list.csat_have_received_rating_card_today",can_not_rate_now:"conversation_detail.message_list.csat_can_not_rate_now",can_not_rate_bot_now:"cast.error.can_not_rate_bot_now",bot_frequency_limit:"cast.error.bot_frequency_limit",not_chat_with_bot:"cast.error.not_chat_with_bot"},A=function(t){r(o,t);var n=b(o);function o(t,r,c){var a;return e(this,o),(a=n.call(this,t,r,c)).name=a.constructor.name,a}return s(o,[{key:"handler",value:function(e){var t,n=null!==(t=y[this.errors])&&void 0!==t?t:"common.server_error.warning_tips";"cast.error.can_not_rate_bot_now"===n&&(0,O.checkSpecialShops)(e)&&(n="".concat(n,"_idscs"));var r=R(n);if("buyer_receiver_too_many_rating_card"===this.errors){var o,c,a=null!==(o=null===(c=this.data)||void 0===c?void 0:c.limit)&&void 0!==o?o:"";r=R(y.buyer_receiver_too_many_rating_card,{count:a})}return{message:r,show:!0,type:"fail"}}}]),o}(S);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}var P=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),I=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),D=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),w=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),N=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),M=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),L=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),U=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),x=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),G=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),k=function(t){r(o,t);var n=C(o);function o(){return e(this,o),n.apply(this,arguments)}return o}(S),j=function(e){switch(e){case 401:return P;case 403:return v;case 404:return I;case 422:return D;case 429:return w;case 451:return N;case 452:return M;case 491:return m;case 492:return L;case 493:return A;case 494:return U;case 495:return x;case 499:return k;case 500:return G;default:return Error}},F=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")};function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return c}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t,n,r,o,c,a){try{var i=e[c](a),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){W(c,r,o,a,i,"next",e)}function i(e){W(c,r,o,a,i,"throw",e)}a(void 0)}))}}var q=n(598),z=n.n(q),K=n(459);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(){function t(){e(this,t),this.shopsMap={}}var n;return s(t,[{key:"updateShopMap",value:function(e){this.shopsMap=J(J({},this.shopsMap),e)}},{key:"getRegion",value:(n=Q(regeneratorRuntime.mark((function e(t,n){var r,o,c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=11;break}if(o=null===(r=this.shopsMap[n])||void 0===r?void 0:r.country){e.next=8;break}return e.next=5,ot({resource:"shop",id:n,params:{need_cache:1,cache_expires:600}});case 5:return c=e.sent,this.updateShopMap(H({},c.id,c)),e.abrupt("return",c.country);case 8:return e.abrupt("return",o);case 11:if(a=(0,O.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(a)&&!t){e.next=14;break}return e.abrupt("return","GLOBAL");case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})}]),t}(),Z=new $;function ee(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}"live"!==(0,O.getRuntimeServer)()&&(window.shopService=Z);var te=n(444),ne=n.n(te),re="CHAT_API",oe=function(){window.caches&&window.caches.delete(re)};function ce(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Q(regeneratorRuntime.mark((function e(t,n){var r,o,c,a,i,u,s,l,f,_,d,p,S,E,v,T,h,g,m,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=new URL(t),o=r.searchParams,c=o.get("need_cache"),a=o.get("force_update"),i=o.get("_ts"),u=n.method&&"get"===n.method.toLowerCase(),s="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),l="&force_update=".concat(String(a)),f=t.replace(s,"").replace(l,"").replace(i||"",""),!(u&&c&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(re);case 13:return _=e.sent,e.next=16,_.match(f);case 16:if(d=e.sent,p=Date.now(),!d){e.next=25;break}if(!(p<Number(d.headers.get("cache-expires")))||a){e.next=23;break}return e.abrupt("return",d);case 23:return e.next=25,_.delete(f);case 25:return e.next=27,ne()(t,n);case 27:if(S=e.sent,E=S.clone(),200!==S.status){e.next=41;break}return v=ee(S.headers.entries()),T={},h=Number(o.get("cache_expires"))||3600,g=p+1e3*h,e.next=36,S.blob();case 36:m=e.sent,v.forEach((function(e){T[e[0]]=e[1]})),T["cache-expires"]=g,O=new Response(m,{headers:new Headers(T)});try{_.put(f,O)}catch(e){window.caches.delete(re)}case 41:return e.abrupt("return",E);case 44:return e.abrupt("return",ne()(t,n));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",ne()(t,n));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var ie=n(672),ue=function(){var e=window.__SERVICEDOWN_STATT_TIME__,t=window.__SERVICEDOWN_END_TIME__,n=void 0!==e&&void 0!==t,r=Math.ceil(Date.now()/1e3);return n&&r>=e&&r<=t},se=function(e){F(e)||!ue()&&window.__CHAT_GLOBAL__.setServiceDownStatus&&ie.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))},le=function(e,t){var n=new(j(e))(t.message,t.errors||t.error_code||t.errcode,t.data);if(n)throw n},fe=function(e,t,n){if(F(e)){var r=n.uri,o=n.resource;"br_site_is_close"===(t||{}).error_code&&function(e){var t;ue()?(t=e.split("?")[0]).endsWith("conversations")||t.endsWith("conversation/list")?window.__CHAT_GLOBAL__.setServiceDownStatus&&ie.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,list:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&ie.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,message:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&ie.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))}(r),[400,404].includes(e),[491,493].includes(e)?le(e,t):401===e?((0,O.removeItem)("mini-session"),(0,O.removeItem)("mini-sc_redirect"),"login"===o&&le(e,t)):le(e,t)}},_e=function(e){var t=e.uri,n=e.id,r=e.parentId;if(void 0!==n&&parseInt(n)<=0&&!t.includes("message_shortcuts/group")||void 0!==r&&parseInt(r)<=0)throw new Error},de=function(e,t,n){throw e||(t.offlineError=!0),t};function pe(e){return Se.apply(this,arguments)}function Se(){return Se=Q(regeneratorRuntime.mark((function e(t){var n,r,o,c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=Q(regeneratorRuntime.mark((function e(){var t,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.read();case 2:if(t=e.sent,a=t.done,i=t.value,!a){e.next=7;break}return e.abrupt("return",JSON.parse(o.join("")));case 7:return u=r.decode(i,{stream:!0}),o.push(u),e.abrupt("return",c());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(){return a.apply(this,arguments)},n=t.getReader(),r=new TextDecoder,o=[],e.abrupt("return",c());case 6:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}var Ee,ve,Te=n(782),he=n(830),ge=n.n(he),me=n(292),Oe=n.n(me),Re={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"},be={"94a2f272c378ddf18f5c88f4e951c709":"SHOW_HOME_PAGE",a5707a9d6695fc50e257b51aee9ec03b:"LOAD_RESOURCE",dd25761ed961c46f4a0725abf6325b3a:"RENDER_HOME_PAGE","65d0f06861e011436277b54e32e0e702":"SEND_MESSAGE_API",b2bad090fbb5b6eb526af0423326ba91:"SEND_MESSAGE_CONSUMING","00f7d4cb0b968ed35a91ae83c0346fe1":"FETCH_CONV_API",b7b04ad90caccf19961c3dcdf7063294:"FETCH_MESSAGE_API","7ce993bd22dee11001514ad2b8e760bf":"RENDER_MESSAGE_LIST_FROM_CONV"};Ee={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",LOGIN_IN_HTML:"4075993c600862e7c604e35cd692a297",LOGIN_IN_SERVICE:"2845ad2751849e3d43b26a805a25dbb4",PRE_FETCH_USER_INFO:"36a82dac2154de34fa4c6d7e3da73a19",NON_PRE_FETCH_USER_INFO:"a9de236c14047b42eec108bf7f22f2ac",TRANSLATION_IN_HTML:"b3105979b5cc6448de8272e177db5741",TRANSLATION_IN_SERVICE:"acfba493a8c2d11ad323bc09c2d06603",CONVERSATION_MOUNTED:"53ddb086a61674f59a9d84e1a02f04a5",CONVERSATION_LOADED:"800c5562450216bccfad6cd11847c160",RECEIVE_CHATBOT_RESPONSE:"a6f37d623af1c31b5ae3eb333fc571c8",REPORT_T3:"b16720c32b08d2c2b4b9cebb66205520",REPORT_T4:"20749fffb5583f720b3eacf5013c4398",REPORT_ERROR:"ce4cc92284f6ed31f8266c8e676744c5",MESSAGE_LATENCY:"4cb5dab311e98cba8ecb48c5e3df9e12",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf",FETCH_TRANSLATION_ASYNC:"961879cce46dc871cea546c825daf31d",FETCH_TRANSLATION_SYNC:"9f3d370e38d01f43e13f3e7465c1734c",RENDER_OLD_ENTRY:"34be4e989931224dfd8363a07ff0f896",RENDER_NEW_ENTRY:"99502b156aba4099d7e2fa2316f211cd",USER_SETTING:"6ec802950c6974b45c8a9080a70e7017",SEND_MESSAGES:"407610332f95a6a3bde8f720195f5a40"},ve={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf",FETCH_TRANSLATION_ASYNC:"961879cce46dc871cea546c825daf31d",FETCH_TRANSLATION_SYNC:"9f3d370e38d01f43e13f3e7465c1734c"};var ye,Ae={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE",START_SEND_MESSAGE:"START_SEND_MESSAGE",START_HANDLE_RESPONSE:"START_HANDLE_RESPONSE"},Ce={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},Pe={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error",FETCH_CONV_ERROR:"Fetch Conversation Error",FETCH_SERVE_TODAY_CONV_ERROR:"Fetch Serve Today Conversation Error"},Ie={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error",FETCH_CONV_ERROR:"fetch_conversation_error",FETCH_SERVE_TODAY_CONV_ERROR:"fetch_serve_today_conversation_error"},De=(Pe.TYPE_ERROR,Pe.RANGE_ERROR,Pe.SYNTAX_ERROR,Pe.REFERENCE_ERROR,Ie.TYPE_ERROR,Ie.RANGE_ERROR,Ie.SYNTAX_ERROR,Ie.REFERENCE_ERROR,function(){function t(){e(this,t)}return s(t,[{key:"reportLoadResource",value:function(){qe(Be.LOAD_RESOURCE,0)}},{key:"reportRenderHomePage",value:function(e){qe(Be.RENDER_HOME_PAGE,0,{isSidebar:e})}},{key:"reportShowHomePage",value:function(e){if(window.__MINICHAT_ENTRY_CLICKED__){var t=window.__MINICHAT_ENTRY_CLICKED__,n=t.startTime,r=t.fromPage,o=Date.now()-n;window.__MINICHAT_ENTRY_CLICKED__=void 0,e?setTimeout((function(){Qe(Ce.APP,{duration:o,id:Be.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:r}})}),1e3):Qe(Ce.APP,{duration:o,id:Be.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:r}})}}},{key:"reportWhetherPrefetchUserInfo",value:function(){window.__CHATEASY_LOCALE__?qe(Be.PRE_FETCH_USER_INFO,0):qe(Be.NON_PRE_FETCH_USER_INFO,0)}},{key:"reportShowMinichat",value:function(){var e=Date.now()-window.__START_MINICHAT__;Qe(Ce.APP,{duration:e,id:Be.SHOW_WEBCHAT})}},{key:"reportFetchTranslationAsync",value:function(){qe(Be.FETCH_TRANSLATION_ASYNC,0)}},{key:"reportFetchTranslationSync",value:function(){qe(Be.FETCH_TRANSLATION_SYNC,0)}},{key:"reportUserSettingApi",value:function(e){Be.USER_SETTING&&qe(Be.USER_SETTING,e)}},{key:"newReportSendMessagesApi",value:function(e){Be.SEND_MESSAGES&&qe(Be.SEND_MESSAGES,e)}},{key:"reportSendMessageApi",value:function(e){qe(Be.SEND_MESSAGE_API,0,{value:e})}},{key:"reportSendMessageConsuming",value:function(e){var t,n,r=null===(t=(performance.getEntriesByName("".concat(Ae.START_SEND_MESSAGE,"_").concat(null===(n=JSON.parse(e).content)||void 0===n?void 0:n.uid),"mark")||[])[0])||void 0===t?void 0:t.startTime,o=Date.now()-Math.round(performance.timeOrigin+r);Qe(Ce.APP,{duration:o,id:Be.SEND_MESSAGE_CONSUMING})}},{key:"reportFetchConvApi",value:function(e){var t=e.value,n=e.resource;qe(Be.FETCH_CONV_API,0,{value:t,resource:n})}},{key:"reportFetchMessageApi",value:function(e){qe(Be.FETCH_MESSAGE_API,0,{value:e})}},{key:"reportRenderMessageListFromConv",value:function(e){window.__CLICK_CONV__&&(Qe(Ce.APP,{duration:Date.now()-window.__CLICK_CONV__,id:Be.RENDER_MESSAGE_LIST_FROM_CONV,extra:{isFirstRender:e}}),window.__CLICK_CONV__=null)}},{key:"reportVideoUpload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qe(Be.VIDEO_UPLOAD,performance.now()-e,t)}},{key:"reportVideoServiceDone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=performance.getEntriesByName("REPORT_UPLOAD_".concat(e),"mark")[0];if(n){performance.mark("SERVICE_DONE_".concat(e));var r=performance.getEntriesByName("SERVICE_DONE_".concat(e))[0].startTime-n.startTime;performance.clearMarks("REPORT_UPLOAD_".concat(e)),performance.clearMarks("SERVICE_DONE_".concat(e)),qe(Be.SERVICE_DONE,r,t)}}},{key:"reportMessageSocket",value:function(e){var t=+new Date-+e;qe(Be.MESSAGE_SOCKET,t)}},{key:"reportReadSocket",value:function(e){qe(Be.READ_SOCKET,Date.now()-e)}},{key:"reportLoginFailed",value:function(e){qe(Be.LOGIN_FAILED,0,e)}},{key:"reportSocketFailed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qe(Be.SOCKET_FAILED,0,e)}},{key:"reportSharedTabs",value:function(e){qe(Be.SHARED_TABS,e)}},{key:"reportLoginInHtml",value:function(){qe(Be.LOGIN_IN_HTML,0)}},{key:"reportLoginInService",value:function(){qe(Be.LOGIN_IN_SERVICE,0)}},{key:"reportFetchTranslationInHtml",value:function(){qe(Be.TRANSLATION_IN_HTML,0)}},{key:"reportFetchTranslationInService",value:function(){qe(Be.TRANSLATION_IN_SERVICE,0)}},{key:"reportT3OrT4",value:function(e){qe(e,0)}},{key:"reportChatbotApiError",value:function(){qe(Be.REPORT_ERROR,0)}},{key:"reportAsyncTask",value:function(e,t){qe(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"reportReceiveChatbotResponse",value:function(){qe(Be.RECEIVE_CHATBOT_RESPONSE,0)}}]),t}()),we=function(){return window.chatReportManager||(window.chatReportManager=new De),window.chatReportManager};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le,Ue,xe,Ge,ke=function(e){ye=e},je=!1,Fe=location.host.includes("shopee.cn"),He=[],Ye=window.requestIdleCallback,Be="live"===(0,O.getRuntimeServer)()?Ee:ve,Ve=function(){try{var e=performance.getEntriesByName(Ae.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(Ae.STATIC_LOADED,"mark")[0].startTime,n=performance.getEntriesByName(Ae.APP_PREPARED,"mark")[0].startTime,r=performance.getEntriesByName(Ae.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(Ae.APP_RENDERING,"mark")[0].startTime;He.push({id:Be.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:Be.LOAD_STATIC,duration:Math.floor(t-e)},{id:Be.APP_PREPARE,duration:Math.floor(n-t)},{id:Be.LOGIN_API,duration:Math.floor(r-n)},{id:Be.LOGIN_SUCCEEDED,duration:Math.floor(o-r)})}catch(e){}},We=function(){try{var e=performance.getEntriesByName("ENTRY_CLICKED","mark")[0].startTime,t=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime,n=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime;Be.CONVERSATION_MOUNTED&&e&&t&&He.push({id:Be.CONVERSATION_MOUNTED,duration:Math.floor(t-e)}),Be.CONVERSATION_LOADED&&t&&n&&He.push({id:Be.CONVERSATION_LOADED,duration:Math.floor(n-t)})}catch(e){}},Qe=function(e,t){try{var n,r=null,o=null===(n=performance.getEntriesByName(Ae.APP_RENDERING,"mark")[0])||void 0===n?void 0:n.startTime;switch(e){case Ce.WELCOME_PAGE:r=performance.getEntriesByName(Ae.RENDER_WELCOME_PAGE,"mark")[0].startTime,He.push({id:Be.RENDER_WELCOME_PAGE,duration:Math.floor(r-o)});break;case Ce.MESSAGE_LIST:r=performance.getEntriesByName(Ae.RENDER_MESSAGE_LIST,"mark")[0].startTime,He.push({id:Be.RENDER_MESSAGE_LIST,duration:Math.floor(r-o)});break;case Ce.CONVERSATION_LIST:r=performance.getEntriesByName(Ae.RENDER_CONVERSATION_LIST,"mark")[0].startTime,He.push({id:Be.RENDER_CONVERSATION_LIST,duration:Math.floor(r-o)})}He.push(t),Ye(ze,{timeout:2e3})}catch(e){}},qe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{He.push({id:e,duration:t,extra:n}),Ye(ze,{timeout:2e3})}catch(e){}};function ze(e){for(;(e.timeRemaining()>5||e.didTimeout)&&He.length;){var t=He.shift(),n=t.id,r=t.duration,o=t.extra;n&&Je(n,r,o),"live"!==(0,O.getRuntimeServer)()&&Re[n]&&console.log("|-- 上报阶段: ",Re[n],", 耗时为: ".concat(r),", 数据: ",o),be[n]&&console.log("|-- 新加上报点上报阶段: ",be[n],", 耗时为: ".concat(r,", 数据："),o)}He.length&&Ye(ze,{timeout:2e3})}var Ke,Xe=function(){if(!je){var e=(0,O.getRuntimeServer)(),t="live"===e,n=(0,O.getRuntimeRegion)(),r=(0,O.getRuntimeVersion)();Le=new Te.MdapSdk({app_name:"minichat",secret_key:t?"b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127":"2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280",environment:e,region:n,app_version:r,sample:.6}),Ue=new(ge())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages","webchat/api/v1.2/mini/messages",/[\\/]api[\\/]tsp[\\/].*/]}),xe=new(Oe())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),Ge=new Te.CustomPlugin({}),Le.use(Ue),Le.use(xe),Le.use(Ge),je=!0}};function Je(e,t,n){je||Xe();var r={point_id:e,data:{userType:ye,localOrCn:void 0!==Ke?Ke:Ke=Fe&&"CN"!==(0,O.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:"pcmall",hasSandbox:String(!!window.__MMF_MODULE_BY_SANDBOX__)}};t&&(r=Me(Me({},r),{},{duration:t})),n&&(r.data=Me(Me({},r.data),n)),Ge.sendData(r)}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et=(0,O.getRuntimeVersion)(),tt=function(){var e=Q(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null;try{t=O.LS.getItem("mini-session",!0)}catch(e){t=null}if(t){e.next=8;break}return e.next=7,(0,O.getItem)("mini-session");case 7:t=e.sent;case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt={404:"Resource not found",452:"Tempory Error",500:"Internal server error",502:"Bad Gateway"},rt=90309999;function ot(e){return ct.apply(this,arguments)}function ct(){return ct=Q(regeneratorRuntime.mark((function e(t){var n,r,o,c,a,i,u,s,l,f,_,d,p,S,E,v,T,h,g,m,R,b,y,A,C,P,I,D,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.server,o=t.subServer,c=t.version,a=void 0===c?"v1.2":c,i=t.parent,u=t.parentId,s=t.resource,l=t.id,f=t.suffix,_=t.method,d=void 0===_?"GET":_,p=t.credentials,S=void 0===p?"include":p,E=t.extension,v=t.params,T=void 0===v?{}:v,h=t.payload,g=t.headers,m=void 0===g?{}:g,R=t.namespace,b=void 0===R?"mini":R,y=t.fetcher,A=function(){if("sc"===f)return l;if("auth"===s)return u;if(T.shop_id)return T.shop_id;if(h)try{return JSON.parse(h).shop_id}catch(e){}},C=function(e,t){var n,r=t.session,o=t.shouldAddHeader,c=t.region,a=t.spcToken,i=null==r||null===(n=r.user)||void 0===n?void 0:n.uid;i&&(e._uid=i),et&&(e._v=et);var u=z().get("CTOKEN");u&&(e.csrf_token=u),a&&(e.SPC_CDS_CHAT=a),o&&(e["x-shop-region"]=c),e._api_source="pcmall"},P=function(e,t){return[e,Object.entries(t).filter((function(e){var t=V(e,2),n=(t[0],t[1]);return n||0===n})).map((function(e){var t=V(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(encodeURIComponent(r))})).join("&")].filter(Boolean).join("?")},I=function(){var e=z().get("SPC_CDS_CHAT");if(!e){e=(0,K.v4)();var t=window.location.host.split(".");["seller","banhang"].includes(t[0])&&t.shift(),z().set("SPC_CDS_CHAT",e,{domain:".".concat(t.join("."))})}return e},D=function(){var e=Q(regeneratorRuntime.mark((function e(t){var c,_,p,v,g,R,D,w,N,M,L,U,x,G,k,j,F,Y,B,V,W,Q,q,z,K,X,J,$;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,tt();case 3:t=e.sent;case 4:if(_=(c=t||{}).token,p=c.user,v=(p=void 0===p?{}:p).type,g=0,"subaccount"!==v){e.next=15;break}return N=A(),e.next=12,Z.getRegion(!0,N);case 12:w=e.sent,e.next=16;break;case 15:w=(0,O.getRuntimeRegion)().toUpperCase();case 16:return L=(M=_&&"include"===S||!r)?{Authorization:"Bearer ".concat(_),"x-shop-region":w}:{},!r&&(r=(0,O.getApiServer)()),U=I(),n?(D=n,x={},U&&(x.SPC_CDS_CHAT=U),D=P(D,x)):(G=["https:/",r,o,a,b,i,u,s,l,f].filter(Boolean).join("/"),k=E?"".concat(G,".").concat(E):G,C(T,{session:t,shouldAddHeader:M,region:w,spcToken:U}),D=P(k,T)),e.prev=21,_e({uri:D,id:l,parentId:u}),F=Date.now(),Y={method:d,credentials:S,headers:Ze(Ze({},L),m),body:h},B=y||ce,e.next=28,B(D,Y);case 28:if(V=e.sent,g="number"==typeof V.status?V.status:(null===(j=V.__raw)||void 0===j?void 0:j.status)||200,y&&200===g&&h&&(null==(W=we())||W.reportSendMessageConsuming(h)),y?V.error===rt?le(g=499,{message:"need captcha",errcode:g,data:null}):g=(null===(Q=V.__raw)||void 0===Q?void 0:Q.status)||200:g=V.status,[200,204].includes(g)&&"report_upload"===s&&h&&(q=JSON.parse(h),z=q.vid,performance.mark("REPORT_UPLOAD_".concat(z))),se(g),200!==g){e.next=50;break}return K=null,e.prev=36,e.next=39,V.json();case 39:K=e.sent,e.next=45;break;case 42:e.prev=42,e.t0=e.catch(36),K=V;case 45:return X=K instanceof Array?H({},s,K):K,y&&h&&(R=JSON.parse(h).request_id,(0,O.setItem)(R,F)),e.abrupt("return",X);case 50:if(204!==g){e.next=54;break}return e.abrupt("return",null);case 54:e.t1=g,e.next=404===e.t1||452===e.t1||500===e.t1||502===e.t1?57:59;break;case 57:return J={message:nt[g]},e.abrupt("break",74);case 59:if(!y){e.next=71;break}return e.prev=60,e.next=63,pe(null==V||null===($=V.__raw)||void 0===$?void 0:$.body);case 63:J=e.sent,e.next=69;break;case 66:e.prev=66,e.t2=e.catch(60),J={message:"Server Error"};case 69:e.next=74;break;case 71:return e.next=73,V.json();case 73:J=e.sent;case 74:fe(g,J,{uri:D,resource:s});case 75:e.next=80;break;case 77:e.prev=77,e.t3=e.catch(21),de(g,e.t3);case 80:case"end":return e.stop()}}),e,null,[[21,77],[36,42],[60,66]])})));return function(t){return e.apply(this,arguments)}}(),w=window.__WEBCHAT_SESSION__,e.abrupt("return",D(w));case 8:case"end":return e.stop()}}),e)}))),ct.apply(this,arguments)}var at=null,it=function(e){e&&(at=e)},ut=null,st=function(e){var t=e.data,n=e.operation,r=void 0===n?O.TrackerOperation.CLICK:n,o=e.page,c=e.shopId,a=e.section,i=void 0===a?"":a,u=e.type,s=void 0===u?"":u;try{ut||(ut=window.BITrack?window.BITrack:window.trackingSDK);var l=function(e){var t=e.data,n=e.operation,r=e.page,o=e.shopId,c=e.section,a=e.type,i=at||{},u=i.shop_id,s=void 0===u?"":u,l=i.role,f=void 0===l?"":l,_=i.id,d=void 0===_?"":_;return{operation:n,page_section:c,target_type:a,page_type:r||"minichat_page",data:Object.assign({},{shopid:s||o,account_type:f||"shopee_user",account_id:d},t)}}({data:t,operation:r,page:o,shopId:c,section:i,type:s});ut({data:{type:"v3",timestamp:Date.now(),info:l}})}catch(e){console.warn("Tracker error",e)}},lt=new(n(187).EventEmitter),ft=n(383);function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt,St=function(e,t,n){return new ft.schema.Entity(e,dt({},t),dt({},n))},Et=St("users"),vt=St("affiliate"),Tt=St("messages"),ht=St("conversations"),gt=St("orders"),mt=St("products"),Ot=St("offers"),Rt=St("stickers"),bt=St("shops"),yt=St("messageShortcuts"),At=St("rateCards"),Ct=St("agentConversations"),Pt=St("contacts",{},{idAttribute:"account_id"}),It=St("vouchers"),Dt={users:Et,affiliate:vt,messages:Tt,conversations:ht,orders:gt,offers:Ot,products:mt,stickers:Rt,shops:bt,messageShortcuts:yt,rateCards:At,agentConversations:Ct,contacts:Pt,vouchers:It},wt=function(e,t){var n=Dt[e]||St(e);return t instanceof Array?(0,ft.normalize)(t,[n]):(0,ft.normalize)(t,n)},Nt=n(944),Mt=regeneratorRuntime.mark(kt),Lt=[];pt=[202,215];var Ut="https://seller.shopee.sg/api/tsp";"br"===(0,O.getRuntimeRegion)()&&(Ut="https://seller.shopee.com.br/api/tsp"),"live"!==(0,O.getRuntimeServer)()&&(Ut+="/nonlive");var xt=function(e,t){var n=pt.includes(e)?"c":"r",r=(t||"").toLocaleLowerCase(),o="".concat((0,O.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(n,"_").concat(e,"_").concat(r,".json");return ne()(o).then(function(){var e=Q(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Gt=function(e){var t="".concat(Ut,"/init?language=").concat(e,"&collections=202%3B215");return ne()(t).then(function(){var e=Q(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))};function kt(e){var t,n,r,o,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.locale,n={},a.next=4,(0,Nt.call)(Gt,t);case 4:if(r=a.sent,o=null==r?void 0:r.translations,(0,O.checkEmptyObject)(o)||(0,O.checkEmptyObject)(o.collection)||Object.keys(o.collection).forEach((function(e){n=Object.assign(n,o.collection[e])})),!(0,O.checkEmptyObject)(n)){a.next=14;break}return c=[],pt.concat(Lt).forEach((function(e){c.push(xt(e,t))})),a.next=12,(0,Nt.all)(c);case 12:a.sent.forEach((function(e){Object.assign(n,e)}));case 14:return a.abrupt("return",n);case 15:case"end":return a.stop()}}),Mt)}}(),p}())},96961:function(e,t,n){"use strict";e.exports=n(27449)},55698:function(e,t,n){var r,o,c,a,i;e.exports=(r=n(82677),o=n(20573),c=n(29494),a=n(53402),i=n(96961),function(){"use strict";var e={383:function(e){e.exports=r},975:function(e){e.exports=o},511:function(e){e.exports=a},644:function(e){e.exports=i},855:function(e){e.exports=c}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(u),n.d(u,{activeListTabSelector:function(){return d},allChatExcludeAllBuyersConversationIdsSelector:function(){return B},allChatsConversationsSelector:function(){return Mt},allConversationIdsSelector:function(){return z},assistantHighlightSelector:function(){return m},autoRepliedHighlightConvIdSelector:function(){return R},autoRepliedHighlightSelector:function(){return h},autoTranslationStatusSelector:function(){return Pt},bannerInfoSelector:function(){return ne},bizIdSelector:function(){return we},bizIdsSelector:function(){return Me},buyerToPayConversationsSelector:function(){return wt},changeChatWithTypeSelector:function(){return Ne},chatWithIhsSelector:function(){return _e},chatWithTypeSelector:function(){return Q},chatbotConversationIdSelector:function(){return v},chatbotConversationSelector:function(){return j},confirmBannerInfoSelector:function(){return re},conversationBeenDeletedSelector:function(){return ot},conversationDirectionSelector:function(){return ve},conversationHttpStatusSelector:function(){return Ee},conversationIdsSelector:function(){return V},conversationLastMessageIdSelector:function(){return en},conversationLastMessageSelector:function(){return Zt},conversationsSelector:function(){return Te},curConvsMessageSelector:function(){return _n},curMessagesRelatedSelector:function(){return Jt},currentBuyerIdSelector:function(){return Le},currentBuyerSelector:function(){return Xe},currentBuyerShopIdSelector:function(){return Je},currentBuyerShopSelector:function(){return $e},currentConversationBuyerIdSelectors:function(){return Be},currentConversationCanReadSelector:function(){return Se},currentConversationDueStatusTagSelector:function(){return nn},currentConversationIdSelector:function(){return Z},currentConversationSelector:function(){return Pe},currentConversationShopIdSelectors:function(){return He},currentConversationShopNameSelectors:function(){return Fe},currentConversationShopRegionSelectors:function(){return je},currentConversationShopSelectors:function(){return ke},currentConversationStatusSelectors:function(){return Ve},currentConversationStatusTagSelector:function(){return tn},currentConversationToNameSelector:function(){return ct},currentConversationTranslationAccessSelector:function(){return nt},currentPendingOffersCountSelector:function(){return ft},currentSellerAccountIdSelector:function(){return pt},currentShopIdSelector:function(){return Ke},currentShopIsManagedByShopeeSelector:function(){return Ye},degradeConversationIdsSelector:function(){return Re},feedbackSelector:function(){return Tn},filterSelector:function(){return be},filteredConversationsSelector:function(){return ye},folderViewHttpStatusSelector:function(){return Lt},getConversation:function(){return We},getConversationBizId:function(){return Qe},getConversationPendingOffersCountSelector:function(){return _t},getConversationShopId:function(){return qe},getConversationShopRegion:function(){return dt},getConversations:function(){return ze},getConversationsSelector:function(){return U},getConvsMessagesRelatedSelector:function(){return $t},getMessageSelector:function(){return Xt},hasPinFlagSelector:function(){return A},highlightStatusSelector:function(){return T},ihcsEntitySelector:function(){return ue},ihsDisableTextSelector:function(){return pe},inlocationSelector:function(){return J},inquiryWithoutOrderConversationsSelector:function(){return Nt},isAffiliateChatRoomSelector:function(){return Ge},isBuyerChatRoomSelector:function(){return Ue},isChatAvailiableSelector:function(){return te},isDriverSelector:function(){return ee},isNavigateToUnreadMessageSelector:function(){return ut},isNormalBuyerSelector:function(){return q},isOfficialChatSelector:function(){return Ie},keywordSelector:function(){return Ze},lastBuyerSendMessageIdSelector:function(){return En},listsHashSelector:function(){return rt},mediaListSelector:function(){return vn},messagesRelatedMapSelector:function(){return Qt},missedReadNoticeCountSelector:function(){return X},navigateToUnreadMessageIdSelector:function(){return st},needShowConfirmBannerSelector:function(){return oe},noticesCountSelector:function(){return gn},openFolderSelector:function(){return Y},pinnedConversationIdsSelector:function(){return W},productTopBannerInfoSelector:function(){return ce},productTopBannerIsCollapseSelector:function(){return ie},readRequestIdsSelector:function(){return K},reconnectFlagSelector:function(){return hn},redirectionInfoSelector:function(){return ht},replyToMessageSelector:function(){return Sn},resultsSelector:function(){return et},reverseMessagesSelector:function(){return un},rrButtonSelector:function(){return Ot},searchConversationHttpStatusSelector:function(){return tt},selectVideoInfoByKey:function(){return zt},selectVideoInfoKeyByVid:function(){return Kt},serveTodayAllConversationIdsSelector:function(){return L},serveTodayAutoRepliedConversationIdsSelector:function(){return N},serveTodayAutoRepliedConversationsSelector:function(){return G},serveTodayConversationHttpStatusSelector:function(){return C},serveTodayConversationsSelector:function(){return F},serveTodayFolderStatusSelector:function(){return p},serveTodayManuallyRepliedConversationIdsSelector:function(){return M},serveTodayManuallyRepliedConversationsSelector:function(){return k},serveTodayOnlyConversationsSelector:function(){return H},serveTodayPinnedConversationIdsSelector:function(){return D},serveTodaySingleFolderStatusSelector:function(){return S},serveTodayUnrepliedConversationIdsSelector:function(){return w},serveTodayUnrepliedConversationsSelector:function(){return x},serveTodayWaitingUpdatedRecordsSelector:function(){return y},shopAccessSelector:function(){return it},shopIsIhcsSelector:function(){return se},showAssistantAlertSelector:function(){return It},showAssistantHighlightSelector:function(){return Ct},showAutoReplyHighlightSelector:function(){return yt},showBotBannerTextSelector:function(){return Dt},showChatbotConversationSelector:function(){return Ce},showCollapsePartSelector:function(){return ae},showHighlightAreaSelector:function(){return Rt},showLoadingMessagesMapSelector:function(){return Tt},showOnboardingAnimationSelector:function(){return bt},showOnboardingAnimationStatusSelector:function(){return b},showUnrepliedHighlightSelector:function(){return At},showWorkStationSelector:function(){return xe},singleConversationIdsSelector:function(){return I},singleConversationMarkInfoSelector:function(){return vt},singleConversationStateSelector:function(){return P},singleFolderStatusSelector:function(){return E},sortedConversationsSelector:function(){return Ae},subAccountBizIdSelector:function(){return De},subAccountToIsIhcsSelector:function(){return de},toShopIsIhcsSelector:function(){return le},toShopisChoiceOrIsIhcsSelector:function(){return mt},toUserChattingWithIhsSelector:function(){return fe},totalConversationsCountSelector:function(){return St},twoTabsAllConversationIdsSelector:function(){return gt},unrepliedHighlightSelector:function(){return g},unrepliedHightlightConvIdSelector:function(){return O},updateTimeNowSelector:function(){return $}});var o=n(383),c=n(975),a=n(855),i=n(511),s=n(644);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?l(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.serveToday)||{}},d=(0,c.createSelector)(_,(function(e){return e.activeListTab})),p=(0,c.createSelector)(_,(function(e){return e.folderStatus})),S=(0,c.createSelector)(_,(function(e){return e.serveTodaySingleFolderStatus})),E=(0,c.createSelector)(_,(function(e){return e.singleFolderStatus})),v=(0,c.createSelector)(_,(function(e){return e.chatbotConversationId||0})),T=(0,c.createSelector)(_,(function(e){return e.highlightStatus})),h=(0,c.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.autoRepliedHighlightStatus)||!1})),g=(0,c.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.unrepliedHighlightStatus)||!1})),m=(0,c.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.assistantHighlightStatus)||!1})),O=(0,c.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.unrepliedHighlightConvId)||0})),R=(0,c.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.autoRepliedHighlightConvId)||0})),b=(0,c.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.showOnboardingAnimationStatus)||!1})),y=(0,c.createSelector)(_,(function(e){return e.waitingUpdatedRecords||{}})),A=(0,c.createSelector)(_,(function(e){return e.hasPinFlag||!1})),C=(0,c.createSelector)(_,(function(e){return e.status||""})),P=function(e){return(0,c.createSelector)(_,(function(t){return t[e]||{}}))},I=function(e){return(0,c.createSelector)(P(e),(function(e){return Array.from(new Set(e.conversationIds||[]))}))},D=(0,c.createSelector)(_,(function(e){return Array.from(new Set((e[a.ServeTodayTab.PINNED]||{}).conversationIds||[]))})),w=(0,c.createSelector)(_,(function(e){return Array.from(new Set((e[a.ServeTodayTab.UNREPLIED]||{}).conversationIds||[]))})),N=(0,c.createSelector)(_,(function(e){return Array.from(new Set((e[a.ServeTodayTab.AUTOREPLY]||{}).conversationIds||[]))})),M=(0,c.createSelector)(_,(function(e){return Array.from(new Set((e[a.ServeTodayTab.MANUALREPLY]||{}).conversationIds||[]))})),L=(0,c.createSelector)(D,w,N,M,(function(e,t,n,o){return[].concat(r(e),r(t),r(n),r(o))})),U=function(e){return(0,c.createSelector)(i.conversationEntitiesSelector,I(e),(function(e,t){return((0,o.denormalize)(t,[s.conversationSchema],{conversations:e})||[]).filter(Boolean)}))},x=(0,c.createSelector)(U(a.ServeTodayTab.UNREPLIED),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),e})),G=(0,c.createSelector)(U(a.ServeTodayTab.AUTOREPLY),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))})),k=(0,c.createSelector)(U(a.ServeTodayTab.MANUALREPLY),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))})),j=(0,c.createSelector)(i.conversationEntitiesSelector,v,(function(e,t){return(0,o.denormalize)(t,s.conversationSchema,{conversations:e})||{}})),F=(0,c.createSelector)(j,p,S,U(a.ServeTodayTab.PINNED),x,G,k,i.permissionsSelector,(function(t,n,o,c,i,u,s,l){var _,d=[],p=l||{},S=p.chatbotToggleOpen,E=p.chatListRevamp,v=(e(_={},a.ServeTodayTab.PINNED,c),e(_,a.ServeTodayTab.UNREPLIED,i),e(_,a.ServeTodayTab.AUTOREPLY,u),e(_,a.ServeTodayTab.MANUALREPLY,s),_),T=c.map((function(e){return e.id}))||[];return(S?a.ServeTodayFolders:a.ServeTodayFolders.filter((function(e){return e!==a.ServeTodayTab.AUTOREPLY}))).forEach((function(e){var t=v[e];e!==a.ServeTodayTab.PINNED&&(t=t.filter((function(e){return!T.includes(e.id)})),e===a.ServeTodayTab.AUTOREPLY&&(t=t.map((function(e){return f(f({},e),{},{isAutoReply:!0})})))),t.length&&(d=(E?o===e:n[e])?d.concat([{key:e,id:"".concat(e,"Tab")}].concat(r(t))):d.concat([{key:e,id:"".concat(e,"Tab")}]))})),null!=t&&t.id?[t].concat(r(d)):d})),H=(0,c.createSelector)(F,(function(e){return e.filter((function(e){return!e.id.includes("Tab")}))})),Y=(0,c.createSelector)(i.permissionsSelector,d,S,E,(function(e,t,n,r){var o=e.chatListRevamp,c=e.showServingTab?t:"all";return o?"today"===c&&!n||"all"===t&&!r?null:{today:{key:n,id:"".concat(n,"Tab")},all:{key:r,id:"".concat(r,"Tab")}}[c]:null})),B=(0,c.createSelector)(I(a.ServeTodayTab.BUYER_TO_PAY),I(a.ServeTodayTab.INQUIRY_WITHOUT_ORDER),(function(e,t){return Array.from(new Set([].concat(r(e),r(t))))})),V=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationIds)||[]},W=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.pinnedConversationIds)||[]},Q=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.chatWithType)||a.ChatWithTypeEnum.Buyer},q=(0,c.createSelector)(Q,(function(e){return e===a.ChatWithTypeEnum.Buyer})),z=(0,c.createSelector)(V,W,B,i.permissionsSelector,q,(function(e,t,n,o,c){var a=e.filter((function(e){return!t.includes(e)}));return null!=o&&o.chatListRevamp&&c?Array.from(new Set(t.concat([].concat(r(a),r(n))))):t.concat(a)})),K=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.readRequestIds)||[]},X=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.missedReadNoticeCount)||0},J=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.inlocation)||!1},$=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.updateTimeNow)||"0"},Z=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.currentConversationId)||null},ee=(0,c.createSelector)(Q,(function(e){return e===a.ChatWithTypeEnum.Driver})),te=function(e){var t;return null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.isChatAvailiable},ne=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.topBannerInfo)||{}},re=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.confirmBannerInfo)||{}},oe=(0,c.createSelector)(i.permissionsSelector,re,(function(e,t){return(null==e?void 0:e.showConfirmBanner)&&[a.BannerTypeEnum.UPDATE_PRODUCT,a.BannerTypeEnum.UPDATE_ORDER].includes(null==t?void 0:t.bannerType)})),ce=(0,c.createSelector)(ne,(function(e){return(null==e?void 0:e.productBannerInfo)||{}})),ae=(0,c.createSelector)(ne,(function(e){var t;return(null==e?void 0:e.bannerType)===a.BannerTypeEnum.UPDATE_PRODUCT&&!(null==e||null===(t=e.productBannerInfo)||void 0===t||!t.product_name)})),ie=(0,c.createSelector)(ce,(function(e){return null==e?void 0:e.collapse})),ue=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.ihcsEntity)||{}},se=(0,c.createSelector)(ue,(function(e){return e.shop_is_ihcs})),le=(0,c.createSelector)(ue,(function(e){return e.to_shop_is_ihcs})),fe=(0,c.createSelector)(ue,(function(e){return e.to_user_chatting_with_ihs})),_e=(0,c.createSelector)(se,fe,(function(e,t){return!e&&t})),de=(0,c.createSelector)(i.isSubAccountSelector,le,(function(e,t){return e&&t})),pe=(0,c.createSelector)(se,_e,de,(function(e,t,n){var r="";return e?r="conversation_detail.input_field.self_is_internal_shop":n?r="conversation_detail.input_field.subaccount_chat_with_internal_shop":t&&(r="conversation_detail.input_field.user_chat_with_ihs"),r})),Se=function(e){var t;return(0,i.judgeUndefined)({defaultValue:!0,value:null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.currentConversationCanRead})},Ee=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.status)||""},ve=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.direction)||""},Te=(0,c.createSelector)(i.conversationEntitiesSelector,z,(function(e,t){return((0,o.denormalize)(t,[s.conversationSchema],{conversations:e})||[]).filter(Boolean)})),he=(0,c.createSelector)(Te,Z,(function(e,t){return e.filter((function(e){var n=e.id,r=e.unread_count;return e&&(r>0||n===t)}))})),ge=(0,c.createSelector)(Te,(function(e){return e.filter((function(e){return e.isPinned}))})),me=(0,c.createSelector)(Te,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),Oe=(0,c.createSelector)(Te,Z,(function(e,t){return e.filter((function(e){var n=e.unreplied,r=e.id;return void 0===n||n||!n&&r===t}))})),Re=(0,c.createSelector)(Te,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),be=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.filter)||"All"},ye=(0,c.createSelector)(be,Te,he,ge,me,Oe,(function(e,t,n,r,o,c){return{All:t,Unread:n,Pinned:r,Closed:o,Unreplied:c}[e]})),Ae=(0,c.createSelector)(ye,W,i.permissionsSelector,be,(function(e,t,n,r){(n||{}).waitingTimeFilter;var o=e.filter((function(e){return!t.includes(e.id)})),c=e.filter((function(e){return t.includes(e.id)}));return o.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),c.concat(o).filter((function(e){return void 0===e.faking&&(null==e?void 0:e.biz_id)!==a.BizIdEnum.Chatbot}))})),Ce=(0,c.createSelector)(Z,j,(function(e,t){return(null==t?void 0:t.id)&&e===(null==t?void 0:t.id)})),Pe=(0,c.createSelector)(Te,F,Z,i.isSubAccountSelector,J,i.userEntitiesSelector,i.conversationEntitiesSelector,i.permissionsSelector,Ce,j,(function(e,t,n,c,a,i,u,l,f,_){if(f)return _;var d=((l||{}).showServingTab?[].concat(r(e),r(t)):e).find((function(e){return e.id===n}))||{};if(a&&!d.id&&(d=(0,o.denormalize)(n,s.conversationSchema,{conversations:u})||{}),!c&&d.lack){var p=d.to_id,S=(0,o.denormalize)(p,s.userSchema,{users:i})||{},E={to_shop_id:S.shop_id,to_status:S.status,to_name:S.name||"-",to_avatar:S.avatar};return Object.assign(d,E)}return d})),Ie=(0,c.createSelector)(Pe,(function(e){var t;return(null==e||null===(t=e.official_chat)||void 0===t?void 0:t.official_conv_type)===a.OfficialConvType.OFFICIAL_CREDIT||!1})),De=(0,c.createSelector)(i.conversationEntitiesSelector,Z,(function(e,t){var n=(0,o.denormalize)(t,s.conversationSchema,{conversations:e});return(null==n?void 0:n.biz_id)||a.BizIdEnum.SubAccount})),we=(0,c.createSelector)(Q,i.permissionsSelector,i.isSubAccountSelector,De,(function(e,t,n,r){if(n)return r;var o=t||{},c=o.sellerDriverWhitelist,i=o.amsToggleStatus;return!c&&e===a.ChatWithTypeEnum.Driver||!i&&a.ChatWithTypeEnum.Affiliate?a.ChatWithTypeMap.buyer:a.ChatWithTypeMap[e]||a.BizIdEnum.Buyer})),Ne=(0,c.createSelector)(Q,we,(function(e,t){return a.ChatWithTypeMap[e]!==t})),Me=(0,c.createSelector)(i.chatWithTypeListSelector,(function(e){return e.map((function(e){return a.ChatWithTypeMap[e]}))})),Le=(0,c.createSelector)(Pe,(function(e){return(e||{}).to_id||null})),Ue=(0,c.createSelector)(i.isSubAccountSelector,Q,De,Ie,(function(e,t,n,r){return(!e&&t===a.ChatWithTypeEnum.Buyer||e&&n===a.BizIdEnum.SubAccount)&&!r})),xe=(0,c.createSelector)(ee,Ue,Ie,(function(e,t,n){return e||t&&!n})),Ge=(0,c.createSelector)(i.isSubAccountSelector,Q,De,(function(e,t,n){return e?a.subAccountAffiliateBiz.includes(n):t===a.ChatWithTypeEnum.Affiliate})),ke=(0,c.createSelector)(Pe,i.shopsEntitiesSelector,(function(e,t){return(0,o.denormalize)(e.shop_id,s.shopSchema,{shops:t})||{}})),je=(0,c.createSelector)(ke,(function(e){return(null==e?void 0:e.country)||"SG"})),Fe=(0,c.createSelector)(ke,(function(e){return(null==e?void 0:e.name)||"SG"})),He=(0,c.createSelector)(Pe,(function(e){return e.shop_id})),Ye=(0,c.createSelector)(He,ke,(function(e,t){return e&&(null==t?void 0:t.managed_by_shopee)||!1})),Be=(0,c.createSelector)(Pe,(function(e){return e.to_id})),Ve=(0,c.createSelector)(Pe,(function(e){return e.status})),We=function(e){return(0,c.createSelector)(i.conversationEntitiesSelector,(function(t){return(0,o.denormalize)(e,s.conversationSchema,{conversations:t})||{}}))},Qe=function(e){return(0,c.createSelector)(We(e),i.isSubAccountSelector,we,(function(e,t,n){return t?null==e?void 0:e.biz_id:n}))},qe=function(e){return(0,c.createSelector)(We(e),(function(e){return e.shop_id}))},ze=function(e){return(0,c.createSelector)(Te,F,i.permissionsSelector,(function(t,n,o){var c=(o||{}).showServingTab?[].concat(r(t),r(n)):t;return e.map((function(e){return c.find((function(t){return t.id===e}))})).filter(Boolean)}))},Ke=(0,c.createSelector)(Pe,(function(e){return(e||{}).shop_id||null})),Xe=(0,c.createSelector)(i.userEntitiesSelector,Pe,(function(e,t){return t?(0,o.denormalize)(t.to_id,s.userSchema,{users:e}):{}})),Je=(0,c.createSelector)(Pe,(function(e){return(e||{}).to_shop_id||null})),$e=(0,c.createSelector)(Je,i.shopsEntitiesSelector,(function(e,t){return(0,o.denormalize)(e,s.shopSchema,{shops:t})||{}})),Ze=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.keyword)||""},et=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.results)||[]},tt=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.searchStatus)||""},nt=(0,c.createSelector)(Pe,(function(e){return e.translationAccess})),rt=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.listsHash)||{}},ot=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationBeenDeleted)||!1},ct=(0,c.createSelector)(Pe,(function(e){return(e||{}).to_name})),at={hasSCAccess:!0,hasEditOrderAccess:!0,hasViewOrderAccess:!0,hasViewProductAccess:!0,hasEditVoucherAccess:!0,hasViewVoucherAccess:!0,hasViewRrOrderAccess:!0,hasOrderDetailAccess:!0},it=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.access)||at},ut=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.isNavigateToUnreadMessage)||!1},st=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.navigateToUnreadMessageId)||""},lt=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.pendingOffersCount)||{}},ft=(0,c.createSelector)(Pe,lt,(function(e,t){var n=e.shop_id,r=e.to_id;return t["".concat(n,"_").concat(r)]||0})),_t=function(e){return(0,c.createSelector)(We(e),lt,(function(e,t){var n=e.shop_id,r=e.to_id;return t["".concat(n,"_").concat(r)]||0}))},dt=function(e){return(0,c.createSelector)(qe(e),i.shopsEntitiesSelector,(function(e,t){var n=(0,o.denormalize)(e,s.shopSchema,{shops:t})||{};return(null==n?void 0:n.country)||"SG"}))},pt=(0,c.createSelector)(i.isSubAccountSelector,i.currentUserIdSelector,ke,(function(e,t,n){return e?n.user_id:t})),St=(0,c.createSelector)(Q,i.allTotalConversationsCountMapSelector,(function(e,t){return t[e]||{}})),Et=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationMark)||{}},vt=function(e){return(0,c.createSelector)(Et,(function(t){return t[e]}))},Tt=function(e){var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.showLoadingMessagesMap},ht=function(e){var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.redirectionInfo},gt=(0,c.createSelector)(i.permissionsSelector,z,L,(function(e,t,n){return(e||{}).showServingTab?[].concat(r(t),r(n)):t})),mt=(0,c.createSelector)(Pe,i.isSubAccountSelector,le,(function(e,t,n){var r=(e||{}).choice_entity;return(r=void 0===r?{}:r).to_shop_is_choice||n&&!t})),Ot=function(e){var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.clickable},Rt=(0,c.createSelector)(i.permissionsSelector,(function(e){var t=e||{},n=t.onboardingWhitelist,r=t.chatbotToggleOpen,o=t.onboardingNewbieComplete;return r&&!o&&n})),bt=(0,c.createSelector)(Ce,i.permissionsSelector,b,(function(e,t,n){var r=t||{},o=r.onboardingWhitelist,c=r.chatbotToggleOpen,a=r.onboardingNewbieComplete;return(c||!c&&e)&&o&&!a&&n})),yt=(0,c.createSelector)(Rt,i.newbieSelector,bt,m,R,S,i.permissionsSelector,d,(function(e,t,n,r,o,c,i,u){var s=i.chatListRevamp,l=e&&!!(0,a.checkAutoReplyHighlightGuide)(t)&&!n&&!r&&o&&u===a.ConversationListTab.TODAY;return s?l&&c===a.ServeTodayTab.AUTOREPLY:l})),At=(0,c.createSelector)(Rt,i.newbieSelector,bt,m,R,O,g,S,i.permissionsSelector,d,(function(e,t,n,r,o,c,i,u,s,l){var f=s.chatListRevamp,_=(e&&!!(0,a.checkAutoReplyHighlightGuide)(t)&&!n&&!r&&!o&&c||i)&&l===a.ConversationListTab.TODAY;return f?_&&u===a.ServeTodayTab.UNREPLIED:_})),Ct=(0,c.createSelector)(i.newbieSelector,bt,m,i.permissionsSelector,(function(e,t,n,r){var o=(r||{}).chatbotToggleOpen;return!!(0,a.checkAssistantHighlightGuide)(e)&&!t&&n&&!o})),Pt=function(e){return(0,c.createSelector)(i.shopTranslationSettingsSelector,we,(function(t,n){var r=(t[e]||{}).autoTranslationStatus;return n===a.BizIdEnum.Buyer||n===a.BizIdEnum.SubAccount?r:a.SwitchStatus.ENABLED}))},It=(0,c.createSelector)(T,i.permissionsSelector,Q,(function(e,t,n){var r=t.chatbotToggleOpen,o=t.onboardingWhitelist;return(r&&o||(null==e?void 0:e.showAssistantAlert))&&n===a.ChatWithTypeEnum.Buyer})),Dt=(0,c.createSelector)(i.permissionsSelector,i.localeSelector,It,(function(e,t,n){var r,o;return null==e||null===(r=e.showBotBanner)||void 0===r||!r.text||n?"":(0,a.getGlobalConfigTranslatedText)(null==e||null===(o=e.showBotBanner)||void 0===o?void 0:o.text,t)})),wt=(0,c.createSelector)(U(a.ServeTodayTab.BUYER_TO_PAY),W,(function(e,t){var n=(0,i.sortConversations)(e.filter((function(e){return!(null!=e&&e[a.ServeTodayTab.BUYER_TO_PAY])}))),r=t.map((function(e){return n.find((function(t){return t.id===e}))})).filter(Boolean),o=n.filter((function(e){return!t.includes(e.id)}));return r.concat(o.filter((function(e){return void 0===e.faking})))})),Nt=(0,c.createSelector)(U(a.ServeTodayTab.INQUIRY_WITHOUT_ORDER),W,(function(e,t){var n=(0,i.sortConversations)(e.filter((function(e){return!(null!=e&&e[a.ServeTodayTab.INQUIRY_WITHOUT_ORDER])}))),r=t.map((function(e){return n.find((function(t){return t.id===e}))})).filter(Boolean),o=n.filter((function(e){return!t.includes(e.id)}));return r.concat(o.filter((function(e){return void 0===e.faking})))})),Mt=(0,c.createSelector)(E,Ae,wt,Nt,(function(t,n,r,o){var c,i=[],u=(e(c={},a.ServeTodayTab.BUYER_TO_PAY,r),e(c,a.ServeTodayTab.INQUIRY_WITHOUT_ORDER,o),c);return a.AllChatsFolders.forEach((function(e){var n=null==u?void 0:u[e];null!=n&&n.length&&(i=i.concat([{key:e,id:"".concat(e,"Tab")}]),t===e&&(i=i.concat(n)))})),i})),Lt=(0,c.createSelector)(Ee,C,Y,(function(e,t,n){return(null==n?void 0:n.key)===a.ServeTodayTab.ALL_BUYERS?e:t}));function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ut(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Gt(e){return function(){var t=Array.prototype.slice.call(arguments);return e.memoize=e.memoize||{},t in e.memoize?e.memoize[t]:e.memoize[t]=e.apply(this,t)}}var kt=a.MessageTypes.MSG_TYPE_OFFER,jt=a.MessageTypes.MSG_TYPE_ORDER,Ft=a.MessageTypes.MSG_TYPE_PRODUCT,Ht=a.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,Yt=a.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,Bt=a.MessageTypes.MSG_TYPE_RATE_CARD,Vt=a.MessageTypes.MSG_TYPE_FAQ_BOT_PRODUCT,Wt=[jt,Ft,Vt],Qt=(0,c.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),qt=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},zt=function(e){return(0,c.createSelector)(qt,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},Kt=function(e){return(0,c.createSelector)(qt,(function(t){return Object.keys(t).find((function(n){return t[n].vid===e}))}))},Xt=function(e){return(0,c.createSelector)(i.messageEntitiesSelector,(function(t){return(0,o.denormalize)(e,s.messageSchema,{messages:t})}))},Jt=(0,c.createSelector)(Z,Qt,(function(e,t){return t[e]||{all:[]}})),$t=function(e){return(0,c.createSelector)(Qt,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},Zt=Gt((function(e){return(0,c.createSelector)($t(e),We(e),i.messageEntitiesSelector,(function(e,t,n){return(0,i.getConversationLastMessage)(e,t,n)}))})),en=Gt((function(e){return(0,c.createSelector)($t(e),We(e),i.messageEntitiesSelector,(function(e,t,n){var r=(0,i.getConversationLastMessage)(e,t,n,!0);return null==r?void 0:r.id}))})),tn=Gt((function(e){return(0,c.createSelector)(We(e),i.isSubAccountSelector,(function(e,t){var n=e||{},r=n.status,o=n.to_status,c=n.is_blocked;return(0,a.getConversationStatusTag)({isSubAccount:t,status:r,userStatus:o,isBlocked:c})}))})),nn=Gt((function(e){return(0,c.createSelector)(We(e),i.isSubAccountSelector,(function(e,t){var n=e.dueTag,r=e.status,o=e.to_status,c=e.is_blocked,i=(0,a.getConversationStatusTag)({isSubAccount:t,status:r,userStatus:o,isBlocked:c});return n&&!["banned","blocked","frozen"].includes(i)?n:""}))})),rn=(0,c.createSelector)(Jt,(function(e){var t=r(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),on=(0,c.createSelector)(Jt,(function(e){return e.sending||[]})),cn=(0,c.createSelector)(Jt,(function(e){return e.failed||[]})),an=(0,c.createSelector)(i.messageEntitiesSelector,rn,(function(e,t){return((0,o.denormalize)(t,[s.messageSchema],{messages:e})||[]).filter(Boolean)})),un=(0,c.createSelector)(an,(function(e){return e.reverse()})),sn=(0,c.createSelector)(Pe,un,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var n=t.type,r=t.source_type,o=t.source_content,c=t.content;if(!r||n===kt||[-1,0].includes(o["".concat(r,"_id")]))return e;if(Wt.includes(n)&&o){var a="".concat(n,"_id");if(c[a]===o[a])return e}var i=e.lastSourceMessage,u=e.sourceList;if(!u.length)return{sourceList:u.concat(t),lastSourceMessage:t};if(r===Ft){var s=null==o?void 0:o.product_id,l=i.source_content&&i.source_content.product_id;if(!s||l===s)return e}else if(r===jt){var f=null==o?void 0:o.order_id,_=i.source_content&&i.source_content.order_id;if(!f||[-1,0,_].includes(f))return e}return{sourceList:u.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),ln=(0,c.createSelector)(sn,(function(e){return e.map((function(e){return e.id}))})),fn=(0,c.createSelector)(i.entitiesSelector,an,(function(e,t){var n=t.filter((function(e){return e&&e.type===kt})).map((function(e){return e.content.offer_id}));return(0,o.denormalize)(n,[s.offerSchema],e)})),_n=(0,c.createSelector)(un,ln,on,cn,Pe,i.rateCardEntitiesSelector,fn,(function(e,t,n,r,o,c,i){return o?e.filter((function(e){if(!e)return!1;var t=e.content,n=e.type;return!(![Ht,Yt].includes(n)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=n.includes(e.id)?a.MessageSendStatus.SENDING:r.includes(e.id)?a.MessageSendStatus.FAILED:e.send_status||null,u=t.includes(e.id),s=Object.assign({},e,{send_status:o,hasMessageSource:u}),l=s,f=l.type,_=l.content,d=void 0===_?{}:_,p=l.message_option;switch(f){case kt:var S=i.find((function(e){return e&&e.id===d.offer_id}));s=Object.assign({},s,{textContent:S});break;case Bt:var E=c[d.card_id];E&&(s=Object.assign({},s,{textContent:E}))}return(0,a.hasTargetMessageOption)(p,a.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(s=xt(xt({},s),{},{send_status:a.MessageSendStatus.FAILED,errorCode:a.MessageErrorCode.BLACKLIST})),s})):[]})),dn=(0,c.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),pn=(0,c.createSelector)(Z,dn,(function(e,t){return t[e]||""})),Sn=(0,c.createSelector)(pn,i.messageEntitiesSelector,(function(e,t){return(0,o.denormalize)(e,s.messageSchema,{messages:t})})),En=(0,c.createSelector)(_n,Pe,(function(e,t){for(var n="",r=e.length-1;r>=0;r--){var o=e[r];if(!(0,a.getMessageIsSend)(o,t)){n=o.id;break}}return n})),vn=(0,c.createSelector)(Z,(function(e){var t;return(null===(t=e.mediaPreviewerReducer)||void 0===t?void 0:t.mediaMap)||{}}),(function(e,t){return t[e]||[]})),Tn=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.feedback)||void 0},hn=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.reconnectFlag)||!1},gn=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.noticesCount)||0}}(),u}())},66633:function(e,t,n){"use strict";e.exports=n(55698)},88377:function(e,t,n){var r,o,c,a,i,u,s,l,f,_,d,p;e.exports=(r=n(34857),o=n(20573),c=n(29494),a=n(96961),i=n(6678),u=n(82677),s=n(38104),l=n(58518),f=n(44900),_=n(36808),d=n(55036),p=n(86843),function(){"use strict";var e={701:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(661),o=n.n(r),c=o().t.bind(o())},661:function(e){e.exports=l},598:function(e){e.exports=_},383:function(e){e.exports=u},156:function(e){e.exports=p},756:function(e){e.exports=d},252:function(e){e.exports=i},944:function(e){e.exports=r},975:function(e){e.exports=o},783:function(e){e.exports=s},644:function(e){e.exports=a},855:function(e){e.exports=c},672:function(e){e.exports=f}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var S={};return function(){n.r(S),n.d(S,{addNeedCaptchaRequest:function(){return qo},affiliateEntitiesSelector:function(){return i},agentConversationEntitiesSelector:function(){return s},allMessageShortcutGroupsSelector:function(){return Nr},allTotalConversationsCountMapSelector:function(){return Xe},allTotalConversationsCountSelector:function(){return Ke},authorizedShopsCountSelector:function(){return Ue},autoTranslation:function(){return Wr},batchRemoveDraftHandler:function(){return ot},batchUpdateRecord:function(){return F},buyerIsFrozenSelector:function(){return Qe},captchaSignatureSelector:function(){return ae},captchaVerifyReducer:function(){return oc},captchaVisibleSelector:function(){return ce},chatWithTypeListSelector:function(){return qe},checkUserPermissionSaga:function(){return Yn},checkUserPermissionSucceeded:function(){return jn},clearNeedCaptchaRequest:function(){return Ko},clearReportRequested:function(){return Io},contactsEntitiesSelector:function(){return h},conversationEntitiesSelector:function(){return u},conversationsLengthLevelSelector:function(){return g},copySucceedFeedback:function(){return lr},curTabFocusedSelector:function(){return Ae},currentAllMessageShortcutsSelector:function(){return kr},currentGroupIdSelector:function(){return wr},currentGroupTypeSelector:function(){return Dr},currentMessageShortcutGroupsSelector:function(){return Ur},currentUserDistributionStatusSelector:function(){return be},currentUserIdSelector:function(){return Z},currentUserIsSellerSelector:function(){return Ge},currentUserRoleSelector:function(){return Re},currentUserSelector:function(){return fe},currentUserShopIdSelector:function(){return me},currentUserShopSelector:function(){return Oe},deepUpdateRecord:function(){return H},defaultCount:function(){return ze},deleteCaptchaRequest:function(){return zo},deleteConversationSucceedHandler:function(){return et},deleteRecord:function(){return j},displayCBCBannerSelector:function(){return Kr},distributionAccountStatusSelector:function(){return zr},draftHashSelector:function(){return fo},entitiesSelector:function(){return c},entityReducer:function(){return q},fetchSettings:function(){return Jr},fetchSettingsStatusSelector:function(){return So},fetchShopAuth:function(){return rr},fetchShopsByIds:function(){return nr},fetchedShopIdsSelector:function(){return Jn},firstClickEntrySelector:function(){return Le},forceLogoutRequested:function(){return cn},forwardGroupMembersSelector:function(){return R},forwardGroupsEntitiesSelector:function(){return O},getConversationLastMessage:function(){return Rt},getDraft:function(){return _o},getShopUnreadCountByIds:function(){return er},getTimestamp:function(){return pt},getToastInformation:function(){return ur},handle401ErrorRequested:function(){return oo},handleLoginSucceededLogic:function(){return pn},handleMessageSubscribe:function(){return ut},hasFetchedUnreadSelector:function(){return Ne},hasSidebarPanelSelector:function(){return Me},hasVerifyPhoneNumberNormalSellerSelector:function(){return ke},hasVerifyPhoneNumberSelector:function(){return Fe},hasVerifyPhoneNumberSubaccountSelector:function(){return je},includeDirectShopSelector:function(){return he},isCBSellerSelector:function(){return Ee},isCBSubAccountSelector:function(){return ge},isMainPageSelector:function(){return ye},isSubAccountSelector:function(){return de},judgeUndefined:function(){return St},legacyMessageShortcutsCountSelector:function(){return qr},loadingSelector:function(){return $},localeSelector:function(){return _e},login:function(){return Sn},loginRequested:function(){return tn},loginSucceeded:function(){return nn},loginSuccessSelector:function(){return De},logout:function(){return Wn},logoutHandler:function(){return Vn},logoutRequested:function(){return rn},logoutSucceeded:function(){return on},messageEntitiesSelector:function(){return l},messageShortcutGroupEntitiesSelector:function(){return E},messageShortcutGroupHttpStatusSelector:function(){return Ir},messageShortcutGroupSelector:function(){return Pr},messageShortcutsSelector:function(){return Fr},messageShortcutsStatusSelector:function(){return Qr},messagesLengthLevelSelector:function(){return m},networkStatusSelector:function(){return ee},newChatEntranceSelector:function(){return pe},newMessageFlagSelector:function(){return se},newbieSelector:function(){return ue},notificationTypes:function(){return bt},offerSelector:function(){return so},offersSelector:function(){return io},openMallUrl:function(){return eo},openMallUrlSaga:function(){return no},orderEntitiesSelector:function(){return _},ordersSelector:function(){return bo},permissionsSelector:function(){return ne},personalMessageShortcutGroupsSelector:function(){return Mr},personalMessageShortcutsSelector:function(){return xr},productEntitiesSelector:function(){return d},productsSelector:function(){return Ro},pureActionHandler:function(){return ft},pureMergeActionHandler:function(){return _t},rateCardEntitiesSelector:function(){return v},reduxReset:function(){return lo},relatedOfferIdsSelector:function(){return uo},removeSingleDraftHandler:function(){return rt},reportArraySelector:function(){return yo},reportMessageApiTimer:function(){return vt},reportReducer:function(){return Ho},reportRequested:function(){return Po},resendMessagePayloadSelector:function(){return ie},resendNeedCaptchaRequest:function(){return Xo},responseStatusSelector:function(){return te},saveDraftHandler:function(){return ct},serviceDownAlertSelector:function(){return Ye},serviceDownClosedSelector:function(){return Be},serviceDownListSelector:function(){return Ve},serviceDownMessageSelector:function(){return We},setServiceDownStatus:function(){return Mn},setToastInformation:function(){return fr},setToastInformationSaga:function(){return Sr},settingsFetchStatusSelector:function(){return Vr},settingsNeedForceUpdateSelectors:function(){return Yr},settingsSelector:function(){return Hr},settingsStatusSelector:function(){return Br},shopSelector:function(){return Xn},shopStatisticsMapSelector:function(){return ve},shopStatisticsSelector:function(){return Te},shopTranslationSettingsSelector:function(){return po},shopsEntitiesSelector:function(){return T},shopsUnreadConversationCountSelector:function(){return z},showAutoHangupModalSelector:function(){return xe},showChatWindowSelector:function(){return Ie},showConversationDetailSelector:function(){return Pe},showEntrySelector:function(){return we},showNewWelcomePageSelector:function(){return oe},showOriginalMessagesMapSelector:function(){return ic},showServingTodayTabSelector:function(){return re},showShop:function(){return tr},sortConversations:function(){return dt},sortedAllMessageShortcutsSelector:function(){return jr},stickerEntitiesSelector:function(){return f},takeEveryWithCancel:function(){return dc},teamMessageShortcutGroupsSelector:function(){return Lr},teamMessageShortcutsSelector:function(){return Gr},textBoxHeightSelector:function(){return Ce},timerHandler:function(){return Lo},toastReducer:function(){return yr},toastSelector:function(){return ar},totalUnreadConversationsCountSelector:function(){return K},unreadCountActions:function(){return X},updateChatEntryStatus:function(){return Ut},updateChatWindowStatus:function(){return Nt},updateConversationDetailStatus:function(){return Mt},updateConversationListsHash:function(){return co},updateCurTabFocused:function(){return bn},updateCurTabFocusedSaga:function(){return An},updateCurTabFocusedSucceeded:function(){return yn},updateEntities:function(){return G},updateHasFetchedUnread:function(){return xt},updateHasSidebarPanel:function(){return Gt},updateIsMainPage:function(){return Rn},updateLoginSuccessStatus:function(){return Lt},updateNetworkStatus:function(){return It},updateOrReplaceAction:function(){return go},updatePermissions:function(){return Fn},updateRecord:function(){return k},updateShowAutoHangupModal:function(){return Dt},updateStatusSelector:function(){return Eo},updateUseNewChatEntrance:function(){return wt},useElementWatcher:function(){return fc},useNewChatEntranceSelector:function(){return Se},usePermission:function(){return sc},userEntitiesSelector:function(){return a},userReducer:function(){return Kn},userSelector:function(){return le},verifyRequestsSelector:function(){return ac},voucherEntitiesSelector:function(){return p},watchHandleUrlSagas:function(){return ao},watchLogin:function(){return En},watchReportSagas:function(){return Fo},watchTab:function(){return Cn},watchToastSagas:function(){return br},watchUserSagas:function(){return zn},watchVerifySagas:function(){return cc}});var e=n(944),t=n(975),r=n(855),o=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},c=function(e){return e.entityReducer},a=(0,t.createSelector)(c,(function(e){return e.users})),i=(0,t.createSelector)(c,(function(e){return e.affiliate})),u=(0,t.createSelector)(c,(function(e){return e.conversations})),s=(0,t.createSelector)(c,(function(e){return e.agentConversations})),l=(0,t.createSelector)(c,(function(e){return function(e){return(0,r.checkEmptyObject)(e)?{}:e}(e.messages)})),f=(0,t.createSelector)(c,(function(e){return e.stickers})),_=(0,t.createSelector)(c,(function(e){return e.orders})),d=(0,t.createSelector)(c,(function(e){return e.products})),p=(0,t.createSelector)(c,(function(e){return e.vouchers})),E=(0,t.createSelector)(c,(function(e){return e.messageShortcutsGroups})),v=(0,t.createSelector)(c,(function(e){return e.rateCards})),T=(0,t.createSelector)(c,(function(e){return e.shops})),h=(0,t.createSelector)(c,(function(e){return e.contacts})),g=(0,t.createSelector)(u,s,(function(e,t){var n=Object.keys(e).length+Object.keys(t).length;return o(n)})),m=(0,t.createSelector)(l,(function(e){return o(Object.keys(e).length)})),O=(0,t.createSelector)(c,(function(e){return e.groups})),R=(0,t.createSelector)(c,(function(e){return e.groupMembers}));function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return c}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P,I=n(644);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD",e.DEEP_UPDATE_RECORD="DEEP_UPDATE_RECORD"}(P||(P={}));var N,M,L=b({},P.UPDATE_ENTITIES,(function(e,t){var n=t.payload.entities;return Object.entries(n).reduce((function(e,t){var n=C(t,2),r=n[0],o=n[1];return"persist"!==r?("shops"===r&&I.shopService.updateShopMap(o),w(w({},e),{},b({},r,w(w({},e[r]),o)))):w(w({},e),{},b({},r,o))}),e)})),U=n(252),x=(0,U.createActions)((b(N={},P.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),b(N,P.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),b(N,P.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),b(N,P.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),b(N,P.DEEP_UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),N)),G=x.updateEntities,k=x.updateRecord,j=x.deleteRecord,F=x.batchUpdateRecord,H=x.deepUpdateRecord;function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=(b(M={},P.UPDATE_RECORD,(function(e,t){var n=t.payload,r=n.name,o=n.id,c=n.record;return B(B({},e),{},b({},r,B(B({},e[r]),{},b({},o,B(B({},e[r][o]),c)))))})),b(M,P.DELETE_RECORD,(function(e,t){var n=t.payload,r=n.name,o=n.id,c=e[r];return delete c[o],B(B({},e),{},b({},r,c))})),b(M,P.BATCH_UPDATE_RECORD,(function(e,t){var n=t.payload,r=n.name,o=n.records,c=n.checkProp,a=B({},e[r]);return Object.keys(o).forEach((function(e){(!c||c&&o[e][c]>a[e][c])&&(a[e]=B(B({},a[e]),o[e]))})),B(B({},e),{},b({},r,a))})),b(M,P.DEEP_UPDATE_RECORD,(function(e,t){var n=t.payload,r=n.name,o=n.id,c=n.record,a=Object.keys(c),i={},u=B({},e[r][o]);return a.forEach((function(e){i[e]=B(B({},u[e]),c[e])})),B(B({},e),{},b({},r,B(B({},e[r]),{},b({},o,B(B({},e[r][o]),i)))))})),M);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=(0,U.handleActions)(Q(Q({},L),V),{users:{},affiliate:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},persist:null,vouchers:{},messageShortcuts:{}}),z=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.shopsUnreadConversationCount)||0},K=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.totalUnreadConversationsCount)||0},X={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount",ADD_FOLLOW_UP_CONVERSATION:"addFollowUpConversation",REMOVE_FOLLOW_UP_CONVERSATION:"removeFollowUpConversation"},J=n(383),$=function(e){return e.userReducer.loading},Z=function(e){return e.userReducer.currentUserId},ee=function(e){return e.userReducer.networkStatus},te=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.responseStatus)||!1},ne=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.permissions)||{}},re=(0,t.createSelector)(ne,(function(e){var t=e||{},n=t.showChatServingFeature,r=t.onboardingWhitelist;return n||r})),oe=(0,t.createSelector)(ne,(function(e){var t=e||{},n=t.hitChatbotWhitelist,r=t.chatbotToggleOpen;return n&&!r})),ce=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.captchaVisible)||!1},ae=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.captchaSignature)||""},ie=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.resendMessagePayload)||void 0},ue=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.newbie)||[]},se=function(e){return e.userReducer.newMessageFlag},le=function(e){return(0,t.createSelector)(c,(function(t){return(0,J.denormalize)(e,I.userSchema,{users:t})}))},fe=(0,t.createSelector)(a,Z,(function(e,t){return(0,J.denormalize)(t,I.userSchema,{users:e})||{}})),_e=(0,t.createSelector)(fe,(function(e){return e&&e.locale})),de=(0,t.createSelector)(fe,(function(e){return!(0,r.checkEmptyObject)(e)&&e.type===r.AccountType.SUBACCOUNT})),pe=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.useNewChatEntrance)||!1},Se=(0,t.createSelector)(de,pe,(function(e,t){return!e&&t})),Ee=(0,t.createSelector)(fe,(function(e){return!(0,r.checkEmptyObject)(e)&&e.is_cb})),ve=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.shopStatisticsMap)||{}},Te=function(e,n){return(0,t.createSelector)(ve,(function(t){return t["".concat(e,"-").concat(n)]||{}}))},he=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.includesDirectShop)||!1},ge=(0,t.createSelector)(de,Ee,he,(function(e,t,n){return e&&(t||n)})),me=(0,t.createSelector)(fe,de,(function(){return(arguments.length>1?arguments[1]:void 0)?void 0:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shop_id})),Oe=(0,t.createSelector)(fe,de,T,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;return(arguments.length>1?arguments[1]:void 0)?void 0:(0,J.denormalize)(e.shop_id,I.shopSchema,{shops:t})||{}})),Re=(0,t.createSelector)(fe,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).role||""})),be=(0,t.createSelector)(fe,(function(e){return e&&e.distribution_status||""})),ye=function(e){return e.userReducer.isMainPage},Ae=function(e){return e.userReducer.curTabFocused},Ce=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.textBoxHeight)||0},Pe=function(e){return e.userReducer.showConversationDetail},Ie=function(e){return e.userReducer.showChatWindow},De=function(e){return e.userReducer.loginSuccess},we=function(e){return e.userReducer.showEntry},Ne=function(e){return e.userReducer.hasFetchedUnread},Me=function(e){return e.userReducer.hasSidebarPanel},Le=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.firstClickEntry)||!1},Ue=(0,t.createSelector)(fe,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).authorizedShopsCount||0})),xe=function(e){return e.userReducer.showAutoHangupModal},Ge=(0,t.createSelector)(fe,de,(function(){return!!(arguments.length>1?arguments[1]:void 0)||(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).is_seller})),ke=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.hasVerifyPhoneNumber)||!1},je=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.hasVerifyPhoneNumberMap)||{}},Fe=(0,t.createSelector)(de,ke,je,(function(e,t,n){return e?n:t})),He=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.serviceDownStatus)||{}},Ye=(0,t.createSelector)(He,(function(e){return e.alert||!1})),Be=(0,t.createSelector)(He,(function(e){return e.closed||!1})),Ve=(0,t.createSelector)(He,(function(e){return e.list||!1})),We=(0,t.createSelector)(He,(function(e){return e.message||!1})),Qe=function(e,n,r){return(0,t.createSelector)(Te(e,n),(function(e){return"frozen"===r&&"boolean"==typeof e.exist_pending_order&&!e.exist_pending_order}))},qe=(0,t.createSelector)(ne,(function(e){var t=[r.ChatWithTypeEnum.Buyer],n=e||{},o=n.sellerDriverWhitelist,c=n.amsToggleStatus;return o&&t.push(r.ChatWithTypeEnum.Driver),c&&t.push(r.ChatWithTypeEnum.Affiliate),t})),ze={unrepliedCount:0,duesoonCount:0,overdueCount:0,pinnedCount:0,unreadCount:0,serveTodayUnrepliedCount:0,serveTodayDuesoonCount:0,serveTodayOverdueCount:0,serveTodayPinnedCount:0,serveTodayBotRepliedCount:0,serveTodayManualRepliedCount:0},Ke=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.allTotalConversationsCount)||{}},Xe=(0,t.createSelector)(qe,Ke,(function(e,t){return e.reduce((function(e,n){var r,o,c=(null===(r=t["with_".concat(n,"_attribute")])||void 0===r?void 0:r.attributes)||{},a=(null===(o=t["with_".concat(n,"_attribute")])||void 0===o?void 0:o.serving_today_attributions)||{},i={unrepliedCount:c.total_unreplied_conv_count,duesoonCount:c.total_due_soon_conv_count,overdueCount:c.total_over_due_conv_count,pinnedCount:c.total_pinned_conv_count,unreadCount:c.total_unread_conv_count,serveTodayUnrepliedCount:a.total_unreplied_conv_count,serveTodayDuesoonCount:a.total_due_soon_conv_count,serveTodayOverdueCount:a.total_over_due_conv_count,serveTodayPinnedCount:a.total_pinned_conv_count,serveTodayBotRepliedCount:a.total_bot_replied_count,serveTodayManualRepliedCount:a.total_manual_replied_count,serveTodayUnreadCount:a.total_unread_conv_count,inquiryWithoutOrderConvCount:a.total_inquiry_without_order_conv_count,toPayConvCount:a.total_to_pay_conv_count};return e[n]=i||ze,e}),{})}));function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=function(e,t){var n=new Set(t);return n.delete(e),Array.from(n)},et=function(e,t){var n=t.payload.conversationId,r=$e($e({},e.conversationIdsMap),{},b({},n,!1)),o=Ze(n,e.conversationIds),c=Ze(n,e.pinnedConversationIds),a=e.currentConversationId;return $e($e({},e),{},{currentConversationId:a===n?null:a,conversationIds:o,pinnedConversationIds:c,conversationIdsMap:r})};function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt=function(e,t){var n=t.payload.conversationId,r=nt({},e.draftHash);return delete r[n],nt(nt({},e),{},{draftHash:r})},ot=function(e,t){var n=t.payload.conversationIds,r=void 0===n?[]:n,o=nt({},e.draftHash);return r.forEach((function(e){delete o[e]})),nt(nt({},e),{},{draftHash:o})},ct=function(e,t){var n=t.payload,r=n.conversationId,o=n.draft,c=nt({},e.draftHash);return c[r]=o,nt(nt({},e),{},{draftHash:c})},at=n(783),it=regeneratorRuntime.mark(ut);function ut(t){var n,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=t.payload,o=t.type,c.next=3,(0,e.spawn)(vt,n.request_id);case 3:if(o!==r.ConversationTypeEnum.Agent){c.next=8;break}return c.next=6,(0,e.put)((0,at.receiveAgentMessageRequested)({message:n}));case 6:c.next=10;break;case 8:return c.next=10,(0,e.put)((0,at.receiveMessageRequested)({message:n}));case 10:case"end":return c.stop()}}),it)}function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=function(){return function(e,t){var n=t.payload;return lt(lt({},e),n)}},_t=function(e){return function(t,n){var r=n.payload;return lt(lt({},t),{},b({},e,lt(lt({},t[e]),r)))}},dt=function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),e},pt=function(e,t){var n=e.last_message_time_nano,r=e.next_timestamp_nano;return t&&!r&&(r=t.next_message_time_nano),{nextTimestampNano:r,oldestTimestampNano:r,latestTimestampNano:n}},St=function(e){var t=e.defaultValue,n=e.value;return void 0===n?t:n},Et=regeneratorRuntime.mark(vt);function vt(e){var t,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,r.getItem)(e);case 2:(t=o.sent)&&(null==(n=(0,I.getReportManager)())||n.reportMessageSocket(t),(0,r.removeItem)(e));case 4:case"end":return o.stop()}}),Et)}var Tt,ht,gt,mt=n(701).t,Ot=r.MessageTypes.MSG_TYPE_TEXT,Rt=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=e.all||[],a=e.sending||[],i=e.failed||[],u=c.length,s=null;if(u){for(var l=0,f=null;l<u&&!f;){var _,d=e.all[l];(f=(0,J.denormalize)(d,I.messageSchema,{messages:n}))&&(f.type===r.MessageTypes.MSG_TYPE_SECURITY_TIPS||f.isFaking)&&(f=null),o&&!r.ManualMessageSource.includes(null===(_=f)||void 0===_?void 0:_.source)&&(f=null),l++}f&&f.created_timestamp>Math.floor(t.last_message_time_nano/Math.pow(10,9))&&(s=(0,r.fillMessagePreview)(f))}if(!s){var p=t.latest_message_id,S=t.latest_message_content,E=t.latest_message_type,v=t.last_message_option,T=t.latest_message_source,h=t.last_message_time_nano;(s={id:p,content:S,type:E,message_option:v,source:T,to_shop_id:t.latest_message_to_shop_id,label_info:t.label_info}).created_at=new Date(h/1e6)+""}var g=s,m=g.id,O=g.message_option,R=a.includes(m)?r.MessageSendStatus.SENDING:i.includes(m)?r.MessageSendStatus.FAILED:s.send_status?r.MessageSendStatus.SUCCEED:null;return(0,r.hasTargetMessageOption)(O,r.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(R=r.MessageSendStatus.FAILED,s.type=Ot,s.content={text:mt("common.blacklist.replaced_text")}),(0,r.hasTargetMessageOption)(O,r.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(R=r.MessageSendStatus.FAILED),s.send_status=R,s},bt={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation",CTT_UPDATE:"ctt_update",HAVE_UNRATED_CSAT:"have_unrated_csat",FAQ_SELLER_UNREAD_STATUS_UPDATE:"faq_seller_unread_status_update",CHAT_UPDATE_MSG_STATUS:"chat_update_msg_status",NEW_MSG_BOX:"new_msg_box",DEL_MSG_BOX:"del_msg_box",ADD_FOLLOW_UP:"add_follow_up",REMOVE_FOLLOW_UP:"remove_follow_up"};function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.UPDATE_HAS_FETCHED_UNREAD="UPDATE_HAS_FETCHED_UNREAD",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.SET_SERVICE_DOWN_STATUS="SET_SERVICE_DOWN_STATUS",e.UPDATE_HAS_SIDEBAR_PANEL="UPDATE_HAS_SIDEBAR_PANEL",e.UPDATE_USE_NEW_CHAT_ENTRANCE="UPDATE_USE_NEW_CHAT_ENTRANCE",e.UPDATE_PERMISSIONS="UPDATE_PERMISSIONS"}(Tt||(Tt={}));var Ct,Pt=(0,U.createActions)((b(ht={},Tt.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),b(ht,Tt.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),b(ht,Tt.UPDATE_USE_NEW_CHAT_ENTRANCE,(function(e){return{useNewChatEntrance:e.useNewChatEntrance}})),b(ht,Tt.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{showChatWindow:e.showChatWindow}})),b(ht,Tt.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){return{showConversationDetail:e.showConversationDetail}})),b(ht,Tt.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),b(ht,Tt.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),b(ht,Tt.UPDATE_HAS_FETCHED_UNREAD,(function(e){return{hasFetchedUnread:e.hasFetchedUnread}})),b(ht,Tt.UPDATE_HAS_SIDEBAR_PANEL,(function(e){return{hasSidebarPanel:e.hasSidebarPanel}})),ht)),It=Pt.updateNetworkStatus,Dt=Pt.updateShowAutoHangupModal,wt=Pt.updateUseNewChatEntrance,Nt=Pt.updateChatWindowStatus,Mt=Pt.updateConversationDetailStatus,Lt=Pt.updateLoginSuccessStatus,Ut=Pt.updateChatEntryStatus,xt=Pt.updateHasFetchedUnread,Gt=Pt.updateHasSidebarPanel,kt=(b(gt={},Tt.UPDATE_NETWORK_STATUS,ft()),b(gt,Tt.UPDATE_SHOW_AUTO_HANGUP_MODAL,ft()),b(gt,Tt.UPDATE_USE_NEW_CHAT_ENTRANCE,ft()),b(gt,Tt.UPDATE_CHAT_WINDOW_STATUS,(function(e,t){var n=t.payload.showChatWindow,r={};return!n||null!=e&&e.firstClickEntry||(r.firstClickEntry=!0),At(At({},e),{},{showChatWindow:n},r)})),b(gt,Tt.UPDATE_CONVERSATION_DETAIL_STATUS,ft()),b(gt,Tt.UPDATE_LOGIN_SUCCESS_STATUS,ft()),b(gt,Tt.UPDATE_CHAT_ENTRY_STATUS,ft()),b(gt,Tt.UPDATE_HAS_FETCHED_UNREAD,ft()),b(gt,Tt.UPDATE_HAS_SIDEBAR_PANEL,ft()),gt),jt=n(672),Ft=n(598),Ht=n.n(Ft);!function(e){e[e.Disable=0]="Disable",e[e.Waiting=1]="Waiting",e[e.Up=2]="Up",e[e.Down=3]="Down"}(Ct||(Ct={}));var Yt,Bt,Vt=function(e){var t=e.messageId,n=e.feedback,r=e.conversationId,o=e.tagIds,c=e.reasonIds,a=e.otherReasons,i=e.bizId;return new Promise((function(e,u){(0,I.fetch)({suffix:"feedback",resource:"messages",method:"POST",payload:JSON.stringify({msg_id:t,feedback:n,conversation_id:r,tag_ids:o,reason_ids:c,other_reason:a,biz_id:i})}).then((function(){e()})).catch((function(e){u(e)}))}))};function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qt=regeneratorRuntime.mark(an),zt=regeneratorRuntime.mark(un),Kt=regeneratorRuntime.mark(ln),Xt=regeneratorRuntime.mark(dn),Jt=regeneratorRuntime.mark(pn),$t=regeneratorRuntime.mark(Sn),Zt=regeneratorRuntime.mark(En),en=(0,U.createActions)((b(Yt={},Tt.LOGIN_REQUESTED,(function(){return{}})),b(Yt,Tt.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),b(Yt,Tt.LOGOUT_REQUESTED,(function(){return{}})),b(Yt,Tt.LOGOUT_SUCCEEDED,(function(){return{}})),b(Yt,Tt.FORCE_LOGOUT_REQUESTED,(function(){return{}})),Yt)),tn=en.loginRequested,nn=en.loginSucceeded,rn=en.logoutRequested,on=en.logoutSucceeded,cn=en.forceLogoutRequested;function an(){var t,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=(0,r.getTranslationLocale)((0,r.getRuntimeLocale)()),o.next=3,(0,e.call)(I.getTranslation,{locale:t});case 3:return n=o.sent,o.next=6,(0,e.call)(r.changeLanguage,t,n);case 6:case"end":return o.stop()}}),qt)}function un(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),zt)}var sn=regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.call)(an);case 2:return t.next=4,(0,e.put)(Ut({showEntry:!0}));case 4:return t.next=6,(0,e.put)(Lt({loginSuccess:!1}));case 6:null==(r=(0,I.getReportManager)())||r.reportLoginFailed({type:(o=n,o instanceof I.InternalServerError?"InternalServerError":o instanceof I.Forbidden?"Forbidden":o instanceof I.Unauthoried?"Unauthoried":"Other")});case 8:case"end":return t.stop()}var o}),t)}));function ln(){var e,t,n,r,o,c,a,i,u,s,l;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:try{for(e=[],t=0,n=Object.entries(window.localStorage);t<n.length;t++)r=C(n[t],2),o=r[0],r[1],o.includes("MDAP_CONFIG_STORAGE_minichat_live_")&&(c=o.split("_")||[],a=c[c.length-1]||"",(i=a.split(".")||[]).length&&(u=i[0]?Number(i[0]):"",s=i[1]?Number(i[1]):"",l=i[2]?Number(i[2]):"",(u&&u<8||s&&s<5||5===s&&l&&l<6)&&e.push(o)));e.length&&e.forEach((function(e){window.localStorage.removeItem(e)}))}catch(e){console.log("删除MDAP发生错误")}case 2:case"end":return f.stop()}}),Kt)}var fn=function(e){var t,n,o=(0,I.getReportManager)(),c=window.__CHATEASY_TRANSLATION__;if(!(0,r.checkEmptyObject)(c)&&!(0,r.checkEmptyObject)(c.collection)){null==o||o.reportFetchTranslationInHtml();var a={};Object.keys(c.collection).forEach((function(e){a=Object.assign(a,c.collection[e])})),t=a,n=window.__CHATEASY_LOCALE__}return{resources:t,translationLocale:n}},_n=regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,e.call)(I.getTranslation,{locale:n});case 3:o=t.sent,t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,(0,e.call)(I.getTranslation,{locale:(0,r.getTranslationLocale)((0,r.getRuntimeLocale)())});case 10:o=t.sent;case 11:if(!o){t.next=14;break}return t.next=14,(0,e.spawn)(r.setItem,"chat_translation",{resources:o,locale:n});case 14:return t.next=16,(0,e.call)(r.changeLanguage,n,o);case 16:return t.next=18,(0,e.call)(r.updateTimeLocale,n);case 18:case"end":return t.stop()}}),t,null,[[0,6]])}));function dn(t){var n,o,c,a,i,u,s,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=fn(),o=n.resources,c=n.translationLocale,a=(0,I.getReportManager)(),!o){t.next=11;break}return t.next=5,(0,e.call)(r.changeLanguage,c,o);case 5:return t.next=7,(0,e.call)(r.updateTimeLocale,c);case 7:return t.next=9,(0,e.spawn)(r.setItem,"chat_translation",{resources:o,locale:c});case 9:case 25:t.next=30;break;case 11:return i=(0,r.getMallTranslationLocale)(),null==a||a.reportFetchTranslationInService(),t.next=15,(0,e.call)(r.getItem,"chat_translation");case 15:if(u=t.sent,l=(s=u||{}).resources,f=s.locale,!l||f!==i){t.next=27;break}return null==a||a.reportFetchTranslationAsync(),t.next=21,(0,e.call)(r.changeLanguage,i,l);case 21:return t.next=23,(0,e.call)(r.updateTimeLocale,i);case 23:return t.next=25,(0,e.spawn)(_n,i);case 27:return null==a||a.reportFetchTranslationSync(),t.next=30,(0,e.call)(_n,i);case 30:case"end":return t.stop()}}),Xt)}function pn(t,n){var o,c,a,i,u,s,l,f,_,d;return regeneratorRuntime.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,o=n.godToken,c=t.user,a=t.show_chatbot_entrance,i=c.id,u=c.type,s=c.locale,l=c.distribution_status,f=u===r.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||f&&"working"===l&&(window.__WEBCHAT_LOGIN__=!0),p.next=8,(0,e.call)(dn,s||"en");case 8:return performance.mark("APP_RENDERING"),(0,I.collectLoadTask)(),(0,I.mdapConfig)(u),(0,I.configTrackerUser)(c),p.next=14,(0,e.put)(wt({useNewChatEntrance:a}));case 14:return p.next=16,(0,e.put)(It({networkStatus:"online"}));case 16:return window.addEventListener("online",(function(){jt.store.dispatch(It({networkStatus:"online"}))})),window.addEventListener("offline",(function(){jt.store.dispatch(It({networkStatus:"offline"}))})),window.addEventListener("message",(function(e){var t;if("captcha-modal"===(null===(t=e.data)||void 0===t?void 0:t.type)){var n,o,c,a;if(3===(null===(n=e.data)||void 0===n?void 0:n.status)){var i,u,s,l=null===(i=e.data)||void 0===i?void 0:i.AC_CERT_D;l&&(0,r.isVisitingCn)()&&Ht().set("AC_CERT_D",l,{secure:!0,domain:"".concat(window.location.host),expires:new Date((new Date).getTime()+6e4)}),jt.store.dispatch(Xo()),null===(u=(s=window).closeSFUCaptchaModal)||void 0===u||u.call(s)}1===(null===(o=e.data)||void 0===o?void 0:o.status)&&(jt.store.dispatch(zo()),null===(c=(a=window).closeSFUCaptchaModal)||void 0===c||c.call(a))}}),!1),p.next=21,(0,e.put)(Lt({loginSuccess:!0}));case 21:return p.next=23,(0,e.put)(Ut({showEntry:!0}));case 23:return _=(0,I.normalize)("users",c),d=_.entities,p.next=26,(0,e.put)(G({entities:d}));case 26:return p.next=28,(0,r.setItem)("mini-session",t);case 28:return p.next=30,(0,e.put)(nn({currentUserId:i}));case 30:return p.next=32,(0,e.call)(Yn);case 32:return p.next=34,(0,e.put)((0,at.emptyAction)());case 34:if(o){p.next=37;break}return p.next=37,(0,e.call)(at.startConnect);case 37:return p.next=39,(0,e.spawn)(un);case 39:if(f){p.next=42;break}return p.next=42,(0,e.call)(at.fetchShopSettings,{payload:{shopId:c.shop_id}});case 42:return p.next=44,(0,e.spawn)(ln);case 44:window.addExternalGlobal("submitMessageFeedback",Vt),p.next=51;break;case 47:return p.prev=47,p.t0=p.catch(0),p.next=51,(0,e.call)(sn,p.t0);case 51:return p.prev=51,p.finish(51);case 53:case"end":return p.stop()}}),Jt,null,[[0,47,51,53]])}function Sn(){var t,n,o,c,a,i,u;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,performance.mark("APP_PREPARED"),o={},c="",a=(0,I.getReportManager)(),!window.__WEBCHAT_SESSION__){s.next=10;break}null==a||a.reportLoginInHtml(),o=window.__WEBCHAT_SESSION__,s.next=19;break;case 10:return null==a||a.reportLoginInService(),i={method:"POST",subServer:"coreapi",resource:"login"},u=(0,r.isVisitingCNSC)()||(0,r.isVisitingKRSC)(),i.params={source:"pcmall"},u&&(i.parent="cbsc"),s.next=17,(0,e.call)(I.fetch,i);case 17:o=s.sent,window.__WEBCHAT_SESSION__=o;case 19:return performance.mark("LOGIN_API_RESPONSED"),r.LS.setItem("mini-session",JSON.stringify(o)),r.LS.setItem("chat-locale",JSON.stringify(null===(t=o)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.locale)),s.abrupt("return",{session:o,params:{godToken:c}});case 25:return s.prev=25,s.t0=s.catch(0),s.next=29,(0,e.call)(sn,s.t0);case 29:return s.prev=29,s.finish(29);case 31:case"end":return s.stop()}}),$t,null,[[0,25,29,31]])}function En(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeLatest)(tn,Sn);case 2:return t.next=4,(0,e.takeLatest)(rn,Wn);case 4:return t.next=6,(0,e.takeLatest)(cn,Vn);case 6:case"end":return t.stop()}}),Zt)}var vn,Tn,hn=(b(Bt={},Tt.LOGIN_SUCCEEDED,ft()),b(Bt,Tt.LOGOUT_SUCCEEDED,(function(e){return Qt(Qt({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),Bt),gn=regeneratorRuntime.mark(An),mn=regeneratorRuntime.mark(Cn),On=(0,U.createActions)((b(vn={},Tt.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),b(vn,Tt.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),b(vn,Tt.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{curTabFocused:e.curTabFocused}})),vn)),Rn=On.updateIsMainPage,bn=On.updateCurTabFocused,yn=On.updateCurTabFocusedSucceeded;function An(t){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=t.payload.focused)){r.next=6;break}return r.next=4,(0,e.call)(at.tabFocused);case 4:return r.next=6,(0,e.put)(Rn({isMainPage:!0}));case 6:return r.next=8,(0,e.put)(yn({curTabFocused:n}));case 8:case"end":return r.stop()}}),gn)}function Cn(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(bn,An);case 2:case"end":return t.stop()}}),mn)}var Pn=(b(Tn={},Tt.UPDATE_IS_MAIN_PAGE,ft()),b(Tn,Tt.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,ft()),Tn);function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}var Dn=/_([a-z])/g;function wn(e){return e.includes("_")?e.replace(Dn,(function(e,t){return t.toUpperCase()})):e}function Nn(e){var t={};return Object.keys(e).forEach((function(n){var r=wn(n);!e[n]||"object"!==In(e[n])||Array.isArray(e[n])?t[r]=e[n]:t[r]=Nn(e[n])})),t}var Mn=(0,U.createActions)(b({},Tt.SET_SERVICE_DOWN_STATUS,(function(e){return e}))).setServiceDownStatus;window.addExternalGlobal("setServiceDownStatus",Mn);var Ln,Un,xn=b({},Tt.SET_SERVICE_DOWN_STATUS,_t("serviceDownStatus")),Gn=regeneratorRuntime.mark(Yn),kn=(0,U.createActions)((b(Ln={},Tt.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{responseStatus:e.responseStatus,permissions:e.permissions}})),b(Ln,Tt.UPDATE_PERMISSIONS,(function(e){return{permissions:e.permissions}})),Ln)),jn=kn.checkUserPermissionSucceeded,Fn=kn.updatePermissions,Hn=function(){try{return r.LS.getItem("minichat-service-down")||!1}catch(e){return!1}};function Yn(){var t,n,o,c,a,i,u,s,l,f,_,d,p,S,E,v,T,h;return regeneratorRuntime.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,e.select)(fe);case 2:return t=g.sent,n=t.type,o=t.country,g.prev=4,g.next=7,(0,e.call)(I.fetch,{subServer:"coreapi",parent:"user",resource:"global_config",params:{entry_point:"pc_mall"}});case 7:return c=g.sent,i=(a=c||{}).delete_msg,u=a.seller_buyer_split,s=void 0!==u&&u,l=a.sender_feedback_reason,f=void 0===l?{}:l,window.__SENDER_FEEDBACK_TIMEOUT__=null==f?void 0:f.feedback_timeout,(_=Nn(c)).shouldInitFSSDK="live"!==(0,r.getRuntimeServer)(),_.chatbotToggle=r.ChatbotToggle.Disable,["waitingTimeFilter","showChatServingFeature","sellerDriverWhitelist","amsToggleStatus","senderFeedbackBotMsg","showServingTab","rcmdWhitelist"].forEach((function(e){_[e]=!1})),window.addExternalGlobal("seller_buyer_split",s),"seller"===n&&(p=(d=i||{}).config_version,S=d.region_config,(E=(void 0===S?[]:S).find((function(e){return e.region===o})))&&E.duration&&(_.deleteMsg.configVersion=p,_.deleteMsg.canDelete=!0,_.deleteMsg.duration=E.duration)),g.next=19,(0,e.put)(jn({responseStatus:!0,permissions:_}));case 19:if(void 0===c.br_site_close){g.next=24;break}return g.next=22,(0,e.put)(Mn({alert:(null==c||null===(v=c.br_site_close)||void 0===v?void 0:v.site_close)||!1,closed:Hn()}));case 22:window.__SERVICEDOWN_STATT_TIME__=(null==c||null===(T=c.br_site_close)||void 0===T?void 0:T.start_time)||0,window.__SERVICEDOWN_END_TIME__=(null==c||null===(h=c.br_site_close)||void 0===h?void 0:h.end_time)||0;case 24:g.next=30;break;case 26:return g.prev=26,g.t0=g.catch(4),g.next=30,(0,e.put)(jn({responseStatus:!0,permissions:null}));case 30:case"end":return g.stop()}}),Gn,null,[[4,26]])}var Bn=(b(Un={},Tt.CHECK_USER_PERMISSION_SUCCEEDED,ft()),b(Un,Tt.UPDATE_PERMISSIONS,ft()),Un),Vn=regeneratorRuntime.mark((function t(){var n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.length>0&&void 0!==n[0]&&!n[0]){t.next=4;break}return t.next=4,(0,e.call)(at.closeConnect);case 4:return t.next=6,(0,e.put)(on());case 6:return t.next=8,(0,e.put)(lo());case 8:(0,r.removeItem)("mini-session"),(0,r.removeItem)("mini-sc_redirect");case 10:case"end":return t.stop()}}),t)})),Wn=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={server:(0,r.getSCApiServer)(),namespace:"",resource:"logout/",params:{SPC_CDS:Ht().get("SPC_CDS"),SPC_CDS_VER:2}},(0,r.isVisitingCNSC)()||(0,r.isVisitingKRSC)()?(n.version="cnsc",n.parent="selleraccount"):n.version="v1",t.next=5,(0,e.call)(I.fetch,n);case 5:return document.location.replace("https://".concat((0,r.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){jt.store.dispatch(It({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){jt.store.dispatch(It({networkStatus:"offline"}))})),(0,I.clearApiCache)(),t.next=11,(0,e.call)(Vn);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),t.t0.handler?(0,e.call)(t.t0.handler):console.error("[Logout Failed] ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}));function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zn=[En,Cn],Kn=(0,U.handleActions)(qn(qn(qn(qn(qn({},Pn),Bn),kt),hn),xn),{networkStatus:"online",currentUserId:null,currentUser:{},curTabFocused:!0,isMainPage:!0,subaccountHasUnrepliedPermission:!1,showAutoHangupModal:!1,hasVideoPermission:!1,hasReplyPermission:!1,shouldInitFSSDK:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,waitingTimeFilter:!1,showCrrDue:!1,hideFeedback:!1,showChatbotLoadingTime:0,disappearChatbotLoadingTime:0,textMaxInputLengh:600,loginSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1,hasFetchedUnread:!1,hasSidebarPanel:!1,firstClickEntry:!1,serviceDownStatus:{alert:!1,closed:!1,list:!1,message:!1},permissions:null}),Xn=function(e){return(0,t.createSelector)(T,(function(t){return(0,J.denormalize)(e,I.shopSchema,{shops:t})}))},Jn=function(e){var t;return(null==e||null===(t=e.shopReducer)||void 0===t?void 0:t.fetchedShopIds)||[]},$n=regeneratorRuntime.mark(tr),Zn=regeneratorRuntime.mark(rr),er=function(e){return new Promise((function(t){(0,I.fetch)({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var n=e["unread-counts"];t(void 0===n?[]:n)})).catch((function(){t([])}))}))};function tr(t){var n,r,o,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.payload.shopId,a.prev=1,a.next=4,(0,e.select)(Xn(n));case 4:return r=a.sent,a.next=7,(0,e.call)(I.fetch,{resource:"shop",id:n,params:{need_cache:1,cache_expires:600}});case 7:return r=a.sent,o=(0,I.normalize)("shops",r),c=o.entities,a.next=11,(0,e.put)(G({entities:c}));case 11:return a.next=13,(0,e.put)((0,at.updateFetchedShopIds)({shopIds:[r.id]}));case 13:return a.abrupt("return",r);case 16:return a.prev=16,a.t0=a.catch(1),a.abrupt("return",{});case 19:case"end":return a.stop()}}),$n,null,[[1,16]])}var nr=function(e){var t=e.shopIds,n={ids:JSON.stringify(t)};return new Promise((function(e){(0,I.fetch)({resource:"shop_list",params:n}).then((function(t){var n=t.shops;e(void 0===n?[]:n)})).catch((function(){e([])}))}))};function rr(t){var n,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=t.payload.shopId,o.prev=1,o.next=4,(0,e.call)(I.fetch,{parent:"shop",parentId:n,resource:"auth"});case 4:return r=o.sent,o.abrupt("return",r);case 8:return o.prev=8,o.t0=o.catch(1),o.abrupt("return",{});case 11:case"end":return o.stop()}}),Zn,null,[[1,8]])}var or,cr,ar=function(e){return e.toastReducer.toast},ir=n(701).t,ur=function(e,t){var n={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(n.message=ir("settings.enable_auto_reply_successfully"),n.show=!0):(n.message="",n.show=!1):(t.first&&"enabled"===t.action?n.message=ir("settings.failed_to_enable_auto_reply"):n.message="enabled"===t.action?ir("settings.failed_to_enable"):ir("settings.failed_to_disable"),n.show=!0);break;case"message":n.message=e?"save"===t.action?ir("settings.message.save_successfully"):"delete"===t.action?ir("settings.message.delete_successfully"):ir("settings.message.import_successfully"):"save"===t.action?ir("settings.message.failed_to_save"):"delete"===t.action?ir("settings.message.failed_to_delete"):ir("settings.message.failed_to_import"),n.show=!0;break;case"message-tips":e?(n.message="",n.show=!1):(n.message="enabled"===t.action?ir("settings.failed_to_enable"):ir("settings.failed_to_disable"),n.show=!0);break;case"forward":e||(n.message=403===t.status?ir("forward.exception",{forwardName:""}):ir("forward.server_error"),n.show=!0);break;case"send-feedback":n.message=ir("feedback_modal.error.failed_to_send"),n.show=!0;break;case"server-error-tips":n.message=ir("common.server_error.warning_tips"),n.show=!0;break;case"conversation-closed-tip":n.message=ir("conversation_detail.closed.warning_tips"),n.show=!0;break;case"permission-denied":n.message=ir("common.permission_denied"),n.show=!0;break;case"claim-voucher":n.message=ir(e?"voucher.claim.success":"voucher.claim.fail"),n.show=!0;break;case"claim-voucher-not-satisfy":n.message=ir("voucher.claim.fail_not_satisfy_rule"),n.show=!0;break;case"claim-voucher-already-claimed":n.message=ir("voucher.claim.fail_already_claimed"),n.show=!0;break;case"claim-voucher-no-longer-valid":n.message="claim_voucher.error.no_longer_valid",n.show=!0;break;case"claim-voucher-failed":n.message="claim_voucher.error.failed",n.show=!0;break;case"private-image":n.message=ir("common.image.expired"),n.show=!0;break;case"operation":"save"===t.action&&(n.message=ir(e?"text.save_successfully":"text.save_failed")),n.show=!0;break;default:n.message=t.message,n.show=!0}n.type=e?"success":"fail"}return n};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(or||(or={}));var sr=(0,U.createActions)((b(cr={},or.COPY_SUCCEED_FEEDBACK,(function(){return{}})),b(cr,or.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast,extra:e.extra}})),b(cr,or.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),cr)),lr=sr.copySucceedFeedback,fr=sr.setToastInformation,_r=sr.setToastInformationSucceeded,dr=regeneratorRuntime.mark(Sr),pr=regeneratorRuntime.mark(Er);function Sr(t){var n,r,o,c,a,i;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return n=t.payload,r=n.type,o=n.error,c=n.toast,a=n.extra,u.next=3,(0,e.select)(Pe);case 3:if(!u.sent){u.next=11;break}return i=null,r&&(i=ur(!1,{type:r})),void 0!==o&&(i=o instanceof I.CustomError||o instanceof I.Webview?o.handler(null==a?void 0:a.toShopId):ur(!1,{type:"server-error-tips"})),c&&(i=c),u.next=11,(0,e.put)(_r({toast:i}));case 11:case"end":return u.stop()}}),dr)}function Er(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(fr,Sr);case 2:case"end":return t.stop()}}),pr)}var vr=b({},or.SET_TOAST_INFORMATION_SUCCEEDED,ft()),Tr=n(701).t,hr=regeneratorRuntime.mark(mr),gr=regeneratorRuntime.mark(Or);function mr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.put)(fr({toast:ur(!0,{message:Tr("common.successful_copied")})}));case 2:case"end":return t.stop()}}),hr)}function Or(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(lr,mr);case 2:case"end":return t.stop()}}),gr)}function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var br=[Er,Or],yr=(0,U.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},vr),{toast:{type:"",message:"",show:!1}});function Ar(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Cr,Pr=function(e){return e.messageShortcutGroupReducer||{groups:[],status:"",currentGroupType:-1,currentGroupId:-1}},Ir=(0,t.createSelector)(Pr,(function(e){return e.status})),Dr=(0,t.createSelector)(Pr,(function(e){return e.currentGroupType})),wr=(0,t.createSelector)(Pr,(function(e){return e.currentGroupId})),Nr=(0,t.createSelector)(Pr,(function(e){return e.groups})),Mr=(0,t.createSelector)(Nr,(function(e){return e.filter((function(e){return e.group_type===r.MessageShortcutGroupType.PERSONAL}))})),Lr=(0,t.createSelector)(Nr,(function(e){return e.filter((function(e){return e.group_type===r.MessageShortcutGroupType.TEAM}))})),Ur=(0,t.createSelector)(Nr,Dr,(function(e,t){return-1===t?e:e.filter((function(e){return e.group_type===t}))})),xr=(0,t.createSelector)(Mr,(function(e){return e.reduce((function(e,t){var n=t.message_shortcuts,r=void 0===n?[]:n;return e.concat(r)}),[])})),Gr=(0,t.createSelector)(Lr,(function(e){return e.reduce((function(e,t){var n=t.message_shortcuts,r=void 0===n?[]:n;return e.concat(r)}),[])})),kr=(0,t.createSelector)(xr,Gr,(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Ar(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),Ar(e))})),jr=(0,t.createSelector)(kr,(function(e){var t=e.filter((function(e){return!(null==e||!e.pin_time)})).sort((function(e,t){return e.pin_time-t.pin_time})),n=e.filter((function(e){return!(null!=e&&e.pin_time)}));return[].concat(Ar(t),Ar(n))})),Fr=(0,t.createSelector)(jr,Dr,wr,(function(e,t,n){var r=-1===t?e:e.filter((function(e){return e.group_type===t}));return-1===n?r:r.filter((function(e){return e.groupId===n}))})),Hr=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.settings)||{}},Yr=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.needForceUpdate)||!1},Br=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.status)||""},Vr=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.fetchStatus)||""},Wr=(0,t.createSelector)(Hr,(function(e){return e.auto_translation_status||""})),Qr=(0,t.createSelector)(Hr,(function(e){return e.message_shortcuts_status||""})),qr=(0,t.createSelector)(Hr,(function(e){return e.legacy_message_shortcuts_count||0})),zr=(0,t.createSelector)(Hr,(function(e){return e.distribution_account_status||"enabled"})),Kr=(0,t.createSelector)(Hr,(function(e){return e.display_banner||!1})),Xr=regeneratorRuntime.mark(Jr);function Jr(){var t,n,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,e.put)((0,at.fetchSettingsStatus)({fetchStatus:r.DataFetchStatus.PENDING}));case 3:return t=Date.now(),c.next=6,(0,e.call)(I.fetch,{parent:"user",resource:"setting"});case 6:return n=c.sent,null==(o=(0,I.getReportManager)())||o.reportUserSettingApi(Date.now()-t),c.next=11,(0,e.put)((0,at.fetchSettingsSucceeded)({settings:n,fetchStatus:r.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 11:return c.abrupt("return",n);case 14:return c.prev=14,c.t0=c.catch(0),c.next=18,(0,e.put)((0,at.fetchSettingsStatus)({fetchStatus:r.DataFetchStatus.FAILED}));case 18:return c.abrupt("return",{});case 19:case"end":return c.stop()}}),Xr,null,[[0,14]])}!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH",e.OPEN_MALL_URL="OPEN_MALL_URL"}(Cr||(Cr={}));var $r=regeneratorRuntime.mark(no),Zr=regeneratorRuntime.mark(ro),eo=(0,U.createActions)(b({},Cr.OPEN_MALL_URL,(function(e){return{path:e.path,region:e.region,isAbsolute:e.isAbsolute}}))).openMallUrl,to="xiapibuy.com";function no(t){var n,o,c,a,i,u,s,l,f,_,d,p,S;return regeneratorRuntime.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(n=t.payload,o=n.path,c=void 0===o?"":o,a=n.region,i=void 0===a?"":a,void 0===(u=n.isAbsolute)||!u){E.next=4;break}return window.open(c),E.abrupt("return");case 4:if("cn"!==(s=i?i.toLowerCase():(0,r.getRuntimeRegion)())&&"kr"!==s||(s="my"),f=c?c.startsWith("/")?c:"/".concat(c):"",!(0,r.isVisitingCn)()){E.next=24;break}return E.prev=8,E.next=11,(0,e.call)(I.fetch,{url:"https://".concat((0,r.getSCApiServer)(),"/selleraccount/nonce/get/")});case 11:_=E.sent,d=_.data,p="".concat((0,r.cnDomainHash)(s),".").concat((0,r.envPrefix)()).concat(to),S=encodeURIComponent(window.btoa('{"next":"https://'.concat(p).concat(f,'"}'))),f="/api/seller_platform/nonce/callback/?nonce=".concat(d.nonce,"&region=").concat(s,"&state=").concat(S),l="https://".concat(p).concat(f),E.next=22;break;case 19:E.prev=19,E.t0=E.catch(8),l="https://".concat((0,r.cnDomainHash)(s),".").concat((0,r.envPrefix)()).concat(to).concat(f);case 22:E.next=25;break;case 24:l="https://".concat((0,r.domainPrefix)(),".").concat((0,r.domainSuffix)(s)).concat(f);case 25:window.open(l);case 26:case"end":return E.stop()}}),$r,null,[[8,19]])}function ro(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(eo,no);case 2:case"end":return t.stop()}}),Zr)}var oo=(0,U.createActions)(b({},Cr.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,co=(0,U.createActions)(b({},Cr.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash,ao=[ro],io=(0,t.createSelector)(c,(function(e){return e.offers||{}})),uo=function(e,n,o,c){return(0,t.createSelector)(io,(function(t){return Object.values(t).filter((function(t){return t.product_id===c&&t.model_id===n&&t.conversation_id===e&&t.id!==o&&t.status===r.OfferStatus.PENDING}))}))},so=function(e){return(0,t.createSelector)(c,(function(t){return(0,J.denormalize)(e,I.offerSchema,t)}))},lo=(0,U.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;window.addExternalGlobal("resetAction",lo);var fo=function(e){var t;return(null===(t=e.draftReducer)||void 0===t?void 0:t.draftHash)||{}},_o=function(e){return(0,t.createSelector)(fo,(function(t){return t[e]||""}))},po=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.translationSettings)||{}},So=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.fetchSettingsStatus)||""},Eo=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.updateStatus)||""},vo=regeneratorRuntime.mark(go);function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function go(t,n,r){var o,c,a,i,u=arguments;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=u.length>3&&void 0!==u[3]?u[3]:[],c=t,a=[],i=[],Array.isArray(t)&&(c=((0,I.normalize)(r,t).entities||{})[r]||{}),n.forEach((function(t){var n=t.id,u=c[n];u?["conversations","agentConversations"].includes(r)&&(void 0!==u.faking||u.latestMessageStatus||void 0!==u.unreplied)?(delete(t=ho(ho({},u),t)).faking,delete t.latestMessageStatus,delete t.unreplied,t.manual&&(delete t.manual,t.unreplied=!1),i.push(t)):(o.length&&o.forEach((function(e){t[e]=u[e]})),a.push((0,e.put)(k({name:r,id:n,record:ho({},t)})))):i.push(t)})),i.length&&a.push((0,e.put)(G({entities:(0,I.normalize)(r,i).entities}))),s.next=9,(0,e.all)(a);case 9:case"end":return s.stop()}}),vo)}var mo,Oo,Ro=function(e){return(0,t.createSelector)(d,(function(t){return(0,J.denormalize)(e,[I.productSchema],{products:t})}))},bo=function(e){return(0,t.createSelector)(_,(function(t){return(0,J.denormalize)(e,[I.orderSchema],{orders:t})}))},yo=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(mo||(mo={}));var Ao,Co=(0,U.createActions)((b(Oo={},mo.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),b(Oo,mo.CLEAR_REPORT_REQUESTED,(function(){return{}})),Oo)),Po=Co.reportRequested,Io=Co.clearReportRequested,Do=regeneratorRuntime.mark(Lo),wo=regeneratorRuntime.mark(Uo);function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lo(){var t,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,e.select)(yo);case 2:if(!(t=o.sent).length){o.next=10;break}return n=Ar(t),o.next=7,(0,e.put)(Io());case 7:return n.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),o.next=10,(0,e.call)(I.fetch,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(Mo(Mo({},n[0]),{},{platform_id:(0,r.isVisitingCNSC)()||(0,r.isVisitingKRSC)()?2:1}))});case 10:case"end":return o.stop()}}),Do)}function Uo(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,e.delay)(6e4);case 3:return t.next=5,Lo();case 5:t.next=0;break;case 7:case"end":return t.stop()}}),wo)}var xo=(b(Ao={},mo.REPORT_REQUESTED,(function(e,t){var n=t.payload,r=n.event_time,o=n.url;return{beingReported:[].concat(Ar(e.beingReported),[{event_time:r,url:o}])}})),b(Ao,mo.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),Ao);function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ko,jo,Fo=[Uo],Ho=(0,U.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},xo),{beingReported:[]});function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.ADD_NEED_CAPTCHA_REQUEST="ADD_NEED_CAPTCHA_REQUEST",e.DELETE_CAPTCHA_REQUEST="DELETE_CAPTCHA_REQUEST",e.CLEAR_NEED_CAPTCHA_REQUEST="CLEAR_NEED_CAPTCHA_REQUEST",e.RESEND_NEED_CAPTCHA_REQUEST="RESEND_NEED_CAPTCHA_REQUEST"}(ko||(ko={}));var Vo,Wo=(b(jo={},ko.ADD_NEED_CAPTCHA_REQUEST,(function(e,t){var n=t.payload.request,r=Ar(e.verifyRequests);return r.push(n),Bo(Bo({},e),{},{verifyRequests:r})})),b(jo,ko.DELETE_CAPTCHA_REQUEST,(function(e){var t=Ar(e.verifyRequests);return t.pop(),Bo(Bo({},e),{},{verifyRequests:t})})),b(jo,ko.CLEAR_NEED_CAPTCHA_REQUEST,(function(e){return Bo(Bo({},e),{},{verifyRequests:[]})})),jo),Qo=(0,U.createActions)((b(Vo={},ko.ADD_NEED_CAPTCHA_REQUEST,(function(e){return{request:e.request}})),b(Vo,ko.DELETE_CAPTCHA_REQUEST,(function(){return{}})),b(Vo,ko.CLEAR_NEED_CAPTCHA_REQUEST,(function(){return{}})),b(Vo,ko.RESEND_NEED_CAPTCHA_REQUEST,(function(){return{}})),Vo)),qo=Qo.addNeedCaptchaRequest,zo=Qo.deleteCaptchaRequest,Ko=Qo.clearNeedCaptchaRequest,Xo=Qo.resendNeedCaptchaRequest,Jo=regeneratorRuntime.mark(tc),$o=regeneratorRuntime.mark(nc);function Zo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ec(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw c}}}}function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tc(){var t,n,r,o,c,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,e.select)(ac);case 3:if(!(t=i.sent).length){i.next=47;break}return i.next=7,(0,e.put)(Ko());case 7:n=Zo(t),i.prev=8,n.s();case 10:if((r=n.n()).done){i.next=39;break}o=r.value,c=o.id,a=o.extra,i.t0=c,i.next="unread-count"===i.t0?16:"unread-count-single"===i.t0?19:"send-message"===i.t0?22:"orders_by_buyer"===i.t0||"purchased_list"===i.t0?25:"fill-handler"===i.t0?28:"top-banner"===i.t0?31:"item-list-my-shop"===i.t0||"item-list-other-shop"===i.t0?34:37;break;case 16:return i.next=18,(0,e.spawn)(at.doRefreshTotalUnreadConversationsCount,a);case 18:return i.abrupt("break",37);case 19:return i.next=21,(0,e.spawn)(doRefreshSingleShopUnreadConversationCount,a);case 21:return i.abrupt("break",37);case 22:return i.next=24,(0,e.put)((0,at.resendMessageRequested)(a));case 24:return i.abrupt("break",37);case 25:return i.next=27,(0,e.put)((0,at.fetchOrdersRequested)(a));case 27:return i.abrupt("break",37);case 28:return i.next=30,(0,e.call)(at.fillActionHandler,a);case 30:return i.abrupt("break",37);case 31:return i.next=33,(0,e.put)((0,at.fetchTopBannerInfo)(a));case 33:return i.abrupt("break",37);case 34:return i.next=36,(0,e.put)((0,at.fetchProductsRequested)(a));case 36:return i.abrupt("break",37);case 37:i.next=10;break;case 39:i.next=44;break;case 41:i.prev=41,i.t1=i.catch(8),n.e(i.t1);case 44:return i.prev=44,n.f(),i.finish(44);case 47:i.next=51;break;case 49:i.prev=49,i.t2=i.catch(0);case 51:case"end":return i.stop()}}),Jo,null,[[0,49],[8,41,44,47]])}function nc(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Xo,tc);case 2:case"end":return t.stop()}}),$o)}function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oc=(0,U.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Wo),{verifyRequests:[]}),cc=[nc],ac=function(e){return e.captchaVerifyReducer.verifyRequests},ic=function(e){var t;return(null===(t=e.translateReducer)||void 0===t?void 0:t.showOriginalMessages)||{}},uc=n(756),sc=function(){return(0,uc.useSelector)(ne)||{}},lc=n(156),fc=function(e){var t=C((0,lc.useState)(null),2),n=t[0],o=t[1];return(0,lc.useEffect)((function(){var t,n="tab_".concat(e),r=function(){var e=document.getElementById(n);e&&(o(e),t&&t.disconnect())};return document.getElementById(n)?r():(t=new MutationObserver(r)).observe(document.body,{childList:!0,subtree:!0}),function(){var e;return null===(e=t)||void 0===e?void 0:e.disconnect()}}),[e]),(0,r.isElementVisibleAtLeast)(n)},_c=regeneratorRuntime.mark(dc);function dc(t,n,r){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,e.takeEvery)(t,regeneratorRuntime.mark((function t(o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=o.payload.id){t.next=5;break}return t.next=4,(0,e.call)(n,o);case 4:return t.abrupt("return");case 5:return t.next=7,(0,e.race)({task:(0,e.call)(n,o),cancel:(0,e.take)((function(e){return e.type===r.toString()&&e.payload.id===c}))});case 7:case"end":return t.stop()}}),t)})));case 2:case"end":return o.stop()}}),_c)}}(),S}())},53402:function(e,t,n){"use strict";e.exports=n(88377)},20432:function(e,t,n){var r,o,c;e.exports=(r=n(94184),o=n(86843),c=n(39637),function(){var e={8288:function(e){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><g clip-path="url(#clip0_265_12873)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.126 16.187a.75.75 0 101.061-1.06L11.06 10l5.127-5.127a.75.75 0 00-1.06-1.06L10 8.939 4.873 3.813a.75.75 0 10-1.06 1.06L8.939 10l-5.126 5.127a.75.75 0 001.06 1.06L10 11.061l5.126 5.126z"></path></g><defs><clipPath><path d="M0 0h20v20H0z"></path></clipPath></defs></svg>'},2828:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" class="chat-icon"><path d="M7 0a7 7 0 110 14A7 7 0 017 0zm0 6.292L4.88 4.172a.5.5 0 00-.765.637l.058.07L6.292 7l-2.12 2.121a.5.5 0 00.637.765l.07-.058L7 7.708l2.121 2.12a.5.5 0 00.765-.637l-.058-.07L7.708 7l2.12-2.121a.5.5 0 00-.637-.765l-.07.058-2.12 2.12-2.122-2.12L7 6.292z"></path></svg>'},9447:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" class="chat-icon"><path d="M7 0a7 7 0 110 14A7 7 0 017 0zm.302 9.56c-.16.183-.299.275-.39.275-.046 0-.07 0-.115-.023-.046-.023-.046-.069-.046-.138s.023-.252.092-.504c.023-.092.069-.276.138-.528l.825-3.004-.458.091c-.161.023-.436.07-.803.115-.39.046-.665.069-.872.092v.275c.23 0 .39.023.482.069.092.046.137.114.137.252v.069c0 .023 0 .046-.022.092l-.643 2.385c-.046.183-.091.321-.114.413a1.882 1.882 0 00-.07.413c0 .252.07.435.23.55.16.115.321.183.528.183.344 0 .665-.137.963-.435.184-.184.436-.528.78-1.032l-.23-.16c-.114.183-.275.366-.412.55zm-.108-6.198a.711.711 0 00-.532.218.711.711 0 00-.218.532c0 .218.072.388.218.533a.711.711 0 00.532.218.711.711 0 00.532-.218.711.711 0 00.218-.532.711.711 0 00-.218-.533.711.711 0 00-.532-.218z"></path></svg>'},3941:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 14" class="chat-icon"><path d="M13.582 4.276a6.977 6.977 0 00-1.5-2.225A6.977 6.977 0 007.131 0a6.956 6.956 0 00-4.95 2.051A6.977 6.977 0 00.13 7.001a6.956 6.956 0 002.05 4.95A6.988 6.988 0 007.132 14c.945 0 1.863-.185 2.726-.55a6.951 6.951 0 002.224-1.5A6.988 6.988 0 0014.131 7c0-.944-.183-1.862-.549-2.724zm-6.45 6.663a.876.876 0 11.001-1.752.876.876 0 01-.002 1.752zm.875-7.004c0 .002 0 .002 0 0v.012a.793.793 0 01-.016.152l-.425 3.825a.438.438 0 01-.87.001l-.425-3.824a.793.793 0 01-.015-.152v-.034a.876.876 0 011.75 0v.02z"></path></svg>'},2248:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" class="chat-icon"><path d="M7 0a7 7 0 110 14A7 7 0 017 0zm3.146 4.929L6.097 8.978 3.854 6.734a.5.5 0 10-.708.707l2.598 2.598a.5.5 0 00.707 0l4.403-4.403a.5.5 0 00-.708-.707z"></path></svg>'},8310:function(e){"use strict";e.exports=r},8156:function(e){"use strict";e.exports=o},3546:function(e){"use strict";e.exports=c}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return function(){"use strict";n.r(a),n.d(a,{default:function(){return g}});var e=n(3546),t=n.n(e),r=n(8156),o=n.n(r),c=n(8310),i=n.n(c),u=n(2248),s=n.n(u),l=n(2828),f=n.n(l),_=n(3941),d=n.n(_),p=n(9447),S=n.n(p),E=n(8288),v=n.n(E),T={root:"qk8HcS1veu",content:"i6xFxbUJy0","msg-alert":"V8PYjKIzUj",msgAlert:"V8PYjKIzUj",normal:"uEVHwkddgf",success:"CYIOIVrUNV",error:"qATiJNvRcf",warn:"NE4XGeVE_4",info:"SGbCqUvg1s",icon:"NLSosCWzVU","alert-icon":"n9Uin1AXqK NLSosCWzVU",alertIcon:"n9Uin1AXqK NLSosCWzVU","alert-icon-success":"BqNuyihNZm",alertIconSuccess:"BqNuyihNZm","alert-icon-error":"ilWTKnVD2h",alertIconError:"ilWTKnVD2h","alert-icon-info":"TWDtL150yN",alertIconInfo:"TWDtL150yN","alert-icon-warn":"MVyhYgfTfW",alertIconWarn:"MVyhYgfTfW","alert-close":"od5EZwbuyM",alertClose:"od5EZwbuyM","close-icon":"Yi576Kxch2 NLSosCWzVU",closeIcon:"Yi576Kxch2 NLSosCWzVU","need-float":"tyGNDMk_QD",needFloat:"tyGNDMk_QD"},h={success:s(),error:f(),info:S(),warn:d()},g=function(e){var n=e.type,r=void 0===n?"warn":n,c=e.showIcon,a=e.closeable,u=e.onClose,s=e.content,l=e.icon,f=e.isBar,_=e.needFloat,d=e.className,p=e.contentClassName;if(!s)return null;var S=i()(T["alert-icon-".concat(r)],T.alertIcon),E=i()(d,T.root,T[r],f?"":T.msgAlert,_?T.needFloat:"");return o().createElement("span",{className:E},c&&(l||o().createElement(t(),{svg:h[r],className:S})),o().createElement("span",{className:i()(T.content,p)},s),a&&o().createElement("div",{className:T.alertClose,onClick:function(e){return u&&u(e)}},o().createElement(t(),{svg:v(),className:T.closeIcon})))}}(),a}())},92615:function(e,t,n){"use strict";e.exports=n(20432)},39637:function(e,t,n){var r,o;e.exports=(r=n(94184),o=n(86843),function(){"use strict";var e={8310:function(e){e.exports=r},8156:function(e){e.exports=o}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return function(){n.r(c),n.d(c,{default:function(){return i}});var e=n(8156),t=n.n(e),r="GHUxSkxNuJ",o=n(8310),a=n.n(o),i=function(e){var n=e.svg,o=e.style,c=void 0===o?{}:o,i=e.className,u=e.onClick,s=a()(r,i);return t().createElement("i",{onClick:u,style:c,className:s,dangerouslySetInnerHTML:{__html:n}})}}(),c}())},69193:function(e,t,n){"use strict";e.exports=n(39637)},58720:function(e,t,n){var r;e.exports=(r=n(86843),function(){"use strict";var e={8156:function(e){e.exports=r}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){n.r(o),n.d(o,{default:function(){return f}});var e=n(8156),t=n.n(e),r="SbG_pFWCiW",c="kOcjq_yQuK",a="Zk4z7tTqaE",i="HrQFl6UVN_",u="UCRIgeBPof",s="kmss6JpUXN kOcjq_yQuK",l="Q3uoPWJlY_",f=function(e){var n=e.isInit,o=void 0!==n&&n,f=e.text;return t().createElement("div",{className:r},t().createElement("div",{className:o?c:s},t().createElement("i",{className:a}),t().createElement("i",{className:i}),t().createElement("i",{className:u})),o&&f&&t().createElement("div",{className:l},f))}}(),o}())},11876:function(e,t,n){"use strict";e.exports=n(58720)},88078:function(e,t,n){var r,o;e.exports=(r=n(94184),o=n(86843),function(){"use strict";var e={8310:function(e){e.exports=r},8156:function(e){e.exports=o}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return function(){n.r(c),n.d(c,{default:function(){return i}});var e=n(8156),t=n.n(e),r=n(8310),o=n.n(r),a={animation:"mtSDzvuYwh",breathe:"WxZczoU9Y2",line:"uYvboya2A0","line-first":"Ni__LTrxDO mtSDzvuYwh",lineFirst:"Ni__LTrxDO mtSDzvuYwh","line-second":"FpEp58JgHm mtSDzvuYwh",lineSecond:"FpEp58JgHm mtSDzvuYwh",square:"zccgav569R mtSDzvuYwh",circle:"Vm7b3BCuyS mtSDzvuYwh"},i=function(n){var r=n.half,c=void 0!==r&&r,i=n.type,u=void 0===i?"line":i,s=n.children,l=n.className,f=void 0===l?"":l,_=n.style,d=(0,e.useMemo)((function(){return o()(f,a[u])}),[f,u]);return t().createElement("div",{className:d,style:_},"line"===u&&t().createElement(t().Fragment,null,t().createElement("div",{className:a.lineFirst}),!c&&t().createElement("div",{className:a.lineSecond})),s)}}(),c}())},27067:function(e,t,n){"use strict";e.exports=n(88078)},96296:function(e,t,n){var r,o,c,a;e.exports=(r=n(58518),o=n(88186),c=n(36808),a=n(69483),function(){"use strict";var e={95:function(e,t,n){n.d(t,{D:function(){return u},t:function(){return s}});var r=n(661),o=n.n(r),c=n(480),a=!1,i=function(e,t){a=!0;var n=t||(0,c.CE)();o().init({lng:n,fallbackLng:n,defaultNS:"common",keySeparator:!1,debug:!1,resources:e&&e.resources||{},interpolation:{prefix:"{",suffix:"}",escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}})},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";a||i({resources:{}},e),o().changeLanguage(e),o().addResourceBundle(e,n,t,!0,!0)},s=o().t.bind(o())},480:function(e,t,n){n.d(t,{$S:function(){return b},CE:function(){return G},E3:function(){return A},H9:function(){return d},IE:function(){return L},JS:function(){return p},Jy:function(){return D},L6:function(){return x},NJ:function(){return g},S1:function(){return u},Tb:function(){return P},Vm:function(){return y},X7:function(){return U},Y8:function(){return T},YH:function(){return M},Yc:function(){return _},dV:function(){return w},ef:function(){return S},jq:function(){return O},jz:function(){return k},pM:function(){return E},qk:function(){return R},u7:function(){return C},xC:function(){return N},z$:function(){return v}});var r,o,c,a,i={sg:"en",ph:"en",tw:"zh-Hant",my:"ms-MY",th:"th-TH",vn:"vi-VN",id:"id-ID",br:"pt-BR",in:"hi",cn:"zh-CN",mx:"es-MX",co:"es-CO",cl:"es-CL",ar:"es-AR",pl:"pl",es:"es-ES",fr:"fr",us:"en",kr:"en"},u=function(e,t,n){r=e.toLowerCase(),o="liveish"===t?"live-test":"stable"===t?"test-stable":t,c=n,a=i[r]||"en"},s=["my","br","mx","co","ar"],l=["id","th"],f=["us"],_=function(e){return s.includes(e)?"com.".concat(e):l.includes(e)?"co.".concat(e):f.includes(e)?"com":e},d=function(e){return"tw"===e?"xiapi":e.toLowerCase()},p=function(e){return _(e)},S=function(){return"live"===o?"":"".concat(o,".")},E=function(){return"live"===o?"shopee":"".concat(o,".shopee")},v=function(){return"cn"===r},T=function(){return"kr"===r};function h(){return g()&&!v()}function g(){var e=window.location.hostname;return e&&e.includes("cn")}var m=function(e,t){return"seller"===e?"vn"!==t||h()?"seller":"banhang":e},O=function(e,t){var n,c=t?t.toLowerCase():r;return h()?function(e,t){var n=t?t.toLowerCase():r;return"".concat(m(e,n),".").concat(d(n),".").concat(E(),".").concat("cn")}(e,c):"".concat(m(e,c),".").concat((n=window.location.hostname,n&&n.includes("shopeebrasil")?"live"===o?"shopeebrasil":"".concat(o,".shopeebrasil"):E()),".").concat(p(c))},R=function(e){return O("seller",e)},b=function(e){var t=e?e.toLowerCase():r;return"seller-service.cs.".concat(E(),".").concat(p(t))},y=function(){return"".concat(R(),"/webchat/api")},A=function(){return"".concat(R(),"/api")},C=function(e){var t=e?e.toLowerCase():r;return"cn"!==t&&"kr"!==t||(t="my"),g()?"".concat(d(t),".").concat(S()).concat("xiapibuy.com"):"".concat(E(),".").concat(p(t))},P=function(){var e=r;return"cn"!==e&&"kr"!==e||(e="my"),"".concat(E(),".").concat(p(e))},I=["sg","my","th","ph","vn","id","tw","br"],D=function(e){var t=e?e.toLowerCase():r;if(v())return"https://s-cf-sg.shopeesz.com/file/";if(T())return"https://cf.shopee.sg/file/";var n=I.includes(t);return h()&&n?"https://s-cf-".concat(t,".shopeesz.com/file/"):"https://cf.shopee.".concat(_(t),"/file/")},w=function(e){var t=e?e.toLowerCase():r;return"tw"===t&&g()?"https://cvf.shopee.cn/file/":"https://cvf.shopee.".concat(_(t),"/file/")},N=function(){return"https://".concat(O("seller"),"/webchat/conversations")},M=function(){return"https://".concat(O("seller"),"/webchat")},L=function(){return o},U=function(){return r},x=function(){return c},G=function(){return a},k=function(){return g()?"https://deo.shopeesz.com/shopee/":"https://deo.shopeemobile.com/shopee/"}},602:function(e){e.exports=o},661:function(e){e.exports=r},598:function(e){e.exports=c},349:function(e){e.exports=a}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){n.r(i),n.d(i,{AccountType:function(){return ke},ActionType:function(){return b},AffiliateTypeEnum:function(){return ae},AlertType:function(){return Ye},AllChatsFolders:function(){return ge},BannerTypeEnum:function(){return de},BizIdEnum:function(){return te},ChatWithTypeEnum:function(){return ee},ChatWithTypeMap:function(){return le},ChatbotFromType:function(){return ye},ChatbotPauseEntranceTypes:function(){return R},ChatbotToggle:function(){return Ae},ConversationListTab:function(){return fe},ConversationSource:function(){return Le},ConversationTypeEnum:function(){return Z},CustomShareEvent:function(){return qe},DataFetchStatus:function(){return j},LS:function(){return un},LogisticsCardLabel:function(){return _},LogisticsEntranceTypes:function(){return T},LogisticsMessageTypes:function(){return Zr},MAX_MEDIA_NUM:function(){return a},MAX_Z_INDEX:function(){return Ke},MINI_MIN_TEXT_BOX_HEIGHT:function(){return p},ManualMessageSource:function(){return N},MessageErrorCode:function(){return c},MessageLabelType:function(){return E},MessageOption:function(){return e},MessageSendStatus:function(){return o},MessageShortcutGroupType:function(){return u},MessageSource:function(){return Ue},MessageTypes:function(){return r},NoticeOrderTitle:function(){return S},OfferStatus:function(){return B},OfficialConvType:function(){return ne},OperationStatus:function(){return F},OrderDeliveryStatus:function(){return d},OrderDeliveryStatusKeyMap:function(){return v},QueueStatusEntranceType:function(){return O},RREntranceTypes:function(){return h},RRNoticeTypes:function(){return m},ReturnCardStatus:function(){return s},ReturnSolution:function(){return l},SellerUnreadStatus:function(){return Oe},ServeTodayFolders:function(){return he},ServeTodayFoldersV2:function(){return me},ServeTodayTab:function(){return Te},ShareDataType:function(){return ze},SlaType:function(){return f},SocketConnectionStatus:function(){return V},SocketToAlertType:function(){return Be},StartChatErrorCode:function(){return He},StorageKey:function(){return Qe},SubAccountChatTypeMap:function(){return se},SubAccountRole:function(){return Ge},SubAccountTagMap:function(){return ue},SwitchStatus:function(){return H},TrackRRType:function(){return g},TrackerOperation:function(){return Fe},TranslationStatus:function(){return Y},UnreadSource:function(){return xe},capitalizeFirstLetter:function(){return ft},changeLanguage:function(){return Co.D},chatbotLabelText:function(){return D},chatbotProductCard:function(){return eo},checkAIBannerGuide:function(){return en},checkAssistantHighlightGuide:function(){return nn},checkAutoReplyHighlightGuide:function(){return rn},checkEmptyObject:function(){return Xe},checkMiniUnrepliedGuide:function(){return tn},checkRegionFilterGuide:function(){return on},checkSpecialShops:function(){return Tn},cnDomainHash:function(){return nt.H9},compareSameDayOfTimestamp:function(){return Nt},customizeTime:function(){return Pt},debounce:function(){return Wt},defaultLocalInMall:function(){return Ve},detectTextAndTimestamp:function(){return Oo},domainHash:function(){return nt.Yc},domainPrefix:function(){return nt.pM},domainSuffix:function(){return nt.JS},envPrefix:function(){return nt.ef},escapeRegex:function(){return Eo},fillMessagePreview:function(){return lo},formatMessageTime:function(){return wt},formatTransifyKeyWithNumber:function(){return Bt},getApiServer:function(){return nt.Vm},getCDNUrl:function(){return nt.jz},getConversationStatusTag:function(){return Ro},getCurrentTimestampString:function(){return vo},getCustomMessageText:function(){return zr},getDefaultFolderStatus:function(){return Ne},getDefaultFolderStatusV2:function(){return Me},getFileServer:function(){return nt.Jy},getFormattedTime:function(){return Dt},getGlobalConfigTranslatedText:function(){return Ao},getHasSameSourceAndTarget:function(){return uo},getItem:function(){return sn},getLANGUAGE_MAPPING_V2Key:function(){return Et},getLocaleText:function(){return io},getLogisticsCardTitle:function(){return _o},getLogisticsIssueCardTitle:function(){return po},getMallTranslationLocale:function(){return gt},getMallUrl:function(){return nt.u7},getMallUrlIgnoreCn:function(){return nt.Tb},getMessageIsSend:function(){return So},getProjectUrl:function(){return nt.jq},getRRMessageTitle:function(){return fo},getRequestBizId:function(){return Pe},getRowHeight:function(){return ve},getRuntimeLocale:function(){return nt.CE},getRuntimeRegion:function(){return nt.X7},getRuntimeServer:function(){return nt.IE},getRuntimeVersion:function(){return nt.L6},getSCApiServer:function(){return nt.E3},getSellerCenterUrl:function(){return nt.qk},getSellerServiceUrl:function(){return nt.$S},getServiceLocale:function(){return ht},getSystemMessageByLocale:function(){return so},getTextMessagePreviewShowTranslation:function(){return oo},getTranslatedText:function(){return yo},getTranslationLocale:function(){return vt},getUrlParam:function(){return Vt},getVideoServer:function(){return nt.dV},getWebChatPureUrl:function(){return nt.YH},getWebChatUrl:function(){return nt.xC},greaterThan:function(){return $e},hasTargetMessageOption:function(){return co},init:function(){return nt.S1},isConversationRead:function(){return be},isConversationUnread:function(){return Re},isDeletedMessage:function(){return ao},isElementFullyInViewport:function(){return je},isElementVisibleAtLeast:function(){return bo},isMessageLabelType:function(){return I},isVisitingCNSC:function(){return nt.z$},isVisitingCn:function(){return nt.NJ},isVisitingKRSC:function(){return nt.Y8},localeInMallToTspLocale:function(){return We},newFormatMessageTime:function(){return Lt},persistLimit:function(){return _n},previewMessage:function(){return no},removeItem:function(){return fn},searchHighlightConversation:function(){return Ce},setItem:function(){return ln},showAIAssistantLabel:function(){return y},showChatbotLabel:function(){return C},showReviewLabel:function(){return A},showTcsLink:function(){return P},showVideoMessageTypes:function(){return w},simpleEqualCheck:function(){return Je},subAccountAffiliateBiz:function(){return ie},throttle:function(){return Qt},trackerMap:function(){return _e},unifyLocale:function(){return dt},updateTimeLocale:function(){return Rt}});var e,t=n(95).t,r={MSG_TYPE_TEXT:"text",MSG_TYPE_IMAGE:"image",MSG_TYPE_OFFER:"offer",MSG_TYPE_PRODUCT:"product",MSG_TYPE_ORDER:"order",MSG_TYPE_STICKER:"sticker",MSG_TYPE_NOTIFICATION:"notification",MSG_TYPE_VOUCHER:"voucher",MSG_TYPE_ITEM_LIST:"item_list",MSG_TYPE_SHOPPING_CART:"shopping_cart",MSG_TYPE_FAQ:"faq",MSG_TYPE_FAQ_QUESTION:"faq_question",MSG_TYPE_FAQ_FEEDBACK:"faq_feedback",MSG_TYPE_FAQ_LIVEAGENT:"faq_liveagent",MSG_TYPE_FAQ_UNSUPPORTED:"faq_unsupported",MSG_TYPE_FAQ_FEEDBACK_PROMPT:"faq_feedback_prompt",MSG_TYPE_FAQ_LIVEAGENT_PROMPT:"faq_liveagent_prompt",MSG_TYPE_UNTATED_ORDER_REMINDER:"unrated_order_reminder",MSG_TYPE_FLASH_SALE:"flash_sale",MSG_TYPE_BUNDLE_DEAL:"bundle_deal",MSG_TYPE_BUNDLE_MESSAGE:"bundle_message",MSG_TYPE_OPTION_PACK:"option_pack",MSG_TYPE_SELECTED_OPTION:"selected_option",MSG_TYPE_ADD_ON_DEAL:"add_on_deal",MSG_TYPE_VIDEO:"video",MSG_TYPE_IMAGE_WITH_TEXT:"image_with_text",MSG_TYPE_RATE_CARD:"rating_card",MSG_TYPE_NEW_FAQ:"new_faq",MSG_TYPE_FAQ_CATEGORY_CHOICE:"faq_category_choice",MSG_TYPE_FAQ_QUESTION_LIST:"faq_question_list",MSG_TYPE_FAQ_TYPE_CHOICE:"faq_type_choice",MSG_TYPE_FAQ_CATEGORY_LIST:"faq_category_list",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE:"faq_bot_request_text",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE:"faq_bot_request_order",FAQ_TYPE_BOT_RESPONSE_MESSAGE:"faq_bot_response",MSG_TYPE_SECURITY_TIPS:"security_tips",MSG_TYPE_CRM_ITEM_LIST:"crm_item_list",MSG_TYPE_RR:"return_refund_card",MSG_TYPE_CRM_ORDER_RATE:"crm_order_rate",MSG_TYPE_LOGISTICS_CARD:"logistics_card",MSG_TYPE_LOGISTICS_ISSUE_ENQUIRY_CARD:"logistics_issue_enquiry_card",MSG_TYPE_EXPEDITED_LOGISTICS_CARD:"expedited_logistics_card",MSG_TYPE_LATE_DELIVERY_COMPENSATION_VOUCHER:"late_delivery_compensation_voucher",MSG_TYPE_LOADING:"loading",MSG_TYPE_CUSTOMER_SERVICE_ENTRANCE:"customer_service_entrance",MSG_TYPE_INSURANCE_CS_GUIDE:"insurance_cs_guide",MSG_TYPE_FAQ_BOT_REVIEW_SUMMARY_CARD:"faq_bot_review_summary_card",MSG_TYPE_FAQ_BOT_GALLERY_CARD:"faq_bot_buyer_gallery_card",MSG_TYPE_RESTOCK_REMINDER_CARD:"bot_restock_reminder_card",MSG_TYPE_OUT_STOCK_CARD:"bot_out_stock_card",MSG_TYPE_FAQ_BOT_TIMELINE_CARD:"faq_bot_timeline_card",MSG_TYPE_BOT_BARGAIN_CARD:"faq_bot_price_history_card",MSG_TYPE_FAQ_BOT_AUTHENTIC_CARD:"faq_bot_authentic_card",MSG_TYPE_FAQ_TYPE_BOT_CONTACT_COURIER_CARD:"faq_bot_contact_courier_card",MSG_TYPE_RAISE_RR_CARD:"rr_entrance_card",MSG_TYPE_INQUIRY_RR_OPERATION_CARD:"track_rr_status_card",MSG_TYPE_INQUIRY_RR_OPERATION_FEEDBACK_CARD:"rr_operate_feedback_card",MSG_TYPE_FAQ_TYPE_BOT_ITEM_COMPARISON:"faq_type_bot_item_comparison",MSG_TYPE_INFORM_PROMOTION:"crm_bundle_item_inform_promotion",MSG_TYPE_NEW_ARRIVAL:"crm_bundle_item_new_arrival",MSG_TYPE_CUSTOM_MESSAGE:"crm_bundle_item_custom_message",MSG_TYPE_TEXT_WITH_BUBBLE:"text_with_bubble",MSG_TYPE_QUESTION_LIST:"question_list",MSG_TYPE_RICH_TEXT:"rich_text",MSG_TYPE_FAQ_BOT_SUGGESTION_CARD:"bot_text_with_suggestion_card",MSG_TYPE_FAQ_BOT_VOUCHER_PRODUCT:"bot_voucher_product",MSG_TYPE_SET_STOCK_REMINDER_CARD:"out_of_stock_reminder_card",MSG_TYPE_FAQ_BOT_RAISE_RR_CARD:"faq_bot_raise_rr_card",MSG_TYPE_FAQ_BOT_RAISE_RR_CARD_FEEDBACK_CARD:"faq_bot_raise_rr_feedback_card",MSG_TYPE_FAQ_BOT_TRACK_RR_STATUS_CARD:"faq_bot_track_rr_status_card",MSG_TYPE_FAQ_BOT_TRACK_RR_STATUS_FEEDBACK_CARD:"faq_bot_operate_rr_feedback_card",MSG_TYPE_FAQ_BOT_ITEM_COLLECTIONS:"faq_bot_item_collections",MSG_TYPE_FAQ_BOT_TEXT_WITH_SHORTCUT:"faq_bot_text_with_shortcut",MSG_TYPE_FAQ_BOT_PRODUCT:"product_new",MSG_TYPE_FAQ_BOT_SELECT_PRODUCT:"faq_bot_select_product",MSG_TYPE_OFFICIAL_CHAT_BANNER:"official_chat_banner",MSG_TYPE_OFFICIAL_CHAT_VOUCHER:"official_chat_voucher",MSG_TYPE_OFFICIAL_CHAT_REPAYMENT:"official_chat_repayment",MSG_TYPE_CREDIT_CS_GUIDE:"cs_guide",MSG_TYPE_FAQ_BOT_VOUCHER_FULFILLMENT:"faq_bot_voucher_fulfillment",MSG_TYPE_FAQ_BOT_MARKDOWN:"markdown",MSG_TYPE_FAQ_TYPE_BOT_ITEM_VIDEO_CARD:"faq_bot_item_video_card"},o={SENDING:1,FAILED:2,SUCCEED:3,DELIVERY:4,READ:5},c={SENDER_FORBIDDEN:27,FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACKLIST:43,CANCEL_ORDER:44,UNVERIFIED_PHONE_NUMBER:45,EXCEED_DAILY_LIMIT:26,UNTRUSTED_NETWORK:46,NEED_CAPTCHA:47,DFP_ERROR:48,SPAMMER:49,FAQ_EXPIRED:50,FAQ_SESSION_OLD:51,NEED_CAPTCHA_VERIFY:52,FROM_USER_FROZEN:53,TO_USER_FROZEN:54,FAQ_PAUSED:55,SYSTEM_SEND_RATE_CARD:56,MESSAGE_REPETITIVE_LEVEL_1:57,DEFAULT:-1},a=9,u={ALL:-1,PERSONAL:1,TEAM:2};!function(e){e[e.MSG_OPT_NORMAL=0]="MSG_OPT_NORMAL",e[e.MSG_OPT_AUTO_REPLY=1]="MSG_OPT_AUTO_REPLY",e[e.MSG_OPT_BLOCKED=2]="MSG_OPT_BLOCKED",e[e.MSG_OPT_CENSORED_BLACKLIST=16]="MSG_OPT_CENSORED_BLACKLIST",e[e.MSG_OPT_CENSORED_WHITELIST=32]="MSG_OPT_CENSORED_WHITELIST",e[e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER=64]="MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER",e[e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER=128]="MSG_OPT_IGNORE_UNREAD_FOR_SENDER",e[e.MSG_OPT_INVISIBLE_FOR_RECEIVER=256]="MSG_OPT_INVISIBLE_FOR_RECEIVER",e[e.MSG_OPT_INVISIBLE_FOR_SENDER=512]="MSG_OPT_INVISIBLE_FOR_SENDER",e[e.MSG_OPT_ADS=1024]="MSG_OPT_ADS",e[e.MSG_OPT_FAQ_SESSION=2048]="MSG_OPT_FAQ_SESSION",e[e.MSG_OPT_TRIGGER_FAQ=4096]="MSG_OPT_TRIGGER_FAQ",e[e.MSG_OPT_SOCIAL_MESSAGE=8192]="MSG_OPT_SOCIAL_MESSAGE",e[e.MSG_OPT_OFFWORK_AUTOREPLY=16384]="MSG_OPT_OFFWORK_AUTOREPLY",e[e.MSG_OPT_CANCELORDER_WARNING_SENT=32768]="MSG_OPT_CANCELORDER_WARNING_SENT",e[e.MSG_OPT_CANCELORDER_WARNING_RETRACT=65536]="MSG_OPT_CANCELORDER_WARNING_RETRACT",e[e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND=66496]="MSG_OPT_CANCELORDER_WARNING_NOT_SEND",e[e.MSG_OPT_CHATBOT_SESSION=131072]="MSG_OPT_CHATBOT_SESSION",e[e.MSG_OPT_TRIGGER_CHATBOT=262144]="MSG_OPT_TRIGGER_CHATBOT",e[e.MSG_OPT_PRIVATE_MESSAGE=524288]="MSG_OPT_PRIVATE_MESSAGE",e[e.MSG_OPT_SILENT_FOR_SENDER=1048576]="MSG_OPT_SILENT_FOR_SENDER",e[e.MSG_OPT_DELETE=2097152]="MSG_OPT_DELETE",e[e.MSG_OPT_RECALL=8388608]="MSG_OPT_RECALL"}(e||(e={}));var s,l,f,_,d,p=88;!function(e){e[e.Submit=1]="Submit",e[e.Refund=2]="Refund",e[e.Reject=3]="Reject"}(s||(s={})),function(e){e[e.ReturnAndRefund=0]="ReturnAndRefund",e[e.Return=1]="Return"}(l||(l={})),function(e){e[e.day=1]="day",e[e.hour=2]="hour"}(f||(f={})),function(e){e[e.Inquiry=1]="Inquiry",e[e.Expedite=2]="Expedite"}(_||(_={})),function(e){e[e.Normal=0]="Normal",e[e.Stuck=1]="Stuck",e[e.AfterEstimated=2]="AfterEstimated",e[e.AfterGuarantee=3]="AfterGuarantee"}(d||(d={}));var S,E,v={Normal:"normal",Stuck:"stuck",AfterEstimated:"exceed",AfterGuarantee:"latest"},T=["inquiry_logistics_switch_order","expedite_delivery_switch_order","inquiry_logistics","expedite_delivery"],h=["rr_entrance","noti_type_raise_return_refund_switch_order","noti_type_track_return_refund_switch_order"],g="noti_type_track_return_refund_switch_order",m=["noti_type_raise_return_refund_switch_order","noti_type_track_return_refund_switch_order"],O="choice_queue_status",R=["noti_type_seller_send_message_in_chatbot","noti_type_seller_pause_chatbot"];!function(e){e.rr_entrance="modal.select_order.title",e.noti_type_raise_return_refund_switch_order="modal.select_raise_rr_order.title",e.noti_type_track_return_refund_switch_order="modal.select_track_rr_order.title"}(S||(S={})),function(e){e[e.AUTO_REPLY=1]="AUTO_REPLY",e[e.OFFWORK_AUTO_REPLY=2]="OFFWORK_AUTO_REPLY",e[e.CHAT_ASSISTANT=3]="CHAT_ASSISTANT",e[e.CHAT_ASSITANT_WITH_TCS=4]="CHAT_ASSITANT_WITH_TCS",e[e.CHAT_ASSISTANT_WITH_REVIEW=5]="CHAT_ASSISTANT_WITH_REVIEW",e[e.CHAT_ASSISTANT_WITH_REVIEW_AND_TCS=6]="CHAT_ASSISTANT_WITH_REVIEW_AND_TCS"}(E||(E={}));var b,y=function(e){return[E.CHAT_ASSISTANT,E.CHAT_ASSITANT_WITH_TCS].includes(e)},A=function(e){return[E.CHAT_ASSISTANT_WITH_REVIEW,E.CHAT_ASSISTANT_WITH_REVIEW_AND_TCS].includes(e)},C=function(e){return y(e)||A(e)},P=function(e){return[E.CHAT_ASSITANT_WITH_TCS,E.CHAT_ASSISTANT_WITH_REVIEW_AND_TCS].includes(e)},I=function(e){return Object.values(E).includes(e)},D=function(e){return y(e)?t("message.label_type.ai_assistant"):A(e)?t("message.label_type.support_review"):""};!function(e){e.Call="call",e.Email="email",e.WhatsApp="whatsapp",e.Line="line",e.Facebook="facebook",e.Dots="3dots"}(b||(b={}));var w=[r.MSG_TYPE_VIDEO,r.MSG_TYPE_PRODUCT,r.MSG_TYPE_FAQ_TYPE_BOT_ITEM_VIDEO_CARD],N=["old_webchat","new_webchat","ios","android","mini_webchat","pc_mall_minichat","mweb","openapi","ios_minichat","android_minichat"];function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===M(t)?t:String(t)}function U(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={NORMAL:"normal",PENDING:"pending",SUCCEED:"succeed",FAILED:"failed"},j=G(G({},k),{},{INIT_PENDING:"pendingInit",INIT_FAILED:"failedInit",TEMPORY_ERROR:"temporyError"}),F=G(G({},k),{},{BLACKLIST_ERROR:"blacklistError",INTERNAL_SERVER_ERROR:"internalServerError"}),H={ENABLED:"enabled",DISABLED:"disabled",NO_PERSSION:"no_permission"},Y={SUCCEED:"succeed",FAILED:"failed",HISTORY:"history",SHOW:"show",PENDING:"pending"},B={PENDING:"pending",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled"},V={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECTING:"reconnecting",RECONNECT:"reconnect"};function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],u=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return i}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z,K,X,J,$,Z,ee,te,ne,re={conversationCellForBCSubAccount:84,conversationCellForBCSubAccountTH:94,conversationCell:62,conversationCellTH:70,shopCardCell:212,shopListCell:72,voucherCell:146,conversationShopListCell:60,dropdownShopListCell:44,contactCell:48};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.Normal=0]="Normal",e[e.Agent=1]="Agent"}(Z||(Z={})),function(e){e.Buyer="buyer",e.Driver="driver",e.Affiliate="affiliate"}(ee||(ee={})),function(e){e[e.Buyer=0]="Buyer",e[e.SubAccount=2]="SubAccount",e[e.Driver=9]="Driver",e[e.Affiliate=11]="Affiliate",e[e.Chatbot=12]="Chatbot",e[e.MCN=14]="MCN",e[e.KOL=15]="KOL"}(te||(te={})),function(e){e[e.OFFICIAL_CREDIT=1]="OFFICIAL_CREDIT"}(ne||(ne={}));var ae,ie=[te.MCN,te.KOL],ue=(U(z={},te.SubAccount,"buyer"),U(z,te.MCN,"mcn"),U(z,te.KOL,"kol"),z),se=(U(K={},ee.Buyer,[te.SubAccount]),U(K,ee.Affiliate,[te.KOL,te.MCN]),K),le=(U(X={},ee.Buyer,te.Buyer),U(X,ee.Driver,te.Driver),U(X,ee.Affiliate,te.Affiliate),X),fe={TODAY:"today",ALL:"all"},_e=(U(J={},fe.ALL,"all_chats"),U(J,fe.TODAY,"serving_today"),J);!function(e){e[e.KOL=1]="KOL",e[e.MCN=2]="MCN"}(ae||(ae={}));var de,pe=re,Se=pe.conversationCellForBCSubAccount,Ee=pe.conversationCell,ve=function(e){return e?Se:Ee},Te={PINNED:"pinned",UNREPLIED:"unreplied",AUTOREPLY:"auto_replied",MANUALREPLY:"manually_replied",ALL_BUYERS:"all_buyers",BUYER_TO_PAY:"to_pay",INQUIRY_WITHOUT_ORDER:"inquiry_without_order"},he=[Te.PINNED,Te.UNREPLIED,Te.AUTOREPLY,Te.MANUALREPLY],ge=[Te.BUYER_TO_PAY,Te.INQUIRY_WITHOUT_ORDER,Te.ALL_BUYERS],me=[Te.UNREPLIED,Te.PINNED,Te.AUTOREPLY,Te.MANUALREPLY],Oe={SHOW:1,HIDE:2},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.unread_count,n=void 0===t?0:t,r=e.seller_unread_status;return"number"==typeof n&&n>0||r===Oe.SHOW},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===e.unread_count&&e.seller_unread_status!==Oe.SHOW};!function(e){e[e.GET=0]="GET",e[e.UPDATE_PRODUCT=1]="UPDATE_PRODUCT",e[e.UPDATE_ORDER=2]="UPDATE_ORDER",e[e.UPDATE_RECOMMEND=7]="UPDATE_RECOMMEND"}(de||(de={}));var ye,Ae,Ce=function(e){var t,n,r,o,c,a,i=null===(t=e.find((function(e){return"auto_replied"===e.type})))||void 0===t?void 0:t.conversations,u=null===(n=e.find((function(e){return"pinned"===e.type})))||void 0===n||null===(r=n.conversations)||void 0===r?void 0:r.map((function(e){return null==e?void 0:e.id})),s=null===(o=e.find((function(e){return"unreplied"===e.type})))||void 0===o?void 0:o.conversations,l=null==s||null===(c=s.find((function(e){var t;return"exit_faq"===(null===(t=e.latest_message_content)||void 0===t?void 0:t.notification_type)})))||void 0===c?void 0:c.id;return[null==i||null===(a=i.find((function(e){return!u.includes(e.id)})))||void 0===a?void 0:a.id,l]},Pe=function(e,t){return t?te.Chatbot:e},Ie=he[0],De=he.slice(0),we=(U($={},he[1],!1),U($,he[0],!1),U($,he[2],!1),U($,he[3],!1),$),Ne=function(e,t,n){var r=null==n?void 0:n.length;if(t&&4===Object.keys(e).length){var o=ce({},we);o[Ie]=e[Ie];var c=De.find((function(t){return e[t]}));return c&&(o[c]=!0),r&&(o.upreplied=!0,o.auto_replied=!0),o}return null},Me=function(e,t,n){var r=q(n,2),o=r[0],c=r[1],a={serveTodaySingleFolderStatus:"",singleFolderStatus:""};if(t){var i="",u="";me.every((function(t){var n;return null===(n=Object.keys(e))||void 0===n?void 0:n.includes(t)}))&&((i=me.find((function(t){return e[t]}))||"")&&(o?i=Te.AUTOREPLY:c&&(i=Te.UNREPLIED)),a=ce(ce({},a),{},{serveTodaySingleFolderStatus:i})),ge.every((function(t){var n;return(null===(n=Object.keys(e))||void 0===n?void 0:n.includes(t))||t===Te.ALL_BUYERS}))&&(u=ge.find((function(t){return e[t]}))||"",a=ce(ce({},a),{},{singleFolderStatus:u}))}return a},Le={SYNC:4,SELECTOR:13},Ue={SEND:7},xe={PRELOAD:1},Ge={MAIN_SUBACCOUNT:"main_subaccount",ADMIN_SUBACCOUNT:"admin_subaccount",NORMAL_SUBACCOUNT:"normal_subaccount"},ke={SELLER:"seller",SUBACCOUNT:"subaccount"},je=function(e){if(!e)return!1;var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth},Fe={CLICK:"click",IMPRESSION:"impression",ACTION_DRAG_VIDEO:"action_drag_video",DELETE_PREVIEW_MEDIA:"delete_preview_media",CLOSE_PREVIEW_MEDIA:"close_preview_media",VIEW:"view",ACTION_SELECT:"action_select",ACTION_SEARCH:"action_search",ACTION_HOVER:"action_hover",ACTION_TOGGLE_ON_SUCCESS:"action_toggle_on_success",ACTION_TOGGLE_OFF_SUCCESS:"action_toggle_off_success",ACTION_DISAPPEAR:"action_disappear",ACTIVATE_CHATBOT_SUCCESS:"activate_chatbot_success"};!function(e){e.LandingPage="SIPDirectChatFromChatLandingPage",e.ProductPage="SIPProductPage",e.OrderPage="SIPOrderPageFromBuyer",e.ShopPage="SIPShopPage"}(ye||(ye={})),function(e){e[e.Disable=0]="Disable",e[e.AutoToggle=1]="AutoToggle",e[e.Opt=2]="Opt"}(Ae||(Ae={}));var He,Ye={error:"error",success:"success",normal:"normal",warn:"warn",info:"info"},Be={pending:Ye.warn,error:Ye.error,resolved:Ye.success};!function(e){e[e.Login=0]="Login",e[e.Redirection=1]="Redirection",e[e.Messages=2]="Messages",e[e.Conversations=3]="Conversations"}(He||(He={}));var Ve={sg:"en",ph:"en",tw:"zhHant",id:"id",th:"th",vn:"vi",my:"en",br:"pt-BR",mx:"es-MX",cl:"es-CL",pl:"pl",co:"es-CO"},We={en:"en",zhHans:"zh-Hans","ms-my":"ms-MY",zhHant:"zh-Hant",id:"id",th:"th",vi:"vi","pt-BR":"pt-BR","es-MX":"es-MX","es-CL":"es-CL","es-CO":"es-CO","es-AR":"es-AR",pl:"pl",fr:"fr","es-ES":"es-ES",fil:"fil",my:"my",km:"km"},Qe={USERID:"__chat_userid__",LAST_ACTIVE:"last-active-time",MINI_ALERT:"mini-should-show-alert",MINI_TEXT_BOX_HEIGHT:"mini-text-box-height"},qe={ACK:"ack",TAB_FOCUSED:"tabFocused",CALC_CONNECTIONS:"calcConnections",CLOSE_CONNECTION:"closeConnection",SHARE_API_DATA:"shareApiData"},ze={UNREAD:"unread",UPDATE_SETTING:"updateSetting"},Ke=199999,Xe=function(e){return!e||0===Object.keys(e).length},Je=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},$e=function(e,t){if(!e)return!1;if(!t)return!0;var n=(e+="").length,r=(t+="").length;if(n!==r)return n>r;var o=e.split(""),c=null;return o.forEach((function(e,n){"boolean"!=typeof c&&(c=parseInt(e)>parseInt(t[n])||parseInt(e)===parseInt(t[n])&&null)})),!!c},Ze=n(602),et=n(598),tt=n.n(et),nt=n(480);function rt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw c}}}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct,at,it,ut,st=["hans","hant"],lt=["my","en","zh-hans","zh-hant","ms-my","th-th","vi-vn","id-id","zh-cn","pt-br","hi","es-mx","es-co","es-cl","es-es","es-ar","pl","fr","fil","km"],ft=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1))},_t=function(e){if(e.includes("-")){var t=e.split("-");return st.includes(t[1])?"".concat(t[0],"-").concat(ft(t[1])):"".concat(t[0],"-").concat(t[1].toUpperCase())}return e},dt=function(e){var t,n=(e||"en").toLowerCase(),r="en",o=rt(lt);try{for(o.s();!(t=o.n()).done;){var c=t.value;if(c.includes(n)){r=_t(c);break}}}catch(e){o.e(e)}finally{o.f()}return r},pt={en:"default","ms-MY":"ms","th-TH":"th",th:"th","zh-Hans":"zh-Hans","zh-Hant":"zh-Hant","vi-VN":"vi",vi:"vi","id-ID":"id",id:"id","zh-CN":"zh-Hans","pt-BR":"pt-BR",hi:"hi","es-MX":"es-MX","es-CO":"es-CO","es-CL":"es-CL",pl:"pl","es-ES":"es-ES",fr:"fr","es-AR":"es-AR",fil:"ph",my:"my",km:"km"},St={en:"SG",ms:"MY",th:"TH","zh-Hans":"CN","zh-Hant":"TW",vi:"VN",ph:"PH",id:"ID","pt-BR":"BR","es-MX":"MX","es-CO":"CO","es-CL":"CL","es-AR":"AR",fr:"FR",pl:"PL","es-ES":"ES",hi:"IN",fil:"PH",my:"MM",default:"SG",km:"VN"},Et=function(e){var t=dt(e);return St[pt[t]]||St.default},vt=function(e){var t=dt(e);switch(t){case"th-TH":return"th";case"vi-VN":return"vi";case"id-ID":return"id";default:return t}},Tt={en:"default","ms-MY":"ms-my","th-TH":"th",th:"th","zh-Hans":"tw","zh-Hant":"tw","vi-VN":"vn",vi:"vn",km:"vn","id-ID":"id",id:"id","zh-CN":"cn","pt-BR":"pt-br",hi:"hi","es-MX":"es-mx","es-CO":"es-co","es-CL":"es-cl",pl:"pl","es-ES":"es-es",fr:"fr","es-AR":"es-ar",fil:"fil",my:"my"},ht=function(e){var t=dt(e);return Tt[t]||"default"},gt=function(){var e,t=tt().get("language");if(t)e=We[t]||"en";else{var n=Ve[(0,nt.X7)()]||"en";e=We[n]||"en"}return e},mt=n(95).t,Ot=function(){},Rt=function(e){var t=Et(e);ct=t;var n=(0,Ze.getBoundUtils)(t,e);Ot=n.formatTime},bt=function(e){return Ot(e,"hh:mm")};!function(e){e.Today="today",e.Yesterday="yesterday"}(at||(at={})),function(e){e[e.Time=0]="Time"}(it||(it={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(ut||(ut={}));var yt,At=function(e){var t=e.value,n=e.date,r=e.suffix,o=e.prefix,c="",a="";if(o&&(c=mt("conversation_detail.message_list.".concat(o.type))+(void 0===o.separator?"  ":o.separator)),r){var i=r.type===it.Time?bt(n):"";a=(void 0===r.separator?", ":r.separator)+i}return c+t+a};!function(e){e[e.Yesterday=0]="Yesterday",e[e.Today=1]="Today",e[e.ThisMonth=2]="ThisMonth",e[e.ThisYear=3]="ThisYear",e[e.ThisWeek=4]="ThisWeek",e[e.NONE=5]="NONE"}(yt||(yt={}));var Ct=864e5,Pt=function(e,t){var n=t||{},r=n.noTodayFlag,o=n.noTimeFlag,c=n.needFullFormat,a=n.onlyKeepDate,i=n.isConvPreview,u=new Date(e),s=Ot(e,{month:"short",day:"short",year:"long"});if(c)return At({value:s,date:u,suffix:{type:it.Time}});if(a)return s;var l=["tw","cn"].includes(ct.toLowerCase()),f=function(e,t){var n=new Date,r=new Date(e);if(t){var o=n-r,c=(new Date).setHours(0,0,0,0);if(o<=6048e5&&o>=Ct+(n.getTime()-c))return yt.ThisWeek}if(n.getFullYear()===r.getFullYear()){if(n.getMonth()===r.getMonth()){var a=n.getDate(),i=r.getDate();return a===i?yt.Today:a-1===i?yt.Yesterday:yt.ThisMonth}return yt.ThisYear}return yt.NONE}(e,i);switch(f){case yt.Today:var _=r?void 0:{type:at.Today},d={type:it.Time,separator:""};return At({value:"",date:u,prefix:_,suffix:d});case yt.Yesterday:var p={type:at.Yesterday},S=o?void 0:{type:it.Time,separator:""};return At({value:"",date:u,prefix:p,suffix:S});case yt.ThisWeek:return mt("common.".concat(ut[new Date(e).getDay()]));case yt.ThisMonth:case yt.ThisYear:var E=o?void 0:{type:it.Time};return At({value:Ot(e,i?l?"MM/dd":"dd/MM":{month:"short",day:"short"}),date:u,suffix:E});default:var v=o?void 0:{type:it.Time};return At({value:Ot(e,i?l?"yy/MM/dd":"dd/MM/yy":{month:"short",day:"short",year:"long"}),date:u,suffix:v})}},It="yyyy-MM-dd hh:mm",Dt=function(e){return Ot(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")||It)},wt=function(e){var t=e.created_at,n=e.created_timestamp;return Pt(t||1e3*n,{noTodayFlag:!0,noTimeFlag:!0,isConvPreview:!0})},Nt=function(e,t){return Ot(e,{month:"short",day:"short",year:"long"})===Ot(t,{month:"short",day:"short",year:"long"})},Mt={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"},Lt=function(e,t){var n=1e3*e;switch(t){case"time":return bt(n);case"date":var r=new Date,o=new Date(n);if(r.getFullYear()===o.getFullYear()){if(r.getMonth()===o.getMonth()){var c=r.getDate(),a=o.getDate();if(c===a)return mt("conversation_detail.message_list.today");if(c-1===a)return mt("conversation_detail.message_list.yesterday");if(c-a<7){var i=o.getDay();return mt("common.".concat(Mt[i]))}return Ot(n,{month:"short",day:"short"})}return Ot(n,{month:"short",day:"short"})}return Ot(n,{month:"short",day:"short",year:"long"})}},Ut=n(661),xt=n.n(Ut),Gt=function(e){return 0===e||1===e?"one":e>=1e6?"many":"other"},kt=function(e){return 1===e?"one":Number.isInteger(e)?[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":![2,3,4].includes(e%10)||[12,13,14].includes(e%100)?"many":"other":"other"},jt=function(e){return e<=1?"one":"other"},Ft={fr:Gt,pl:kt,default:jt},Ht={fr:function(e,t){return"".concat(Gt(e),".").concat(Gt(t))},pl:function(e,t){return"".concat(kt(e),".").concat(kt(t))},default:function(e,t){return"".concat(jt(e),"_").concat(jt(t))}},Yt=["fr","pl"],Bt=function(e,t,n){var r=xt().language||"en",o=Yt.includes(r)?r:"default";return void 0!==n?"".concat(e,"_").concat(Ht[o](t,n)):"".concat(e,"_").concat(Ft[o](t))},Vt=function(e,t){var n=t||window.location.search,r=null;if(n){var o=n.indexOf("?")+1,c=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");r=n.substr(o).match(c)}return r?unescape(r[2]):null},Wt=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=Date.now();return function(){for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];t&&(clearTimeout(t),t=null),Date.now()-o>r?(e.apply(void 0,a),o=Date.now()):t=window.setTimeout((function(){e.apply(void 0,a),o=Date.now()}),n)}},Qt=function(e,t){var n,r,o,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null,i=0,u=function(){i=!1===c.leading?0:(new Date).getTime(),a=null,o=e.apply(n,r),a||(n=r=null)},s=function(){var s=(new Date).getTime();i||!1!==c.leading||(i=s);var l=t-(s-i);n=this;for(var f=arguments.length,_=new Array(f),d=0;d<f;d++)_[d]=arguments[d];return r=_,l<=0||l>t?(a&&(clearTimeout(a),a=null),i=s,o=e.apply(n,r),a||(n=r=null)):a||!1===c.trailing||(a=window.setTimeout(u,l)),o};return s},qt="AI-Banner",zt="MiniChat-Unreplied-Filter",Kt="Onboarding-Highlight-Assistant",Xt="Onboarding-Highlight-AutoReplied",Jt="Region-Filter",$t="modal",Zt=function(e,t){var n=t.superType,r=t.secondaryType,o=e.find((function(e){return e.name===n}));if(o){var c=o.children;if(c.length){var a=c.find((function(e){return e.name===r}));return a||!1}return!1}return!1},en=function(e){return Zt(e,{superType:qt,secondaryType:$t})},tn=function(e){return Zt(e,{superType:zt,secondaryType:$t})},nn=function(e){return Zt(e,{superType:Kt,secondaryType:$t})},rn=function(e){return Zt(e,{superType:Xt,secondaryType:$t})},on=function(e){return!!window.__WEBCHAT_SESSION__.use_top_region_ui&&Zt(e,{superType:Jt,secondaryType:$t})},cn=n(349),an=n.n(cn),un={getItem:function(e,t){try{var n=window.localStorage.getItem(e);return null==n?n:t?JSON.parse(n):n}catch(e){console.warn("*** LocalStorage Error: Can not get LocalStorage *** \n".concat(e))}},setItem:function(e,t,n){try{var r=n?JSON.stringify(t):t;window.localStorage.setItem(e,r)}catch(e){console.warn("*** LocalStorage Error: Can not set LocalStorage *** \n".concat(e))}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){console.warn("*** LocalStorage Error: Can not remove LocalStorage *** \n".concat(e))}}},sn=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?un.getItem(e):an().getItem(e)},ln=function(e,t){return an().setItem(e,t)},fn=function(e,t){return t?un.removeItem(e):an().removeItem(e)},_n=an().supports(an().INDEXEDDB)||an().supports(an().WEBSQL)?1e3:100;function dn(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pn,Sn=[1173241077,1261497292,1262080160,178828848,110573301,51115741],En=[601262932,601263083],vn=[441174],Tn=function(e){var t=(0,nt.IE)();return("live"===t?Sn:"staging"===t?vn:En).includes(e)},hn=n(95).t;function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var On=r.MSG_TYPE_TEXT,Rn=r.MSG_TYPE_IMAGE,bn=r.MSG_TYPE_OFFER,yn=r.MSG_TYPE_PRODUCT,An=r.MSG_TYPE_ORDER,Cn=r.MSG_TYPE_STICKER,Pn=r.MSG_TYPE_NOTIFICATION,In=r.MSG_TYPE_VOUCHER,Dn=r.MSG_TYPE_ITEM_LIST,wn=r.MSG_TYPE_FAQ,Nn=r.MSG_TYPE_FAQ_QUESTION,Mn=r.MSG_TYPE_FAQ_LIVEAGENT,Ln=r.MSG_TYPE_FAQ_FEEDBACK,Un=r.MSG_TYPE_FAQ_UNSUPPORTED,xn=r.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Gn=r.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,kn=r.MSG_TYPE_BUNDLE_MESSAGE,jn=r.MSG_TYPE_OPTION_PACK,Fn=r.MSG_TYPE_SELECTED_OPTION,Hn=r.MSG_TYPE_VIDEO,Yn=r.MSG_TYPE_IMAGE_WITH_TEXT,Bn=r.MSG_TYPE_RATE_CARD,Vn=r.MSG_TYPE_NEW_FAQ,Wn=r.MSG_TYPE_FAQ_CATEGORY_CHOICE,Qn=r.MSG_TYPE_FAQ_QUESTION_LIST,qn=r.MSG_TYPE_FAQ_TYPE_CHOICE,zn=r.MSG_TYPE_FAQ_CATEGORY_LIST,Kn=r.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,Xn=r.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,Jn=r.FAQ_TYPE_BOT_RESPONSE_MESSAGE,$n=r.MSG_TYPE_SHOPPING_CART,Zn=r.MSG_TYPE_CRM_ITEM_LIST,er=r.MSG_TYPE_RR,tr=r.MSG_TYPE_CRM_ORDER_RATE,nr=r.MSG_TYPE_LOGISTICS_CARD,rr=r.MSG_TYPE_LOGISTICS_ISSUE_ENQUIRY_CARD,or=r.MSG_TYPE_EXPEDITED_LOGISTICS_CARD,cr=r.MSG_TYPE_LATE_DELIVERY_COMPENSATION_VOUCHER,ar=r.MSG_TYPE_CUSTOMER_SERVICE_ENTRANCE,ir=r.MSG_TYPE_INSURANCE_CS_GUIDE,ur=r.MSG_TYPE_FAQ_BOT_REVIEW_SUMMARY_CARD,sr=r.MSG_TYPE_QUESTION_LIST,lr=r.MSG_TYPE_TEXT_WITH_BUBBLE,fr=r.MSG_TYPE_OUT_STOCK_CARD,_r=r.MSG_TYPE_RESTOCK_REMINDER_CARD,dr=r.MSG_TYPE_FAQ_BOT_TIMELINE_CARD,pr=r.MSG_TYPE_BOT_BARGAIN_CARD,Sr=r.MSG_TYPE_FAQ_BOT_AUTHENTIC_CARD,Er=r.MSG_TYPE_FAQ_TYPE_BOT_CONTACT_COURIER_CARD,vr=r.MSG_TYPE_RAISE_RR_CARD,Tr=r.MSG_TYPE_INQUIRY_RR_OPERATION_CARD,hr=r.MSG_TYPE_INQUIRY_RR_OPERATION_FEEDBACK_CARD,gr=r.MSG_TYPE_FAQ_TYPE_BOT_ITEM_COMPARISON,mr=r.MSG_TYPE_INFORM_PROMOTION,Or=r.MSG_TYPE_NEW_ARRIVAL,Rr=r.MSG_TYPE_CUSTOM_MESSAGE,br=r.MSG_TYPE_FAQ_BOT_SUGGESTION_CARD,yr=r.MSG_TYPE_SET_STOCK_REMINDER_CARD,Ar=r.MSG_TYPE_FAQ_BOT_RAISE_RR_CARD,Cr=r.MSG_TYPE_FAQ_BOT_RAISE_RR_CARD_FEEDBACK_CARD,Pr=r.MSG_TYPE_FAQ_BOT_TRACK_RR_STATUS_CARD,Ir=r.MSG_TYPE_FAQ_BOT_TRACK_RR_STATUS_FEEDBACK_CARD,Dr=r.MSG_TYPE_FAQ_BOT_ITEM_COLLECTIONS,wr=r.MSG_TYPE_FAQ_BOT_TEXT_WITH_SHORTCUT,Nr=r.MSG_TYPE_FAQ_BOT_PRODUCT,Mr=r.MSG_TYPE_FAQ_BOT_VOUCHER_PRODUCT,Lr=r.MSG_TYPE_FAQ_BOT_SELECT_PRODUCT,Ur=r.MSG_TYPE_CREDIT_CS_GUIDE,xr=r.MSG_TYPE_OFFICIAL_CHAT_BANNER,Gr=r.MSG_TYPE_OFFICIAL_CHAT_REPAYMENT,kr=r.MSG_TYPE_OFFICIAL_CHAT_VOUCHER,jr=r.MSG_TYPE_RICH_TEXT,Fr=r.MSG_TYPE_FAQ_BOT_VOUCHER_FULFILLMENT,Hr=r.MSG_TYPE_FAQ_BOT_MARKDOWN,Yr=r.MSG_TYPE_FAQ_TYPE_BOT_ITEM_VIDEO_CARD,Br=r.MSG_TYPE_FAQ_BOT_LIVE_STREAM_ITEM,Vr=B.PENDING,Wr=B.REJECTED,Qr="common.unsupported_message",qr=(U(pn={},Mn,"faq.live_agent"),U(pn,Un,"faq.new_unsupport_input"),U(pn,xn,"faq.feedback_prompt"),U(pn,Gn,"faq.new_live_agent_prompt"),U(pn,Hn,"conversation_detail.input_field.toolbar.video.tip"),U(pn,Yn,"conversation_list.conversation_cell.new_image_message"),pn),zr=function(e,t){var n=qr[e]||Qr;return Tn(t)&&("faq.new_unsupport_input"!==n&&"faq.live_agent"!==n&&"faq.new_live_agent_prompt"!==n||(n="".concat(n,"_idscs"))),hn(n)},Kr=[Dn],Xr=[Hn,Un,xn,Gn,Yn],Jr=[Rn,kn,Xn,bn,yn,An,In,Bn,Cn,Nr],$r=[Qn,qn,zn],Zr=[nr,rr,or,cr],eo=[Nr,Br],to=[Er,gr,Lr],no=function(t){var n=t.message,r=t.enableTranslation,o=t.locale,c=t.conversationShopId,a=t.currentSellerAccountId,i=t.isChatlistPreview,u=t.toShopId,s=t.isSubAccount,l=t.isCBSubAccount;if(!n)return{text:hn(Qr)};var f=n.type,_=n.content,d=void 0===_?{}:_,p=n.crm_message_preview,S=void 0===p?{}:p,E=n.message_option,v=(n.source,n.send_status,n.custom_preview_text),g=n.label_info,m=(g=void 0===g?{}:g).label_type,b=vt(o),y=C(m);if((to.includes(f)||(null==v||!v.text)&&y)&&"[".concat(hn("common.ai_assistant"),"] "),S.text&&f!==Tr){var A=yo(S,b);return{text:y?"".concat("").concat(A):A}}if(co(E,e.MSG_OPT_CENSORED_BLACKLIST))return{text:"".concat("").concat(hn("common.blacklist.replaced_text"))};if(f){var P,I,D,w,N=d||{},M=N.text,L=void 0===M?"":M,U=N.title,x=N.opening,G=N.caption,k=N.translation,j=N.product_name,F=N.sticker_name,H=N.chat_product_infos,Y=void 0===H?[]:H,B=N.products,V=void 0===B?[]:B,W=N.rr_detail,Q=N.user_id,q=N.enquiry_info,z=void 0===q?{}:q,K=N.common_info,X=void 0===K?{}:K,J=N.bot_data,$=N.business_info,Z=So(n,{isAgent:!1,shop_id:c}),ee=function(e,t,n,r,o){var c,a=t||{},i=a.live_agent_text,u=void 0===i?[]:i,s=a.fixed_title,l=a.faq_type_choice_translation;if(Xr.includes(e))c=u.length?io(u,n):zr(e,o);else if($r.includes(e))c=io(e===qn?l:s,n);else if(Zr.includes(e))c=hn("message.logistics_card.preview.prefix");else{var f=[Nr,Yr].includes(e)?yn:e,_=Jr.includes(f)?"conversation_list.conversation_cell.new_".concat(f,"_message"):Kr.includes(e)?"common.tips.recommended".concat(r?"":"_for_you"):"";c=_?"[".concat(hn(_),"]"):hn(Qr)}return c}(f,d,o,Z,u),te=(null==v||null===(P=v.translated_text)||void 0===P||null===(I=P.find((function(e){return e.translated_language===vt(o)})))||void 0===I?void 0:I.translated_text)||(null==v?void 0:v.text);switch(f){case Hr:case jr:w=te||"";break;case dr:w=i?yo(v,b)||hn(Qr):null==$?void 0:$.quoted_text;break;case Jn:var ne=JSON.parse(J)||{},re=ne.message,oe=(re=void 0===re?{}:re).plain_text,ce=void 0===oe?"":oe,ae=ne.reply_type;w=(w=1===ae||1001===ae?ce:null!=d&&d.preview_text?null==d?void 0:d.preview_text:hn(Qr))||(null==d?void 0:d.preview_text)||hn(Qr);break;case Vn:case wn:var ie=(d||{}).translated_opening,ue=(ie=void 0===ie?{}:ie).text;w=(l?ue:x)||x||hn("faq.no_set.chat_bot_title");break;case On:w=Z?L:oo({message:n,isSend:Z,isSubAccount:s,enableTranslation:r})&&(null==k?void 0:k.text)||L,l&&(w=(null==k?void 0:k.text)||L);break;case Mn:case Nn:case Ln:case Fn:case jn:case Wn:case Kn:w=L||U;break;case Hn:w="[".concat(ee,"]");break;case Yn:w="[".concat(ee,"] ").concat(G||U||L);break;case Un:case xn:case Gn:case Qn:case qn:case zn:w=ee;break;case yn:w="".concat(ee," ").concat(j);break;case Br:w="[".concat(hn("livestream_card_preview_text"),"]"),w=hn(Qr);break;case Nr:var se,le=d||{},fe=le.models,_e=void 0===fe?[]:fe,de=le.name,pe=void 0===de?"":de;w="[".concat(hn("common.product"),"] ").concat((null==_e||null===(se=_e[0])||void 0===se?void 0:se.model_name)||pe);break;case Mr:var Se=(d||{}).title;w=null==Se?void 0:Se.text;break;case Yr:w="".concat(ee," ").concat(yo(null==d?void 0:d.name,o));break;case Cn:w=F?"[".concat(F,"]"):ee;break;case Dn:var Ee=Y.map((function(e){return e.name})).join("; ");w="".concat(ee," ").concat(Ee);break;case Pn:var ve,Te=so(d||{},o),he=Te.notification_for_sender,ge=Te.notification_for_receiver,me=Te.notifications_for_sender_hyperlink,Oe=Te.notifications_for_receiver_hyperlink;if([].concat(dn(T),dn(h),[O],dn(R)).includes(null==d?void 0:d.notification_type)){if(null!==(ve=w=Z?me:Oe)&&void 0!==ve&&ve.includes("<a>")){var Re=w.split("<a>").join("");w=Re.split("</a>").join("")}}else w=Z?he:ge;break;case Bn:w="".concat(ee," ").concat(hn(Z?"conversation_list.preview.rate_card_sender":"rate_card.rate_out_service"));break;case bn:var be=d||{},ye=be.status,Ae=be.products_count,Ce=be.offer_price;if(ye)if(ye===Vr){var Pe=hn("conversation_list.preview.offer_pending_".concat(Z?"sender":"receiver"));w="".concat(ee," ").concat(Pe,": ").concat(Ce," x ").concat(Ae),Z||(D=!0)}else{var Ie=ye===Wr?"declined":ye;w="".concat(ee," ").concat(hn("conversation_detail.workstation.offer_panel.".concat(Ie)))}else w=ee;break;case An:w="".concat(ee," ").concat(V.map((function(e){return e.title})).join("; "));break;case In:var De=d||{},we=De.type,Ne=De.rule_text,Me=De.discount_text;if(we){var Le="[".concat(hn("conversation_detail.workstation.voucher_panel.".concat(we,"_voucher")),"]");Tn(u)&&"shop"===we&&(Le="[".concat(hn("conversation_detail.workstation.voucher_panel.".concat(we,"_voucher_idscs")),"]")),w="".concat(Le," ").concat(Me,", ").concat(Ne)}else w=ee;break;case $n:w=hn("message.cart_reminder");break;case Zn:case mr:case Or:case Rr:var Ue,xe,Ge,ke=null!==(Ue=null==d?void 0:d.title)&&void 0!==Ue?Ue:{};w=(null===(xe=ke.translated_with_lang)||void 0===xe||null===(Ge=xe.find((function(e){return e.language===vt(o)})))||void 0===Ge?void 0:Ge.text)||ke.text||hn(Qr);break;case er:var je=W.solution,Fe=W.status,He=fo({isBuyer:a===Q,solution:je,status:Fe});w="[".concat(hn("label.return_and_refund"),"]").concat(He);break;case vr:case hr:var Ye=(d||{}).card_title,Be=void 0===Ye?"":Ye;w="[".concat(hn("label.return_and_refund"),"] ").concat(yo(Be,vt(o)));break;case Ar:case Cr:case Pr:case Ir:var Ve=(d||{}).card_title;w="".concat(yo(void 0===Ve?"":Ve,vt(o)));break;case Tr:var We=d||{},Qe=We.card_title_for_receiver,qe=void 0===Qe?"":Qe,ze=We.card_title_for_sender,Ke=Z?void 0===ze?"":ze:qe;w="[".concat(hn("label.return_and_refund"),"] ").concat(yo(Ke,vt(o)));break;case tr:var Xe,Je;w=(null==v||null===(Xe=v.translated_text)||void 0===Xe||null===(Je=Xe.find((function(e){return e.translated_language===vt(o)})))||void 0===Je?void 0:Je.translated_text)||(null==v?void 0:v.text)||hn(Qr),w=yo(v,b)||hn(Qr);break;case nr:case or:var $e=_o(f,d,X.user_id===a,!0);w="[".concat(ee,"] ").concat($e);break;case rr:var Ze=po(z);w="[".concat(ee,"] ").concat(Ze);break;case cr:w="[".concat(ee,"] ").concat(hn("message.late_delivery_compensation_voucher.title"));break;case ar:var et,tt,nt=(null==v||null===(et=v.translated_text)||void 0===et||null===(tt=et.find((function(e){return e.translated_language===vt(o)})))||void 0===tt?void 0:tt.translated_text)||(null==v?void 0:v.text)||hn("common.chat_with_shopee")||hn(Qr);w=1===(d||{}).button_type?nt:hn("text.customer_service_entrance");break;case Ur:case ir:w=yo(null==d?void 0:d.chat_general_text,vt(o));break;case ur:var rt,ot;w=(null==v||null===(rt=v.translated_text)||void 0===rt||null===(ot=rt.find((function(e){return e.translated_language===vt(o)})))||void 0===ot?void 0:ot.translated_text)||(null==v?void 0:v.text)||hn(Qr),w=yo(v,b)||hn(Qr);break;case fr:w="[".concat(hn("preview.set_restock_reminder"),"]");break;case _r:w="[".concat(hn("preview.restock_reminder"),"]");break;case pr:w="[".concat(hn("common.preview.bargain_card"),"]");break;case Sr:w=hn("Authentic_card_preview");break;case Er:w=null==$?void 0:$.quoted_text;break;case br:case gr:var ct=(d||{}).comparison_summary;w=void 0===ct?"":ct;break;case sr:w=yo(U,b)||(null==U?void 0:U.text)||hn(Qr);break;case lr:(w=yo(L,b)||(null==L?void 0:L.text)||hn(Qr))||1===(d||{}).bubble_type&&(w=hn("modal.select_order.title"));break;case yr:w="[".concat(hn("preview.prefix.set_stock_reminder"),"] ").concat(hn("label.out_stock.title"));break;case Dr:var at,it,ut,st=(d||{}).item_collections,lt=void 0===st?[]:st;w=(null==v||null===(at=v.translated_text)||void 0===at||null===(it=at.find((function(e){return e.translated_language===vt(o)})))||void 0===it?void 0:it.translated_text)||(null==v?void 0:v.text)||(null==lt||null===(ut=lt[0])||void 0===ut?void 0:ut.collection_name)||hn(Qr);break;case wr:var ft,_t,dt=(d||{}).text,pt=void 0===dt?"":dt;w=(null==v||null===(ft=v.translated_text)||void 0===ft||null===(_t=ft.find((function(e){return e.translated_language===vt(o)})))||void 0===_t?void 0:_t.translated_text)||(null==v?void 0:v.text)||pt||hn(Qr);break;case Lr:var St=(d||{}).text;w=void 0===St?"":St;break;case xr:case kr:w=(d||{}).title;break;case Gr:var Et=d||{},Tt=Et.preview,ht=(Tt=void 0===Tt?{}:Tt).prefix,gt=void 0===ht?"":ht,mt=Et.bill_status,Ot=(mt=void 0===mt?{}:mt).content;Z||(D=!0),w="[".concat(gt.replace(/[[\]]/g,""),"] ").concat(Ot);break;case Fr:var Rt=d||{},bt=Rt.promo_title.text,yt=void 0===bt?"":bt,At=Rt.card_title.text,Ct=void 0===At?"":At;w=(null==yt?void 0:yt.replace(/<\/?b>/g,""))||Ct;break;default:w=ee}return{text:"".concat("").concat(w),isPendingReceivedOffer:D}}return{text:"".concat("").concat(hn(Qr))}},ro=["crm","proactive_update"],oo=function(t){var n=t.message,o=t.isSend,c=t.isSubAccount,a=t.enableTranslation,i=n.send_status,u=n.message_option,s=n.content,l=void 0===s?{}:s,f=n.country,_=n.type,d=n.source,p=uo(l);return!o&&(c||"ID"!==f)&&_===r.MSG_TYPE_TEXT&&!ro.includes(d)&&u!==e.MSG_OPT_SOCIAL_MESSAGE&&2!==i&&a&&!p},co=function(e,t){return(e&t)===t},ao=function(){return co((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message_option,e.MSG_OPT_DELETE)},io=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.find((function(e){return vt(t).toLocaleLowerCase().includes(e.lang.toLocaleLowerCase())}))||e.find((function(e){return"en"===e.lang}));return(n||{}).text},uo=function(e){var t=e||{},n=t.translation,r=t.mid;if(!n)return!0;var o=(void 0===r?{}:r).source_language,c=void 0===o?"":o,a=n||{},i=a.final,u=a.mid,s=a.target_language,l=void 0===s?"":s,f=a.source_language,_=void 0===f?"":f,d=i?i.target_language:l,p=i?i.source_language:_,S=u?u.source_language:c;return S?S===d:p===d&&"unknown"!==p},so=function(e,t){var n=e.noti_text_of_all_languages,r=void 0===n?[]:n;if(!r.length)return e;var o=r.find((function(e){return vt(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}));if(o)return o;var c=r.find((function(e){return"en"===e.language}));return c||e},lo=function(e){var t=e.type,n=e.textContent,r=e.content,o={};switch(t){case An:o={products:(n||{}).products};break;case In:var c=n||{};o={rule_text:c.rule_text,discount_text:c.discount_text,type:c.type};break;case bn:var a=n||{};o={status:a.status,products_count:a.products_count,offer_price:a.offer_price};break;case yn:o={product_name:r.product_name||(null==n?void 0:n.name)}}return mn(mn({},e),{},{content:mn(mn({},r),o)})},fo=function(e){var t=e.isBuyer,n=e.status,r=e.solution===l.Return?"return":"return_refund",o=n===s.Submit?"proposed":n===s.Refund?"succeed":"rejected";return hn("rr_message_title.".concat(t?"buyer":"seller",".").concat(r,".").concat(o))},_o=function(e,t,n,o){var c=t||{},a=c.common_info,i=(a=void 0===a?{}:a).card_label,u=a.order_delivery_status,s=c.logistic_tracking_info,l=(s=void 0===s?{}:s).estimate_delivery_time,f=s.stuck_time,p=c.expedite_delivery_button,S=e===r.MSG_TYPE_EXPEDITED_LOGISTICS_CARD,E=i===_.Inquiry,T=v[d[u]],h="".concat(Dt(1e3*l,"www"),", ").concat(Dt(1e3*l,"LHDS")),g=o?h:"<a>".concat(h,"</a>"),m=Math.floor(f/86400),O="stuck"===T&&0===m,R="";if(S&&n&&!E)R=hn("message.expedited_logistics_card.title.buyer.expedite");else if(n){var b=p||S||u!==d.AfterGuarantee&&u!==d.AfterEstimated&&(u!==d.Stuck||E)?"":".unable_expedite";R=hn("message.".concat(e,".title.buyer.").concat(E?"inquiry":"expedite",".").concat(T).concat(b),{date:g,num:m}),O&&!S&&(R=E?hn("message.logistics_card.title.buyer.inquiry.normal",{date:g}):hn("message.logistics_card.title.buyer.expedite.nostuck".concat(b)))}else R=hn("message.logistics_card.title.seller.".concat(T),{date:g,num:m}),O&&(R="".concat(hn("message.logistics_card.title.seller.normal",{date:g})).concat(hn("message.logistics_card.title.buyer.expedite.nostuck.unable_expedite")));return R},po=function(e){var t=e||{},n=t.display_sla_type,r=t.display_sla_value,o=t.enquiry_id;if(n===f.day&&r&&o&&"0"!==o){var c="".concat(f[n],"s");return hn("message.issue_enquiry_card.title.".concat(c),{value:r})}return hn("message.issue_enquiry_card.title.unavailable")},So=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isAgent,r=t.to_tob_user_id,o=t.shop_id,c=e.from_id,a=e.to_shop_id;return n?c!==r:a!==o},Eo=function(e){return e.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&")},vo=function(){return Math.ceil(Date.now()/1e3).toString()},To=function(e){return"".concat("\n  margin: 0;\n  box-sizing: border-box;\n  padding: 8px 10px 10px;\n  font-size: 14px;\n  line-height: 20px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  position: fixed;\n  left: -1000;\n  right: -1000;\n","max-width: ").concat(e,"px")},ho=function(e){var t=document.createElement("span");return t.setAttribute("style","\n  font-size: 12px;\n  line-height: 16px;\n  margin-left: 8px\n"),t.innerText=e,t},go=function(e,t,n,r){var o=document.createElement("pre"),c=To(e);if(o.id="chat-text-pre",o.setAttribute("style",c),o.innerText=t,n){var a=ho(n);if(o.appendChild(a),r){var i=function(){var e=document.createElement("span");return e.setAttribute("style","\n  width: 20px;\n  height: 1px;\n  display: inline-block;\n"),e}();o.appendChild(i)}}return o},mo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";document.body.appendChild(e);var n=e.getBoundingClientRect(),r="height"===t?n.height:n.width;return document.body.removeChild(e),r},Oo=function(e,t,n,r){var o=go(n,e),c=ho(t),a=go(n,e,t,r),i=mo(o);return{conflict:i!==mo(a),multiLine:i>38,timeWidth:mo(c,"width"),widthConflict:mo(a,"width")>mo(o,"width")}},Ro=function(e){var t=e.isSubAccount,n=e.status,r=e.userStatus,o=e.isBlocked;return"closed"===n?"closed":["banned","frozen"].includes(r)?r:!(0,nt.z$)()&&t||!o?"":"blocked"},bo=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,o=document.getElementById("infinite-list");if(!e||!o)return!1;var c=null==o||null===(t=o.getBoundingClientRect)||void 0===t?void 0:t.call(o),a=null==e||null===(n=e.getBoundingClientRect)||void 0===n?void 0:n.call(e);return Math.min(null==a?void 0:a.bottom,null==c?void 0:c.bottom)-Math.max(null==a?void 0:a.top,null==c?void 0:c.top)>r},yo=function(e,t){var n,r,o,c;return"string"==typeof e?e:(null==e||null===(n=e.translated_with_lang)||void 0===n||null===(r=n.find((function(e){return e.language.toLocaleLowerCase()===t.toLocaleLowerCase()})))||void 0===r?void 0:r.text)||(null==e||null===(o=e.translated_text)||void 0===o||null===(c=o.find((function(e){return e.translated_language.toLocaleLowerCase()===t.toLocaleLowerCase()})))||void 0===c?void 0:c.translated_text)||(null==e?void 0:e.text)||""},Ao=function(e,t){var n,r,o;return null===(n=(null===(r=Object.values(e))||void 0===r?void 0:r.find((function(e){return e.lang===vt(t)})))||(null===(o=Object.values(e))||void 0===o?void 0:o.find((function(e){return"en"===e.lang}))))||void 0===n?void 0:n.text},Co=n(95)}(),i}())},29494:function(e,t,n){"use strict";e.exports=n(96296)}}]);